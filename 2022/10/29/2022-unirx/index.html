<!doctype html>
<html lang="ko" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">2022년 현재 UniRx의 용도 | Lonpeach Tech</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tech.lonpeach.com/2022/10/29/2022-unirx"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="2022년 현재 UniRx의 용도 | Lonpeach Tech"><meta data-rh="true" name="description" content="환경"><meta data-rh="true" property="og:description" content="환경"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-10-29T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/karais89"><meta data-rh="true" property="article:tag" content="unity3d,unirx"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tech.lonpeach.com/2022/10/29/2022-unirx"><link data-rh="true" rel="alternate" href="https://tech.lonpeach.com/2022/10/29/2022-unirx" hreflang="ko"><link data-rh="true" rel="alternate" href="https://tech.lonpeach.com/2022/10/29/2022-unirx" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Lonpeach Tech RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Lonpeach Tech Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-59335977-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="icon" href="/img/docusaurus.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><link rel="stylesheet" href="/assets/css/styles.252e95bb.css">
<link rel="preload" href="/assets/js/runtime~main.297bbd53.js" as="script">
<link rel="preload" href="/assets/js/main.25d41551.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="본문으로 건너뛰기"><a href="#" class="skipToContent_fXgn">본문으로 건너뛰기</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Lonpeach Tech</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Blog</a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/karais89/karais89.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="최근 블로그 문서 둘러보기"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/2022/10/29/2022-unirx">2022년 현재 UniRx의 용도</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/10/12/10-step-learning-method">10단계 학습법</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/10/12/10-ways-to-create-a-successful-study">[인프콘] 성공하는 스터디를 만드는 10가지 방법</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/03/16/jekyll-font">코딩용 고정폭 폰트 Cascadia Code 사용기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/06/21/FastAPI-Getting-Started-3">FastAPI 입문 3 - 튜토리얼 - 도입</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">2022년 현재 UniRx의 용도</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-10-29T00:00:00.000Z" itemprop="datePublished">2022년 10월 29일</time> · <!-- -->약 53분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="환경">환경<a class="hash-link" href="#환경" title="제목으로 바로 가기">​</a></h2><ul><li>macOS Ventura v13.0</li><li>Unity 2021.4.36f1</li><li>Github Desktop</li><li>Rider 2022.1</li><li>UniRx v7.1.0</li></ul><p>원문 : <a href="https://qiita.com/toRisouP/items/af7d32846ab99f493d92" target="_blank" rel="noopener noreferrer">2022年現在におけるUniRxの使いみち</a></p><p>이 포스팅은 원문을 단순히 구글 번역을 하여 정리한 내용입니다. 일본어를 잘하시는 분은 원문을 보시는게 더 좋으실 것 같습니다.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="소개">소개<a class="hash-link" href="#소개" title="제목으로 바로 가기">​</a></h2><p>제가 &quot;UniRx 입문&quot;이라는 기사를 쓰기 시작한 지 5년, 마지막 기사를 쓴 지 4년이 지났습니다.
기사를 업데이트하지 않은 지난 몇 년 동안 UniRx를 둘러싼 환경이 크게 바뀌었습니다.
UniRx라는 라이브러리 자체에 특히 큰 업데이트는 없지만 Unity의 C# 버전이 업데이트되거나 UniRx보다 편리한 라이브러리가 등장하기도 했습니다.</p><p>이번은 2022년 현재의 Unity에 있어서의 UniRx의 입 위치와 그 사용법에 대해 해설합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="unirx의-위치">UniRx의 위치<a class="hash-link" href="#unirx의-위치" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="현대-unirx-상황">현대 UniRx 상황<a class="hash-link" href="#현대-unirx-상황" title="제목으로 바로 가기">​</a></h3><p>2017년경의 오래된 버전의 Unity에서는 <code>.NET 3.5</code> 상당히 부족한 C#의 기능 밖에 사용할 수 없었습니다.
비동기 처리에 <code>async/await</code>조차 사용할 수 없고, <code>코루틴</code>을 사용할지 <code>UniRx</code>를 사용할지 선택하는 상황이었습니다.
따라서 시간 관련 처리는 코루틴이나 UniRx를 사용하여 작성할 수 밖에 없었습니다.</p><p>그렇지만, 2022년 현재에 있어서는 <code>C# 8.0/.NET Standard 2.0</code>와, 꽤 최신의 C#의 기능을 이용 가능하게 되었습니다.
이 때문에 무언가 기능을 구현할 때 2017년경에 비해 취할 수 있는 옵션이 대폭 늘어나고, 옛날에는 일반적이었던 수법도 현대에서는 오래된 기술이 된 것도 있습니다.
UniRx도 그 중 하나입니다.
현대에서는 무리하게 UniRx를 사용할 필요가 없어서 <code>async/await</code>쓰거나 다른 라이브러리를 병용하는 것이 스마트하게 끝난다는 패턴이 존재하고 있습니다.</p><p>UniRx 자체는 확실히 편리하고 강력한 라이브러리이며, 사용 목적에 맞는 다면 매우 편리합니다.
하지만 UniRx 자체는 까다롭고, 다양한 기법들이 존재 하기 때문에, 잘 다루어지기까지 꽤 시간이 걸립니다.
게다가 현대에 있어서는 &quot;그 밖에 선택사항이 많아졌기 때문에 UniRx를 무리하게 사용할 필요는 없다&quot;라고 하는 상황이기도 합니다.</p><p>그러므로 <strong>UniRx는 Unity 초보자가 가장 먼저 학습하는 라이브러리가 아니게 되었다(async/await부터 먼저 학습하는 것이 더 실천적이다)</strong> 라는 상황입니다.</p><p>하지만 UniRx의 쓰임새가 완전히 없어진 것은 아니고, 용도에 따라서는 아직도 현역에서 편리하게 사용할 수 있는 라이브러리입니다.
이러한 전제를 근거로, 현대에 있어서의 UniRx의 용도를 정리해 보겠습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="현대-unirx-애플리케이션">현대 UniRx 애플리케이션<a class="hash-link" href="#현대-unirx-애플리케이션" title="제목으로 바로 가기">​</a></h3><p>UniRx 자체는 &quot;이벤트 처리&quot;와 &quot;비동기 처리&quot;에 특화된 라이브러리입니다.
이 중 &quot;이벤트 처리&quot;에 대해서는 UniRx는 아직도 현역으로 사용할 수 있는 수준으로 편리합니다.
한편 &quot;비동기 처리&quot;에 대해서는 <code>async/await</code>를 사용할 수 있는 현대에 있어서는, UniRx를 사용하는 것은 드문 상황이지요.</p><p>또, UniRx의 특징인 풍부한 오퍼레이터군도, 딱 빠지는 상황이라면 아직도 취급할 수 있습니다.
다만 복잡한 오퍼레이터 체인이 될 정도라면, 솔직하게 <code>async/await</code>쓰는 편이 전체적으로 알기 쉬워지는 경우가 많습니다.</p><p><strong>UniRx 애플리케이션</strong></p><ul><li>이벤트 처리의 기구로서 사용<ul><li>여러 객체에 메시지를 전달하는 장면에서 여전히 사용할 수 있습니다.</li><li>MessageBroker로서의 용도도 있지만, 현대에 있어서는 &quot;MessagePipe&quot;라고 하는 선택사항도 있다</li></ul></li><li>복잡한 이벤트 처리 로직 구축<ul><li>딱 빠지는 오퍼레이터가 있다면 간결하게 쓸 수 있다.</li><li>조금이라도 응용을 시도하면 단번에 어려워지므로 <code>async/await</code> 사용하는 것이 좋습니다.</li></ul></li><li>비동기 처리의 메커니즘으로<ul><li><strong>단발 비동기 처리를 다루는 경우 현대에서는 async / await로 대체하는 것이 좋습니다.</strong></li><li>단 <code>Retry</code>, <code>Switch</code>등의 일부 오퍼레이터가 편리하므로 그 목적으로 사용할 수도 있습니다.</li></ul></li><li>UI 구성에 사용<ul><li>MV(R)P 패턴이 편리</li></ul></li></ul><p><strong>역주</strong></p><ul><li>결론적으로는 현재 UniRx의 다양한 오퍼레이터에 대한 부분을 익히는 노력으로 다른 기술들을 익히는게 가장 좋은 선택으로 보입니다.</li><li>UI를 구성할때 MV(R)P 패턴을 사용하여 구현한다면, 실제 처리 부분을 조금 더 깔끔하게 구현 가능한 정도의 선에서 사용해야 될 것으로 보입니다.</li><li>비동기/동기 처리는 UniTask를 사용합시다.</li><li>MessageBroker의 경우도 VContainer의 MessagePipe로 대체 가능합니다.</li><li>이벤트의 상위호환 라이브러리 정도로 사용하는게 정신 건강에 좋지 않을까 싶습니다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unirx와-asyncawait와-unitask">UniRx와 async/await와 UniTask<a class="hash-link" href="#unirx와-asyncawait와-unitask" title="제목으로 바로 가기">​</a></h3><p>조금 전부터 몇 번이나 <code>async/await</code> 다루고 있습니다만, 이쪽은 간단하게 &quot;편리하게 된 코루틴&quot; 이라고 하는 인식으로 일단은 문제 없습니다.
<code>async/await</code> 자체는 비동기 처리의 대기 처리를 간소하게 쓸 수 있도록 하기 위한, C#의 언어 기능입니다.
(구조는 전혀 다르지만) <code>async/await</code>는 외형으로서는 Unity의 코루틴과 매우 비슷합니다.</p><p>UniRx에서도 코루틴과의 조합은 편리했지만, <code>async/await</code>에서도 UniRx와 조합하면 그 편리성이 높아집니다.
특히 <a href="https://github.com/Cysharp/UniTask" target="_blank" rel="noopener noreferrer">UniTask</a>라는 라이브러리가 강력하며, 여기를 도입함으로써 Unity에서 <code>async/await</code>의 취급을 대폭 강화할 수 있습니다.
<strong>(async/await와 UniTask는 반드시 세트로 다루고 싶을 정도로 강력합니다)</strong></p><p>여기서 오해하고 싶지 않지만, &quot;async/await이 있기 때문에 UniRx는 불필요해졌다&quot; 는 것은 아닙니다.
UniRx는 UniRx에서 사용할 수 있는 경우도 아직도 있고, async/await또한 편리하게 사용할 수 있는 경우도 다수 있습니다.
<strong>옛날에는 UniRx 밖에 선택사항이 없었지만, 현대에 있어서는 UniRx를 사용하지 않아도 보다 간단하게 구현할 수 있는 수법이 늘어났다고 하는 것입니다.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unirx가-편리한-장소-asyncawait가-편리한-장소">UniRx가 편리한 장소, async/await가 편리한 장소<a class="hash-link" href="#unirx가-편리한-장소-asyncawait가-편리한-장소" title="제목으로 바로 가기">​</a></h3><p>UniRx는 결코 다목적이 아닙니다.
상황에 따라서는 <code>async/await</code>(혹은, 완전히 다른 도구)를 사용하는 편이 깨끗하게 쓸 수 있는 경우도 많이 있습니다.</p><p>그럼 UniRx <code>async/await</code>를 어떻게 구사할까요, 기본적으로는 다음 구분으로 문제 없습니다.</p><ul><li><p>UniRx가 편리하게 사용할 수 있는 경우</p><ul><li>불특정 다수에 여러 번 이벤트 메시지를 전달하는 경우</li><li>특정 처리의 흐름(시퀀스)을 여러 번 반복 실행하는 경우</li><li>종속성을 역전하려는 경우</li><li>Push형으로 구동할 필요가 있는 경우</li></ul></li><li><p><code>async/await</code>(및 <code>UniTask</code>조합)을 편리하게 사용할 수 있는 경우</p><ul><li>&quot;<strong>한 번만</strong> 실행되는 처리&quot;를 기다리는 경우</li><li>절차적 (<code>if</code>문 <code>for</code>문)으로 처리를 작성하고 싶은 경우</li><li>처리의 동작이 Pull형으로 끝나는 경우</li></ul></li></ul><p>UniRx는 <strong>&#x27;반복 실행&#x27;</strong>에 특화되어 있습니다.
그 때문에 &quot;몇번인가 발행되는 이벤트를 처리한다&quot; &quot;<code>Update()</code>의 루프 대신에 사용한다&quot;라고 하는 용도에 매치하고 있습니다.</p><p>한편으로 <code>async/await</code>는 <strong>&quot;뭔가의 처리를 1회만 기다린다&quot;</strong>에 특화하고 있습니다.
그 때문에 &quot;초기화 처리가 끝나는 것을 기다린다&quot; &quot;외부와의 통신을 기다린다&quot;라고 하는 경우는 <code>async/await</code>에서 쓰는 편이 스마트하게 쓸 수 있습니다.
(단발의 처리를 UniRx로 쓰는 것도 물론 할 수 있지만, 중복이 되기 쉽다)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-실제-unirx-애플리케이션">2. 실제 UniRx 애플리케이션<a class="hash-link" href="#2-실제-unirx-애플리케이션" title="제목으로 바로 가기">​</a></h2><p>그러면 현대에서 UniRx를 어떤 경에서 사용하는지 소개합니다.
일부는 <strong>예전에는 UniRx를 사용하기도 했지만, 현대에서는 다른 방법으로 쓰는 것이 좋다</strong>는 것도 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-이벤트-통지에-사용">A. 이벤트 통지에 사용<a class="hash-link" href="#a-이벤트-통지에-사용" title="제목으로 바로 가기">​</a></h3><p>이벤트란, &quot;무언가의 조건을 만족했을 때, 그 때의 정보를 통지해 다른 장소에서 처리를 실행한다&quot;라고 하는 구조를 가리킵니다.
이벤트를 이용하면 &quot;조건을 판정하는 부분&quot;과 &quot;실제로 처리를 실시하는 부분&quot;을 분리해 구현할 수 있게 됩니다.</p><p><img loading="lazy" alt="Event" src="/assets/images/2022-10-29-1-64fd4d75df24187746afcf351874b5e3.png" width="415" height="196" class="img_ev3q"></p><p>이벤트의 사용법으로서는 다음의 패턴을 생각할 수 있습니다.</p><ul><li>비 정기적으로 여러 번 반복하는 처리를 다루기 쉽다.</li><li>실제의 처리 부분이 복수 있을 때, 그 조건 판정의 부분을 한 곳에서 처리한다</li><li>컴포넌트간의 종속성 구성</li></ul><p>&quot;비 정기적으로 여러 번 반복하는 처리를 다루기 쉽다&quot;는 Unity에서는 OnTriggerEnter등의 이벤트를 예로 들 수 있습니다.
&quot;언제 일어날지 모르지만, 발생했을 때는 즉시 대응한 처리를 실행하고 싶다&quot;라고 하는 때에 이벤트의 개념을 사용할 수 있습니다.</p><p><img loading="lazy" alt="Event" src="/assets/images/2022-10-29-2-701df75f9b9425a69859829d38b56132.png" width="419" height="301" class="img_ev3q"></p><p>&quot;실제의 처리 부분이 복수 있을 때, 그 조건 판정의 부분을 한 곳에서 처리한다&quot;는, 예를 들면 &quot;Input&quot;을 들 수 있습니다.
게임을 하고 있는 사람(플레이어)으로부터의 Input을 받아들이고 캐릭터를 조작하게 됩니다.
이 때 아무것도 생각하지 않고 어리석게 구현하면 다양한 컴포넌트와 <code>if(Input.GetKeyDown(&quot;Attack&quot;))</code>같은 처리가 흩어져 버립니다.
이러한 문제도 이벤트 개념을 사용하여 스마트하게 구현할 수 있습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unirx와-이벤트">UniRx와 이벤트<a class="hash-link" href="#unirx와-이벤트" title="제목으로 바로 가기">​</a></h4><p>우선 &quot;Input을 판정해 그것을 Observable로 변환하는 컴퍼넌트&quot;를 생각합니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">InputEventProvider</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 공격 버튼 입력</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">IReadOnlyReactiveProperty</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> Attack </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _attack</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 이동 방향 입력</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">IReadOnlyReactiveProperty</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name">Vector3</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> MoveDirection </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _moveDirection</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 점프 입력</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">IReadOnlyReactiveProperty</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> Jump </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _jump</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 구현</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name">ReactiveProperty</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">bool</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> _attack </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">BoolReactiveProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name">ReactiveProperty</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">bool</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> _jump </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">BoolReactiveProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name">ReactiveProperty</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name">Vector3</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> _moveDirection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ReactiveProperty</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name">Vector3</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Destroy시 Dispose()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _attack</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _jump</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _moveDirection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 다양한 입력을 ReactiveProperty에 반영</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _jump</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Jump&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _attack</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Attack&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _moveDirection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token named-parameter punctuation" style="color:#393A34">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetAxis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Horizontal&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token named-parameter punctuation" style="color:#393A34">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token named-parameter punctuation" style="color:#393A34">z</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetAxis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Vertical&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 컴퍼넌트를 준비하면, 실제로 입력 이벤트를 사용해 처리를 실시하는 컴퍼넌트로부터 이것을 참조시킵니다.
이제 &quot;UniRx를 사용하여 입력 이벤트를 처리&quot;할 수있었습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 예: Input을 보고 이동</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerMove</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">float</span><span class="token plain"> _moveSpeed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0f</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">InputEventProvider</span><span class="token plain"> _inputEventProvider</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">CharacterController</span><span class="token plain"> _characterController</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _characterController </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">CharacterController</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 점프</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 버튼 입력 이벤트 결정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _inputEventProvider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Jump</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 버튼을 눌렀을 때,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 접지 중이며,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _characterController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isGrounded</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 마지막으로 점프한 지 1초 이상 경과하면,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ThrottleFirst</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeSpan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 처리 수행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">Jump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 이동 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _inputEventProvider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MoveDirection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 일정값 이상 입력하면</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magnitude </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 그쪽으로 이동</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    _characterController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">normalized </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> _moveSpeed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Jump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 처리(생략)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Input" src="/assets/images/2022-10-29-3-c61ed8a079a8205c349b8322dc21cda5.png" width="526" height="236" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="보충-pubsub-개념">보충: &quot;Pub/Sub&quot; 개념<a class="hash-link" href="#보충-pubsub-개념" title="제목으로 바로 가기">​</a></h4><p>이벤트 처리의 일종으로서, &quot;Pub/Sub&quot;라고 하는 것이 있습니다.</p><p>일반적인 이벤트 처리에 있어서는, 일반적으로는 &quot;누구로부터 메세지가 보내 오는지&quot;를 구독측이 어느 정도는 의식할 필요가 있습니다.
그것을 <code>Pub/Sub</code> 있어서는 &quot;이벤트 메세지 그 자체&quot;에 주목해, &quot;누구로부터 보내져 왔는지는 신경쓰지 않는다&quot;라고 하는 모델이 되고 있습니다.
(같이 송신측도 &quot;누가 수신하고 있는지는 신경쓰지 않는다&quot;라고 하는 형태가 됩니다)</p><p><img loading="lazy" alt="Pub/Sub" src="/assets/images/2022-10-29-4-629a4b8c546baf0f41c8ddac9f3d210e.png" width="1075" height="250" class="img_ev3q"></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>UML Source Code</summary><div><div class="collapsibleContent_i85q"><p></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@startuml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">left to right direction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface IPublisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface ISubscriber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note top of Publisher_A : 송신측은 수신측이 누군지 모른다</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note top of Subscriver_A : 수신측은 송신측이 누군지 모른다</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Publisher_A --&gt; IPublisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Publisher_B --&gt; IPublisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IPublisher ..&gt; ISubscriber : Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note &quot;Pub/Sub는 본체는 숨기고\n보이지 않는 어딘가를 통해\n메시지를 전송한다.&quot; as N2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IPublisher .. N2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">N2 .. ISubscriber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ISubscriber &lt;-- Subscriver_A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ISubscriber &lt;-- Subscriver_B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@enduml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details><p><code>Pub/Sub</code>를 사용하면 송신자와 수신자를 더 느슨하게 결합할 수 있습니다.
컴퍼넌트간의 참조 관계나 의존관계를 정리해 휘두르는 일 없이, 보다 데이터 플로우를 중심으로 한 구현을 실시하는 것이 가능해집니다.
그러나 다른 한편으로는 올바르게 메시지를 관리 할 수 ​​없으면 스파게티 코드가 가속된다는 문제점도 <code>Pub/Sub</code>있습니다.
초보자에게 추천할 수 있는 기능은 아닙니다만, 이런 것도 있으면 머리의 한쪽 구석에서 두면 어느 것이 도움이 될 때가 올 것입니다.</p><p>이제 이것 <code>Pub/Sub</code>이지만 구현하는 방법에는 여러 가지가 있습니다.</p><ul><li>UniRx의 &quot;MessageBroker&quot;라는 기능 사용</li><li><a href="https://github.com/Cysharp/MessagePipe" target="_blank" rel="noopener noreferrer">MessagePipe</a> 라는 라이브러리 사용</li></ul><p><code>Pub/Sub</code>을 가볍게 시도하고 싶다면 UniRx <code>MessageBroker</code>를 쉽게 사용할 수 추천합니다.
거기에서 한층 더 밟아, &quot;DI와 조합해 사용하고 싶다&quot; &quot;서버 통신을 얽힌 <code>Pub/Sub</code>것을 실시하고 싶다&quot;라고 하는 경우는 <code>MessagePipe</code>를 사용해 보면 좋을 것입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="b-비동기-처리에-사용">B. 비동기 처리에 사용<a class="hash-link" href="#b-비동기-처리에-사용" title="제목으로 바로 가기">​</a></h3><p>앞에서 결론에서 언급하면 ​​<strong>비동기 처리에 UniRx를 사용하는 것은 더 이상 권장 하지 않습니다.</strong>
과거 2017년 이전의 Unity에서는 비동기 처리의 선택사항으로서 괜찮은 것이 UniRx 정도밖에 없었습니다.
그러나 현대에서는 <code>async/await</code>나 UniTask의 등장에 의해, 굳이 UniRx를 사용해 비동기 처리를 취급할 필요성이 없어졌습니다.</p><p>(원래 「비동기 처리」란 무엇을 가리키는지입니다만, 이쪽은 말하면 길어지기 때문에 다른 기사에서 다시 투고 예정입니다)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="추가">추가<a class="hash-link" href="#추가" title="제목으로 바로 가기">​</a></h4><p>&quot;비동기 처리에 UniRx를 사용하는 것은 비추천&quot;이지만 일부 Operator가 매우 편리합니다.
특히 <code>OnErrorRetry</code>는 에러 발생시 지정 횟수까지 재 시도를 해주는 것입니다.
이런 Operator를 <code>async/await</code> 함께 <code>try-catch</code> 사용하면 상당히 복잡해지기 때문에, async/await와 함께 Observable을 같이 사용하는 것도 어려울 수 있지만 존재합니다.</p><p>단, 어리석게 <code>ToObservable().OnErrorRetry()</code>만 해도 잘 움직이지 않고, <code>Observable.Defer()</code>와 병용할 필요가 있거나 합니다.
이 함수들은 상당히 까다롭기 때문에, 왜 <code>Observable.Defer()</code> 필요한지 모르는 사람은, 이 테크닉은 사용하지 않는 편이 안전할지도 모릅니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">UniTaskVoid</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SampleAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> uri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">CancellationToken</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Observable.Defer로 감싸서 Retry 발화시 GetAsync를 다시 실행하도록 합니다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Defer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 에러 발생시 1초 기다린 후 총 3회까지 시도</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnErrorRetry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">UnityWebRequestException</span><span class="token plain"> ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">LogException</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token named-parameter punctuation" style="color:#393A34">retryCount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TimeSpan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">UniTask</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name keyword" style="color:#00009f">string</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> uri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">CancellationToken</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> uwr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UnityWebRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> uwr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SendWebRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithCancellation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> uwr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">downloadHandler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예-asyncoperation">예: AsyncOperation<a class="hash-link" href="#예-asyncoperation" title="제목으로 바로 가기">​</a></h4><p>Unity에서 등장하는 비동기 처리로 취급할 필요가 있는 객체 중：<code>AsyncOperation</code>가 있습니다.
이것은 UnityAPI에서 비동기 처리를 호출할 때 반환되는 객체입니다.</p><p>【<code>AsyncOperation</code>한 객체를 돌려주는 Unity의 API의 예】</p><ul><li><code>UnityWebRequest.SendWebRequest()</code></li><li><code>SceneManager.LoadSceneAsync()</code></li><li><code>AssetBundle.LoadAssetAsync</code></li></ul><p><code>AsyncOperation</code>는 본래라면 코루틴으로 처리하는 객체입니다만, <code>UniTask</code>를 도입하고 있는 경우는 <code>async/await</code>로 기술하는 것이 가능합니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 텍스처 다운로드</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">UniTask</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name">Texture</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">FetchTextureAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> uri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">CancellationToken</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> uwr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UnityWebRequestTexture</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> uwr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SendWebRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithCancellation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DownloadHandlerTexture</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> uwr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">downloadHandler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">texture</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p>(이하 비추천)</p><p>한때, UniRx 정도 괜찮은 비동기 처리의 핸들링 방법이 없었던 시대는 다음과 같은 쓰기를 하고 있었습니다.
<code>async/await</code>와 비교해 보면, <strong>UniRx 쪽이 압도적으로 중복코드가 많고 복잡합니다.</strong></p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 텍스처 다운로드 Observable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">IObservable</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name">Texture</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">FetchTextureObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> uri</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 코루틴을 Observable로 변환</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">FromCoroutine</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">Texture</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">observer </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">FetchTextureCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> observer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 통신하는 코루틴</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">FetchTextureCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> uri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">IObserver</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name">Texture</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> observer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> uwr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UnityWebRequestTexture</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> uwr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SendWebRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uwr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">result </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> UnityWebRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Success</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            observer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uwr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DownloadHandlerTexture</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> uwr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">downloadHandler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">texture</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            observer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            observer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnCompleted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cmodel-view-reactivepresenter-패턴에-사용">C.Model-View-(Reactive)Presenter 패턴에 사용<a class="hash-link" href="#cmodel-view-reactivepresenter-패턴에-사용" title="제목으로 바로 가기">​</a></h3><p>Model-View-(Reactive)Presenter, 통칭 MV(R)P패턴은 Unity에서 주로 UI 구현에서 사용되는 경우가 많은 패턴입니다.
View와 Model 2개의 오브젝트를 UniRx를 이용해 연결하는 구현 패턴이 됩니다.</p><p>이쪽은 다른 기사에서 해설하고 있습니다.</p><ul><li><a href="https://qiita.com/toRisouP/items/5365936fc14c7e7eabf9" target="_blank" rel="noopener noreferrer">【Unity】Model-View-(Reactive)Presenter 패턴이란 무엇인가</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dmonobehaviour의-로직-작성">D.MonoBehaviour의 로직 작성<a class="hash-link" href="#dmonobehaviour의-로직-작성" title="제목으로 바로 가기">​</a></h3><p>UniRx에 존재하는 <code>UpdateAsObservable()</code>와 <code>Observable.EveryUpdate()</code> 애용하고 있는 분은 많을 것입니다.
여기에 대해서는 <strong>UniRx를 그대로 사용해도 되지만, 경우에 따라서는 async/await쪽이 간단하게 구현 가능한 경우도 있다고</strong> 기억해 두면 좋을 것입니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="간단한-로직을-unirx로-작성">간단한 로직을 UniRx로 작성<a class="hash-link" href="#간단한-로직을-unirx로-작성" title="제목으로 바로 가기">​</a></h4><p>예로서 다음 로직을 생각해 봅시다.</p><p>조건이 충족되면 처리를 실행한 후 몇 초 동안 쿨타임에 들어갑니다.
(공격을 내면 그 후 몇 초간은 다시 공격을 할 수 없다, 같다)</p><p>이것을 UniRx로 작성하면 다음과 같습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SimpleLogicUniRx</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 매 프레임 실행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 공격 버튼을 누르면</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetButtonDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Attack&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 처리를 1회 실행시킨 후, 1초간 쿨타임</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ThrottleFirst</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeSpan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 정기적으로 실행되는 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 공격</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Action!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이러한 「오퍼레이터를 조합하는 것만으로 구현할 수 있는 처리」에 대해서는 UniRx를 사용해 써도 문제 없습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unirx로-작성하기-어려운-경우">UniRx로 작성하기 어려운 경우<a class="hash-link" href="#unirx로-작성하기-어려운-경우" title="제목으로 바로 가기">​</a></h4><p>UniRx의 장점은 「풍부한 오퍼레이터를 사용할 수 있다」입니다만, 반대로 단점으로서 오퍼레이터의 범위 외의 처리는 굉장히 구현하기 어려워 집니다.</p><p>조금 전의 예의 「조건을 만족하면 뭔가 처리를 실행해 그 후 몇 초간 쿨타임에 들어간다」를 조금 확장해, 다음과 같은 처리를 생각해 봅시다.</p><ul><li>조건 A를 만족하면 처리 X를 호출하고 N 초 동안 쿨타임에 들어갑니다.</li><li>조건 B를 만족하면 처리 Y를 호출하고 M 초 동안 쿨타임에 들어갑니다.</li><li>처리 X와 Y는 각각 배타적이며, 서로의 쿨타임 중에는 서로의 처리가 차단된다.</li></ul><p>알기 쉽게 바꿔 말한다면, &quot;강 공격을 내면 쿨타임이 길다. 약공격을 내면 쿨타임이 짧다. 쿨타임 중에는 공격을 일절 할 수 없다&quot;같은 패턴입니다.</p><p>자, 이것을 UniRx만으로 작성하려고하면 어떻게 될까요?
오퍼레이터의 단순한 연결만으로는 구현할 수 없고, 상당히 얽힌 코드로 구현 코드가 나올 것 같습니다.
<strong>이러한 도중에 조건 분기가 들어가거나 조건에 따라 처리 내용이 크게 바뀌는 것을 UniRx는 매우 구현하기 힘듭니다.</strong></p><p>이러한 경우는 <strong>UniRx를 사용하지 않고 async/await(또는 코루틴)으로 써 버리는 쪽이 결과적으로 깨끗하게 구현할 수 있습니다.</strong></p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ComplexLogicCoroutine</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">StartCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">LogicLoop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LogicLoop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Destroy 될 때까지 무한 루프</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetButtonDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AttackA&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 입력 A가 실행되면 처리 X를 호출하여 1초 대기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">ActionX</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetButtonDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AttackB&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 입력 B가 실행되면 처리 Y를 호출하여 2초 대기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">ActionY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 입력이 없으면 1프레임 대기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ActionX</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;do X!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ActionY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;do Y!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Cysharp</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Tasks</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ComplexLogicUniTask</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// CancellationToken생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> token </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetCancellationTokenOnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 루프 시작</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">LogicLoopAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Forget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">UniTaskVoid</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LogicLoopAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CancellationToken</span><span class="token plain"> ct</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Destroy 될 때까지 무한 루프</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">ct</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsCancellationRequested</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetButtonDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AttackA&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 입력 A가 실행되면 처리 X를 호출하여 1초 대기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">ActionX</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> UniTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Delay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeSpan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token named-parameter punctuation" style="color:#393A34">cancellationToken</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ct</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetButtonDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AttackB&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 입력 B가 실행되면 처리 Y를 호출하여 2초 대기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">ActionY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> UniTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Delay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeSpan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token named-parameter punctuation" style="color:#393A34">cancellationToken</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ct</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 입력이 없으면 1프레임 대기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> UniTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Yield</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ActionX</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;do X!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ActionY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;do Y!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>역주</strong></p><ul><li>GetCancellationTokenOnDestroy은 MonoBehaviour의 라이프 사이클과 동일하게 CancellationToken이 생성된다.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="monobehaviour의-로직-작성-요약">MonoBehaviour의 로직 작성 요약<a class="hash-link" href="#monobehaviour의-로직-작성-요약" title="제목으로 바로 가기">​</a></h4><ul><li>Update() FixedUpdate()에 관련된 로직은 UniRx로 기술할 수 있다</li><li>다만 UniRx를 사용하는 경우는 기존의 오퍼레이터로 구현할 수 있는 범위 내에 두어 둔다</li><li><strong>조금이라도 UniRx로 쓸 수 없다고 느끼면 곧바로 포기하고 코루틴이나 async/await에 다시 쓰는 편이 최종적으로 읽기 쉬워진다</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="eupdate와-같은-범위-분리">E.Update()와 같은 범위 분리<a class="hash-link" href="#eupdate와-같은-범위-분리" title="제목으로 바로 가기">​</a></h3><p>UniRx의 사용법으로서 &quot;Update()등의 스코프를 분리한다&quot;가 있습니다.</p><ul><li>Update()와 FixedUpdate() 등의 처리를 문맥 별로 분리한다</li><li>Update()나 FixedUpdate() 실행 시작 타이밍 조정</li></ul><p>이 경우 UniRx를 사용할 수 있습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예-update를-문맥별로-분리">예: Update()를 문맥별로 분리<a class="hash-link" href="#예-update를-문맥별로-분리" title="제목으로 바로 가기">​</a></h4><p>예를 들면 다음과 같이, Update()에 복수의 처리를 하는 코드가 있었다고 합니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SamplePlayer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 여기에 많은 필드 변수가 정의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 공격 처리에 따른 처</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CheckAttack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Player의 위치에 따른 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CheckPosition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Player의 체력에 따른 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CheckHealth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 움직임 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ↓ 메서드가 줄지어 정의되어있다가 가정한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * 생략</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그런데, 이 Update()문을 보고 느끼는 것은 없을까요.
&quot;이 처리의 순서는 바꿔도 문제 없을까?&quot;, &quot;어떤 처리와 어떤 처리는 연관된 처리가 있는가?&quot;
라는 의문이 나올 수 있습니다.</p><p>이러한 처리 순서에 따라 제대로 동작하지 않는 메서드가 있을 수 있고, 처리 순서가 무방한 메서드가 있을 수 있습니다.
이러한 부분이 주석에 써 있을지도 모르고, 전혀 주석이 없는 코드일지도 모릅니다.
<code>Update()</code>라는 하나의 메소드에 나란히 쓰고 있는 이상은, 항상 이러한 것을 의식해 코드를 작성/읽어야 합니다.</p><p>이러한 문제는 UniRx를 사용하면 다소 개선할 수 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SamplePlayer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Player의 위치에 따른 처</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CheckPosition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Player의 체력에 따른 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CheckHealth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 공격 처리 확인 및 이동 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">CheckAttack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ↓ 메서드가 줄지어 있다고 가정한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * 생략</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이와 같이, 각 처리마다 따로 따로 <code>Observable</code> 저장하는 것으로 처리 끼리의 스코프를 명확하게 구분 할 수 있었습니다.
또 처리마다 <code>Observable</code>가 분리되어 있기 때문에, 일부 처리만 오퍼레이터를 추가하거나 조정도 쉬워집니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예-일부-처리만-실행-시작-타이밍을-어긋나기">예: 일부 처리만 실행 시작 타이밍을 어긋나기<a class="hash-link" href="#예-일부-처리만-실행-시작-타이밍을-어긋나기" title="제목으로 바로 가기">​</a></h4><p><code>Update()</code>를 각 처리마다 <code>Observable</code> 나누어 버리는 이점으로서, &quot;실행 개시 타이밍을 조정하기 쉽다&quot;라고 하는 것이 있습니다.</p><p>예를 들어 특정의 메소드가 불려 갈 때까지는 <code>Update()</code>의 처리의 일부를 스킵 해 두고 싶다고 하는 경우입니다.
(적 캐릭터가 화면에 비칠 때까지 이동 처리를 멈추고 싶은 등)</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SampleEnemy</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 화면에 비치면 초기화 처리를 호출합니다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnBecameVisibleAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Take</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 초기화 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 매 프레임 Move()를 호출하도록 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 이동 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 이동 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="update와-같은-범위를-분리합니다">Update()와 같은 범위를 분리합니다.<a class="hash-link" href="#update와-같은-범위를-분리합니다" title="제목으로 바로 가기">​</a></h4><p>이것은 UniRx가 처리를 모두 <code>Observable</code>라고 하는 객체에 감싸는 성질을 이용한, 약간의 테크닉입니다.
기억해두면 사용하기 편리하기 때문에 개인적으로는 가끔 사용하는 기술 이기도 합니다.</p><p>덧붙여 이 기술을 <code>async/await + UniTask</code>로 사용하는 것도 가능합니다.
다만 UniRx와 비교해 이쪽은 기술량이 증가해 코드가 다소 복잡해 집니다.
그 때문에 이 용도에 있어서는 UniRx의 사용이 더 편리한 것으로 보입니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> token </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetCancellationTokenOnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UniTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Void</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsCancellationRequested</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CheckPosition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> UniTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Yield</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UniTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Void</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsCancellationRequested</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CheckHealth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> UniTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Yield</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UniTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Void</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsCancellationRequested</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CheckAttack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> UniTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Yield</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="f-종속성을-정리하는-데-사용">F. 종속성을 정리하는 데 사용<a class="hash-link" href="#f-종속성을-정리하는-데-사용" title="제목으로 바로 가기">​</a></h3><p>UniRx는 종속성을 구성하는 데 사용할 수 있습니다.
(UniRx의 기능보다는 <code>Observer</code> 패턴의 성질 그 자체)</p><p>방금 설명한 「이벤트 처리」와 같은 이야기입니다.
(시점이 의존 관계로 정리가 되어 있을 뿐, 하고 있는 것은 이벤트 처리 그 자체)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예-player-및-playermanager">예: Player 및 PlayerManager<a class="hash-link" href="#예-player-및-playermanager" title="제목으로 바로 가기">​</a></h4><p>예를 들어, 다음과 같은 경우를 생각해 봅시다.</p><ul><li><code>PlayerManager</code>: <code>Player</code> 생성 및 수명주기 관리</li><li><code>Player</code>: 자신이 죽은 것을 <code>PlayerManager</code> 알려준다.</li></ul><p>자, 이것을 생각 없이 그대로 구현하면 다음과 같은 코드가 될 것입니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerManager</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Player의 Prefab</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Player</span><span class="token plain"> _playerPrefab</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 지금 존재하는 플레이어의 실체</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Player</span><span class="token plain"> _currentPlayer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CreatePlayer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnPlayerDead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 플레이어가 죽었을 때의 처리가 여기에</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _currentPlayer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 새로운 플레이어 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CreatePlayer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CreatePlayer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 플레이어 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _currentPlayer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Instantiate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_playerPrefab</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Player에게 Manager를 가르치기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _currentPlayer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Player</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">PlayerManager</span><span class="token plain"> _playerManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">PlayerManager</span><span class="token plain"> playerManager</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 초기화 시 Manager 유지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _playerManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> playerManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 이번에는 OnDestroy되면 &#x27;사망&#x27;이라는 취급으로</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _playerManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnPlayerDead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 코드에는 하나의 큰 문제가 있습니다.
그것은 <code>Player</code>와 <code>PlayerManager</code>가 상호 참조하는 것입니다.</p><p><img loading="lazy" alt="Player And PlayerManager" src="data:image/png;base64,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" width="424" height="79" class="img_ev3q"></p><p>상호 참조는 나중에 스파게티 코드로 발전 할 위험이 매우 높습니다.
따라서 가능한 한 상호 참조를 제거해야합니다.</p><p>그래서 이것을 UniRx (또는 UniTask)를 사용하여 정리해 보겠습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unirx를-사용하여-종속성-구성">UniRx를 사용하여 종속성 구성<a class="hash-link" href="#unirx를-사용하여-종속성-구성" title="제목으로 바로 가기">​</a></h4><p>UniRx Observable를 이용하면 참조 관계를 일방통행으로 정리할 수 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerManager</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Player의Prefab</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Player</span><span class="token plain"> _playerPrefab</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 지금 존재하는 플레이어의 실체</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Player</span><span class="token plain"> _currentPlayer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CreatePlayer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnPlayerDead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 플레이어가 죽었을 때의 처리가 여기에</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _currentPlayer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 새로운 플레이어 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">CreatePlayer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CreatePlayer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 플레이어 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _currentPlayer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Instantiate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_playerPrefab</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 생성된 플레이어를 모니터링하고</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 사망 이벤트가 오면 OnPlayerDead 실행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _currentPlayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PlayerDeadAsync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnPlayerDead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Player</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 플레이어가 사망한 통지를 발행하는 Observable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">IObservable</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name">Unit</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> PlayerDeadAsync </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _playerDeadSubject</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 1회만 통지를 발행하는 경우에는 AsyncSubject가 편리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name">AsyncSubject</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name">Unit</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> _playerDeadSubject </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">AsyncSubject</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name">Unit</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 플레이어가 사망한 통지 발행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _playerDeadSubject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Unit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Default</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _playerDeadSubject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnCompleted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _playerDeadSubject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Dispose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Player And PlayerManager2" src="data:image/png;base64,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" width="645" height="77" class="img_ev3q"></p><p>UniRx <code>Observable</code>를 사용하여 알림 흐름을 정리하고 참조 관계를 일방통행으로 만들 수 있습니다.
원래 <code>Observable</code>는 &quot;불특정 다수에게 자신의 상태를 감시하게 한다&quot;라는 용도를 위한 기능입니다.
그러므로 이러한 &quot;뭔가 상태가 변화했을 때 그것을 상대에게 전달한다&quot;는 경우에서는 <code>Observable</code> 강력하게 작용합니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="응용-프로그램--상태-알림">응용 프로그램 : 상태 알림<a class="hash-link" href="#응용-프로그램--상태-알림" title="제목으로 바로 가기">​</a></h4><p><code>Observable</code>의 &quot;불특정 다수에게 자신의 상태를 감시시킨다&quot;라고 하는 용도를 좀 더 생각해 보겠습니다.</p><p>예를 들어 액션 게임에서 &quot;뭔가 이벤트가 일어났을 때 그에 따라 복수의 처리를 동시에 실행시킨다&quot;라는 패턴은 자주 존재합니다.
이러한 처리를 구현하는 경우, 이벤트 발행측이 통지처를 모두 파악하는 코드는 매우 파악하기 어렵게 됩니다.</p><p>예로서 다음과 같은 구현이 있다고 합니다.</p><ul><li>플레이어가 데미지를 받으면 다음 처리가 실행됩니다.<ul><li>체력 감소</li><li>넉백 효과</li><li>데미지 애니메이션 재생</li><li>파티클 이펙트가 나온다</li><li>효과음 재생</li><li>디버깅 할 때만 UI에 숫자를 표시하고 싶습니다.</li></ul></li></ul><p>이것을 &quot;데미지를 받았을 때에 하나하나 통지처의 메소드를 호출해 간다&quot;라고 하는 구현으로 하면 이렇게 됩니다.</p><p><img loading="lazy" alt="Player Core" src="/assets/images/2022-10-29-7-3dfda2982769b2b54e62a2902ebfb067.png" width="1616" height="370" class="img_ev3q"></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>UML Source Code</summary><div><div class="collapsibleContent_i85q"><p></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@startuml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package PlayerComponents {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class PlayerCore {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class PlayerHealth {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        +OnPlayerDamaged(int value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class PlayerMove {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        +OnPlayerDamaged(int value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class PlayerAnimation {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        +OnPlayerDamaged(int value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class PlayerEffectEmmiter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        +OnPlayerDamaged(int value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class PlayerSfx {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        +OnPlayerDamaged(int value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package Debug {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class DebugGUI {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        +OnPlayerDamaged(int value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PlayerCore--&gt;PlayerHealth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PlayerCore--&gt;PlayerMove</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PlayerCore--&gt;PlayerAnimation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PlayerCore--&gt;PlayerEffectEmmiter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PlayerCore--&gt;PlayerSfx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PlayerCore-&gt;DebugGUI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note top of PlayerCore : Player의 피해를 관리하는 클래스</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note bottom of PlayerHealth : 체력 컴포넌트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note bottom of PlayerMove : 이동 컴포넌트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note bottom of PlayerAnimation : 애니메이션 컴포넌트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note bottom of PlayerEffectEmmiter : 파티클 컴포넌트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note bottom of PlayerSfx : 사운드 컴포넌트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note bottom of DebugGUI : Debug 정보 표시</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@enduml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></details><p>이 구현의 약점은 &quot;PlayerCore 모두를 관리하지 않으면 안된다&quot;라고 하는 점에 있습니다.
통지처를 모든 PlayerCore 것이 알고 있는 상태로 해, 게다가 상황에 따라서 통지한다/안한다 판단을 PlayerCore하지 않으면 안됩니다.
이에 대한 PlayerCore 책임이 커지고, 점점 복잡한 코드로 성장해 버립니다.</p><hr><p>이러한 문제는 <code>Observable</code>를 사용하여 해결할 수 있습니다.</p><p><code>PlayerCore</code>에 <code>Observable</code> 정의하고 각 컴포넌트가 필요에 따라 <code>Subscribe</code> 하는 형식으로 해 줍니다.
이렇게 하면 <code>PlayerCore</code> 책임이 크게 줄어들고 &quot;이벤트 알림을 처리하는 방법&quot;의 책임이 각 구성 요소에 분산됩니다.</p><p><img loading="lazy" alt="Player Observable" src="/assets/images/2022-10-29-8-9c7face63f15b517a502eb54504d83ef.png" width="1053" height="354" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unitask를-사용하여-종속성-구성">UniTask를 사용하여 종속성 구성<a class="hash-link" href="#unitask를-사용하여-종속성-구성" title="제목으로 바로 가기">​</a></h4><p><code>UniTask</code> 및 <code>async/await</code>를 사용하여 종속성을 구성할 수 있습니다.
단, UniRx와 달리 <code>UniTask</code>는 &quot;이벤트 통지 횟수가 1회에 한정한다&quot; 경우에만 이용 가능합니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Cysharp</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Tasks</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Player</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 플레이어가 사망하면 완료되는 UniTask</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">UniTask</span><span class="token plain"> PlayerDeadAsync </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _playerDeadUtc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Task</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name">UniTaskCompletionSource</span><span class="token plain"> _playerDeadUtc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">UniTaskCompletionSource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 플레이어가 사망하면 UniTask 완료</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _playerDeadUtc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">TrySetResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Cysharp</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Tasks</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerManager</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Player의Prefab</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Player</span><span class="token plain"> _playerPrefab</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 지금 존재하는 플레이어의 실체</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Player</span><span class="token plain"> _currentPlayer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">SetupPlayerAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetCancellationTokenOnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Forget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnPlayerDead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 플레이어가 죽었을 때의 처리가 여기에</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _currentPlayer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 새로운 플레이어 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">SetupPlayerAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetCancellationTokenOnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Forget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">UniTaskVoid</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SetupPlayerAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CancellationToken</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 플레이어 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _currentPlayer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Instantiate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_playerPrefab</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 생성된 플레이어를 모니터링하고</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 사망하면 OnPlayerDead 실행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _currentPlayer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PlayerDeadAsync</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ThrowIfCancellationRequested</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">OnPlayerDead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="종속성을-정리하는-데-사용되는-요약">종속성을 정리하는 데 사용되는 요약<a class="hash-link" href="#종속성을-정리하는-데-사용되는-요약" title="제목으로 바로 가기">​</a></h4><p>UniRx를 사용하면 종속성을 정리하고 이벤트 흐름을 개선할 수 있습니다.
또 통지 회수가 1회에 한한 경우에 있어서는 &quot;UniRx&quot;나 &quot;UniTask+async/await&quot;의 어느 쪽에서도 기술하는 것도 가능합니다.</p><p>덧붙여 개인적으로는, 통지 회수가 1회만이라면 UniTask+async/await, 몇번이나 통지한다면 Observable로 구분해서 사용 하고 있습니다.
Observable라고 하는 형태만을 보았을 때에, &quot;이것은 Observable 몇번 이벤트를 발행하는 것일까&quot;를 모릅니다.
그렇다면 &quot;UniTask 그렇다면 절대 많아도 1회 밖에 발행되지 않는다&quot;, &quot;Observable 그렇다면 복수회 발행될 것이다&quot; 라고 나누는 것이 편하기 때문입니다.
(상대측의 구현 내용을 상상해 쓰는, 같은 불필요한 일 하지 않아도 된다)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="g-스크립트-실행-순서를-조정하는-데-사용">G. 스크립트 실행 순서를 조정하는 데 사용<a class="hash-link" href="#g-스크립트-실행-순서를-조정하는-데-사용" title="제목으로 바로 가기">​</a></h3><p>Unity에는 <a href="https://docs.unity3d.com/kr/2022.1/Manual/class-MonoManager.html" target="_blank" rel="noopener noreferrer">Script Execution Order</a> 라는 스크립트 실행 순서를 조정하는 메커니즘이 있습니다.
<code>Script Execution Order</code>은 마지막 보루로 남겨 두어야 할 정도로 <strong>안이하게 만져서는 안되는 기능입니다.</strong></p><p>그렇다면 실행 순서를 관리하고 싶을 때 어떻게해야할까요? UniRx를 사용하여 이벤트에서 작동하도록 해 버리는 것입니다.
즉, &quot;전의 컴퍼넌트가 끝나면 다음의 컴퍼넌트가 연쇄해 실행된다&quot;라고 하는 구조로 합니다.
이렇게 하면 컴포넌트 간의 호출 순서 <code>Update()</code>나 <code>FixedUpdate()</code> 생각하지 않아도 됩니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예--unirx로-구성-요소-간의-타이밍-조정">예 : UniRx로 구성 요소 간의 타이밍 조정<a class="hash-link" href="#예--unirx로-구성-요소-간의-타이밍-조정" title="제목으로 바로 가기">​</a></h4><p>예를 들어, 다음과 같은 구현을 생각해 보겠습니다.</p><ul><li><code>PlayerInput</code>에서 버튼 입력을 수락</li><li>버튼 입력을 확인하고 <code>PlayerMoveController</code> 점프 처리를 수행합니다.</li><li>점프 상태가 되면 <code>PlayerAnimation</code> 점프 애니메이션 재생</li></ul><p>&quot;각 컴퍼넌트가 Update()를 실행해, 조건을 만족하면 각 처리를 실행한다&quot; 라고 하는 어리석은 구현도 가능합니다.
하지만 이 방법의 경우, 실행 순서가 어긋나서 처리가 1프레임 늦어지거나, 상태 체크를 흘리는 등의 문제가 일어날 수 있습니다.</p><p>그 때문에 그러한 것을 <code>Update()</code> 사용하는 코드를 멈추고 <strong>UniRx를 이용해 처리가 연쇄하는 구현</strong> 으로 해 보겠습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 입력 이벤트 관리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 점프 버튼의 입력 상태를 나타내는 ReactiveProperty</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">IReadOnlyReactiveProperty</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> JumpButton </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _jumpButton</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name">ReactiveProperty</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">bool</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> _jumpButton </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ReactiveProperty</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name keyword" style="color:#00009f">bool</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        * 그 밖에도 여러 가지 이벤트가 줄지어 있지만 생략</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Destroy 시에 Dispose 되도록(듯이) 한다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _jumpButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 버튼 상태를 반영하여 알림</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _jumpButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Jump&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerMoveController</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 접지 되었습니까?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">IReadOnlyReactiveProperty</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> IsGrounded </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _isGrounded</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name">ReactiveProperty</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">bool</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> _isGrounded </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ReactiveProperty</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name keyword" style="color:#00009f">bool</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 점프 이벤트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">IObservable</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name">Unit</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> OnJump </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _jumpSubject</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name">Subject</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name">Unit</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> _jumpSubject </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Subject</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name">Unit</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">LayerMask</span><span class="token plain"> _groundLayerMask</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">PlayerInput</span><span class="token plain"> _playerInput</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Rigidbody</span><span class="token plain"> _rigidbody</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _isGrounded</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _jumpSubject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _rigidbody </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">Rigidbody</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 접지 상태 확인</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FixedUpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 레이를 발밑으로 날리다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    _isGrounded</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Physics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SphereCast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token named-parameter punctuation" style="color:#393A34">origin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> transform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">position </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> Vector3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">up </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.04f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token named-parameter punctuation" style="color:#393A34">radius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.02f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token named-parameter punctuation" style="color:#393A34">direction</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Vector3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">down</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token named-parameter punctuation" style="color:#393A34">hitInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">out</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token named-parameter punctuation" style="color:#393A34">maxDistance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.05f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _groundLayerMask</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 입력 이벤트 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _playerInput</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">JumpButton</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 버튼을 누른 순간에 접지하면 실행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> _isGrounded</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// Input 이벤트는 Update() 타이밍이므로,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 다음 FixedUpdate 타이밍으로 타이밍 조정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ObserveOnMainThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MainThreadDispatchType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">FixedUpdate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 점프실행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">Jump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Jump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _rigidbody</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddForce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Vector3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">up </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10.0f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ForceMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VelocityChange</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 이벤트 발행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _jumpSubject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Unit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Default</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerAnimation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Animator</span><span class="token plain"> _animator</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">PlayerMoveController</span><span class="token plain"> _moveController</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 점프 애니메이션 재생</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token plain"> IsJumping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _animator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetBool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Jumping&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 이벤트가 오면 점프 애니메이션 시작</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _moveController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">OnJump</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> IsJumping </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 접지하면 점프 애니메이션 해제</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _moveController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsGrounded</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> IsJumping </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>UniRx를 사용하면 3개의 컴포넌트가 충돌 없이 순서대로 동작시킬 수 있게 되었습니다.
이와 같이 각 컴퍼넌트로부터 Update()와 FixedUpdate()를 최대한 배제하는 것으로, 동작 순서를 완전하게 제어할 수 있게 됩니다.
(정확히 반응)</p><p><strong>역주</strong></p><ul><li>ObserveOnMainThread(MainThreadDispatchType.FixedUpdate)을 사용하여 FixedUpdate에서 점프 처리를 실행하도록 처리하였다.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예-초기화-순서-조정asyncawait">예: 초기화 순서 조정(async/await)<a class="hash-link" href="#예-초기화-순서-조정asyncawait" title="제목으로 바로 가기">​</a></h4><p>실행 순서의 조정 Update()와 FixedUpdate() 어떠한 것에 한정되지 않고, 초기화(Start()나 Awake())의 순서도 중요하게 되는 일도 있습니다.
이러한 상황에서도 UniRx를 사용할 수 있습니다.
그렇지만, &quot;초기화&quot;라고 하는 기본적으로 1회 밖에 실행되지 않는 처리에 대해서는 &quot;async/await+UniTask&quot;로 쓰는 편이 깨끗해집니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Linq</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Cysharp</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Tasks</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">EnemyManager</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Enemy</span><span class="token plain"> _enemyPrefab</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 적을 복수체 생성하여 초기화</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">UniTask</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">InitializeAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CancellationToken</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 10개 생성하고 모든 초기화가 끝날 때까지 기다린다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// (UniTask.WhenAll을 암시 적으로 호출 중)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Enumerable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CreateEnemyAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 적을 생성한다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">UniTask</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CreateEnemyAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CancellationToken</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> enemy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Instantiate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_enemyPrefab</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 초기화가 끝날 때까지 기다리다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> enemy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">InitializedAsync</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 초기화 중에 취소되면 중지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ThrowIfCancellationRequested</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Cysharp</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Tasks</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">AddressableAssets</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">ResourceManagement</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">AsyncOperations</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Samples3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 적</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sealed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Enemy</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 초기화가 완료되었는지 여부</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">UniTask</span><span class="token plain"> InitializedAsync </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _initialTaskCompletionSource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Task</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name">UniTaskCompletionSource</span><span class="token plain"> _initialTaskCompletionSource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">UniTaskCompletionSource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">AsyncOperationHandle</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name">GameObject</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> _operationHandle</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 이 적 객체의 자식 요소 (비동기로 초기화됨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">GameObject</span><span class="token plain"> _child</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// Start에서 초기화 처리가 실행됨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> ct </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetCancellationTokenOnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">InitializeAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ct</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Forget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// 초기화 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">UniTaskVoid</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">InitializeAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CancellationToken</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _operationHandle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Addressables</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">InstantiateAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Child&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _operationHandle</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _child </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _operationHandle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Addressables</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Release</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_operationHandle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Destroy가 먼저 실행되 취소합니다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _initialTaskCompletionSource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">TrySetCanceled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="h-컬렉션의-변동을-통지">H. 컬렉션의 변동을 통지<a class="hash-link" href="#h-컬렉션의-변동을-통지" title="제목으로 바로 가기">​</a></h3><p>컬렉션 Array과 Dictionary같은 여러 데이터를 처리하는 객체를 가리킵니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unirx로-컬렉션-변동-모니터링">UniRx로 컬렉션 변동 모니터링<a class="hash-link" href="#unirx로-컬렉션-변동-모니터링" title="제목으로 바로 가기">​</a></h4><p>ReactiveCollectionUniRx 에는 약간 ReactiveDictionary의 객체가 있습니다.</p><ul><li>ReactiveCollection</li><li>ReactiveDictionary</li></ul><p>이러한 객체를 이용하는 것으로, &quot;배열이나 맵의 내용이 변동했다&quot;라는 것을 즉시 감지해 이벤트 처리를 실행하는 것이 가능해집니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="보충observablecollections">보충:ObservableCollections<a class="hash-link" href="#보충observablecollections" title="제목으로 바로 가기">​</a></h4><p>UniRx ReactiveCollection에 가까운 기능을 제공하는 라이브러리 ObservableCollections가 있습니다.</p><ul><li><a href="https://github.com/Cysharp/ObservableCollections" target="_blank" rel="noopener noreferrer">ObservableCollections</a></li></ul><p>이곳은 UniRx에 의존하지 않고, 다양한 컬렉션의 감시를 할 수 있게 되는 라이브러리가 되고 있습니다.
(UniRx에는 존재하지 않는, ObservableHashSet, ObservableRingBuffer 있습니다)</p><p>&quot;UniRx를 도입하고 싶지 않다&quot; &quot;UniRx가 제공하는 ReactiveCollection 것보다 더 심도 있는 처리를 하고 싶다&quot;라고 하는 경우는 이쪽의 도입도 검토하면 좋을 것입니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="i-이하-생각하면-가필합니다">I. (이하, 생각하면 가필합니다)<a class="hash-link" href="#i-이하-생각하면-가필합니다" title="제목으로 바로 가기">​</a></h4><h2 class="anchor anchorWithStickyNavbar_LWe7" id="요약">요약<a class="hash-link" href="#요약" title="제목으로 바로 가기">​</a></h2><ul><li>&quot;UniRx 전용&quot;해서 사용해야 되는 시대는 사라졌습니다.<ul><li>현대는 UniRx 이상에 편리한 라이브러리와 언어 기능이 갖추어져 있습니다.</li><li>특히 async/await+UniTask는 매우 강력하며 UniRx 대신 사용할 수 있는 패턴이 많습니다.</li></ul></li><li>그러나 한편으로 UniRx의 용도가 완전히 없어진 것은 아니다.<ul><li>단순한 <code>Observer</code> 패턴의 구현 라이브러리로 사용해도 편리</li><li><code>ReactiveProperty</code>는 특히 편리성이 높고 현역에서 사용할 수 있습니다.</li></ul></li><li><strong>UniRx를 너무 과신하지 말자</strong><ul><li>사용 장소의 판별은 중요</li><li>async/await+UniTask쪽이 깨끗하게 쓸 수 있는 패턴도 있다</li><li>(async/await 모른다면 코루틴을 사용할 수 있습니다)</li></ul></li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unity-3-d">unity3d</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unirx">unirx</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/karais89/karais89.github.io/tree/main/my-website/blog/2022-10-29-2022-unirx/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>페이지 편집</a></div></footer></article><div></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="블로그 게시물 탐색"><a class="pagination-nav__link pagination-nav__link--next" href="/2022/10/12/10-step-learning-method"><div class="pagination-nav__sublabel">다음 게시물</div><div class="pagination-nav__label">10단계 학습법</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#환경" class="table-of-contents__link toc-highlight">환경</a></li><li><a href="#소개" class="table-of-contents__link toc-highlight">소개</a></li><li><a href="#unirx의-위치" class="table-of-contents__link toc-highlight">UniRx의 위치</a><ul><li><a href="#현대-unirx-상황" class="table-of-contents__link toc-highlight">현대 UniRx 상황</a></li><li><a href="#현대-unirx-애플리케이션" class="table-of-contents__link toc-highlight">현대 UniRx 애플리케이션</a></li><li><a href="#unirx와-asyncawait와-unitask" class="table-of-contents__link toc-highlight">UniRx와 async/await와 UniTask</a></li><li><a href="#unirx가-편리한-장소-asyncawait가-편리한-장소" class="table-of-contents__link toc-highlight">UniRx가 편리한 장소, async/await가 편리한 장소</a></li></ul></li><li><a href="#2-실제-unirx-애플리케이션" class="table-of-contents__link toc-highlight">2. 실제 UniRx 애플리케이션</a><ul><li><a href="#a-이벤트-통지에-사용" class="table-of-contents__link toc-highlight">A. 이벤트 통지에 사용</a></li><li><a href="#b-비동기-처리에-사용" class="table-of-contents__link toc-highlight">B. 비동기 처리에 사용</a></li><li><a href="#cmodel-view-reactivepresenter-패턴에-사용" class="table-of-contents__link toc-highlight">C.Model-View-(Reactive)Presenter 패턴에 사용</a></li><li><a href="#dmonobehaviour의-로직-작성" class="table-of-contents__link toc-highlight">D.MonoBehaviour의 로직 작성</a></li><li><a href="#eupdate와-같은-범위-분리" class="table-of-contents__link toc-highlight">E.Update()와 같은 범위 분리</a></li><li><a href="#f-종속성을-정리하는-데-사용" class="table-of-contents__link toc-highlight">F. 종속성을 정리하는 데 사용</a></li><li><a href="#g-스크립트-실행-순서를-조정하는-데-사용" class="table-of-contents__link toc-highlight">G. 스크립트 실행 순서를 조정하는 데 사용</a></li><li><a href="#h-컬렉션의-변동을-통지" class="table-of-contents__link toc-highlight">H. 컬렉션의 변동을 통지</a></li></ul></li><li><a href="#요약" class="table-of-contents__link toc-highlight">요약</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/karais89" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Blog</a></li><li class="footer__item"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Lonpeach, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.297bbd53.js"></script>
<script src="/assets/js/main.25d41551.js"></script>
</body>
</html>