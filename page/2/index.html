<!doctype html>
<html lang="ko" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Blog | Lonpeach Tech</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tech.lonpeach.com/page/2"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" property="og:title" content="Blog | Lonpeach Tech"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tech.lonpeach.com/page/2"><link data-rh="true" rel="alternate" href="https://tech.lonpeach.com/page/2" hreflang="ko"><link data-rh="true" rel="alternate" href="https://tech.lonpeach.com/page/2" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Lonpeach Tech RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Lonpeach Tech Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-59335977-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="icon" href="/img/docusaurus.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><link rel="stylesheet" href="/assets/css/styles.252e95bb.css">
<link rel="preload" href="/assets/js/runtime~main.314da9fa.js" as="script">
<link rel="preload" href="/assets/js/main.915089c3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="본문으로 건너뛰기"><a href="#" class="skipToContent_fXgn">본문으로 건너뛰기</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Lonpeach Tech</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Blog</a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/karais89/karais89.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="최근 블로그 문서 둘러보기"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/03/16/jekyll-font">코딩용 고정폭 폰트 Cascadia Code 사용기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/welcome">Welcome</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/06/21/FastAPI-Getting-Started-3">FastAPI 입문 3 - 튜토리얼 - 도입</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/06/20/FastAPI-Getting-Started-2">FastAPI 입문 2 - 연습 예제</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/06/18/FastAPI-Getting-Started-1">FastAPI 입문 1 - 특징 및 환경설정</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2021/01/14/Clean-Agile">[리뷰] 클린 애자일</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-01-14T00:00:00.000Z" itemprop="datePublished">2021년 1월 14일</time> · <!-- -->약 6분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="book image" src="/assets/images/29-16b0402f895d5c685af42295337f4fef.jpg" width="992" height="346" class="img_ev3q"></p><h1>기간</h1><p>7일</p><h1>목적</h1><p>클린씨리즈.. (클린코드, 클린코더, 클린 소프트웨어)를 만든 로버트 C 마틴이 작성한 책이라 별 고민없이 주문. 심지어 요즘에 거의 모든 IT 회사에서 적용하는 애자일에 관한 이야기를 다룬 책이다. 애자일에 직접적인 관계를 가진 (애자일 선언문을 만든) 당사자 이기 때문에 더 고민 없이 구매했던 것 같다.</p><h1>리뷰</h1><p>애자일을 다룬 책이므로 우선 애자일 선언문 부터 살펴 보자.</p><p>책의 서문에 나와 있는데로 이 책은 애자일의 근본적인 내용을 다룬다.</p><blockquote><p>애자일은 무엇이고, 무엇이었고, 앞으로도 영원히 무엇일지를 다룬다.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="애자일-선언문">애자일 선언문<a class="hash-link" href="#애자일-선언문" title="제목으로 바로 가기">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">우리는 소프트웨어를 개발하고, 또 다른 사람의 개발을</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">도와주면서 소프트웨어 개발의 더 나은 방법들을 찾아가고</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">있다. 이 작업을 통해 우리는 다음을 가치 있게 여기게 되었다:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 공정과 도구보다 개인과 상호작용을</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 포괄적인 문서보다 작동하는 소프트웨어를</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 계약 협상보다 고객과의 협력을</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 계획을 따르기보다 변화에 대응하기를</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">가치 있게 여긴다. 이 말은, 왼쪽에 있는 것들도 가치가 있지만,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">우리는 오른쪽에 있는 것들에 더 높은 가치를 둔다는 것이다.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>마감 기한은 바뀌지 않지만, 요구 사항은 계속해서 바뀐다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="반복주기에-대한-설명">반복주기에 대한 설명<a class="hash-link" href="#반복주기에-대한-설명" title="제목으로 바로 가기">​</a></h3><ul><li>스크럼이랑 조금 다른 개념인것으로 보인다.</li><li>프로젝트 일정을 일정한 크기로 더 작게 나눈다.</li><li>이것을 반복주기 혹은 스프린트라고 한다. 반복주기의 기간은 1~2주가 적당하다.</li><li>첫번째 반복 주기는 반복주기 0이라고 부르고 스토리(짧은 기능 목록)를 만든다.</li><li>반복주기 1은 스토리를 몇개나 완료할 수 있을지 추산한다.</li><li>반복주기 1이 끝나면 반복 주기 하나 동안 스토리를 얼마나 완료할 수 있는지 측정 가능한 수치를 처음으로 얻는다.</li><li>아래는 스크럼 프로세스
<img loading="lazy" alt="스크럼 프로세스" src="/assets/images/2021-01-14-01-5ecf3a7e33ebbe169b3e0d87730c4eec.jpg" width="690" height="342" class="img_ev3q"></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="애자일의-핵심">애자일의 핵심<a class="hash-link" href="#애자일의-핵심" title="제목으로 바로 가기">​</a></h3><ul><li>애자일은 프로젝트를 더 작은 반복 주기로 나누는 프로세스다</li><li>각 반복 주기의 결과물을 측정하여 지속적으로 일정을 평가하는 데 사용한다.</li><li>기능은 비즈니스 가치 순서대로 구현하므로 가장 중요한 것이 먼저 구현된다.</li><li>품질은 가능한 높게 유지한다. 일정은 주로 범위(구현 해야되는 기능)를 조절하여 관리한다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="xp">XP<a class="hash-link" href="#xp" title="제목으로 바로 가기">​</a></h3><ul><li>모든 애자일 프로세스 중에서 XP가 가장 잘 정의되어 있고, 가장 완전하며, 가장 덜 혼란스럽다.</li><li>애자일이 무엇인지 이해하고 싶다면 XP를 공부하는 것이 최선의 방법</li><li>XP 삶의 순환 도표
<img loading="lazy" alt="xp 삶의 순환 도표" src="/assets/images/2021-01-14-02-d2b5015fb5233567b518dab7f2fdf8fe.png" width="506" height="332" class="img_ev3q"></li></ul><p>책을 읽으면서, 평소 회사에서 이미 진행하고 있는 애자일에 대해 다시 생각해보았다. 애자일 자체의 개념은 간단하지만, 실천하기는 힘들다. 이러한 부분에 대해 실천하기 위해서는 많은 노력이 필요할 것으로 보인다. </p><p>반복주기 관련해서는 현재 개인적으로 진행하고 있는 개인 OKR과도 흡사한 부분이 보인다. 3개월 단위의 목표를 세우고 매 주마다 목표에 대한 할일을 세우고 매 주마다 그것에 대한 피드백을 받는다.</p><p>애자일은 1주일의 스프린트를 정한다고 생각하면 매 주 스토리 보드를 만들고(할일). 매주 해당 스토리 보드에 포인트를 계산하고(피드백). 모든 스토리 보드가 완료될 때까지 프로젝트를 진행한다(목표).</p><p>애자일을 개인적인 프로젝트에도 적용 가능한지와 활용 가능한지에 대한 부분은 추가로 확인을 해봐야 될 것 같다. (지라, 트렐로 등 도구)</p><h1>평점 및 한줄평</h1><p>애자일에 대한 고민. 혹은 궁금한 분은 한번 쯤 읽어 볼 책. 믿고 보는 로버트 C 마틴</p><p>5/5</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/book">book</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/agile">agile</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2021/01/05/OKR-Power">[리뷰] OKR 파워</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-01-05T00:00:00.000Z" itemprop="datePublished">2021년 1월 5일</time> · <!-- -->약 4분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="book image" src="/assets/images/28-1b203c8948407b0f246bade04193a1a1.jpg" width="996" height="327" class="img_ev3q"></p><h1>기간</h1><p>7일</p><h1>목적</h1><p>OKR에 대해 전사에서 도입 계획이 있어, 좀 더 실용적인 OKR 도입 방법이 있나 찾아봄. 개인적인 OKR을 도입 고려 용도</p><h1>리뷰</h1><p>국내에서 처음 나온 OKR 관련 서적</p><p>애자일, 스프린트, OKR을 하나의 개념으로 보고 작성한 책</p><p>OKR은 보통 분기 단위(3개월)로 세우게 되는데 이 3개월을 12주의 스프린트로 생각하고, 기존의 MBO 방식(1년)과 달리 3개월의 목표 관리를 하여 기민하게(애자일) 빠르게 대처 가능한 목표 관리 방법 이라고 책은 소개 한다.</p><p>OKR은 사실 개념 자체는 어렵지 않지만, 실제 적용하기가 어려운 것 같다. 실제 인텔에서도 OKR을 도입하고 1년 반이 지나서 제대로 적응했다고 한다.</p><p>이 책을 만든 저자는 실제 여러 회사에 OKR 도입을 적용하면서 자신만의 OKR 적용 방법을 정리 하였다.</p><p>목차는 다음과 같다</p><ul><li>파트1. 왜 지금은 OKR인가</li><li>파트2. OKR, 제대로 알고 시작합시다</li><li>파트3. OKR 제목 작성이 실행의 반이다.</li><li>파트4. 12번의 파도, 12주의 도전</li><li>파트5. OKR, 문화로 정착시켜라</li><li>OKR 파워 부록</li></ul><p>국내에서 처음 OKR 관련에 대해 나온 책이라 기대를 많이 한것에 비해 실속이 없는 느낌이다.</p><p>이미 나온 OKR 책에 대한 내용을 정리한 것으로 밖에 볼 수 없다.</p><p>아래 2개의 책을 보는걸 추천한다.</p><ul><li>OKR 전설적인 벤처투자자가 구글에 전해준 성공 방식</li><li>구글이 목표를 달성하는 방식 OKR</li></ul><h1>평점 및 한줄평</h1><p>OKR 다른 서적을 보는 것을 추천</p><p>2/5</p><h1>책 내용 중 참고 사항</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="okr-체크-리스트">OKR 체크 리스트<a class="hash-link" href="#okr-체크-리스트" title="제목으로 바로 가기">​</a></h2><ol><li>어느 레벨까지 OKR 제목을 세팅할지 결정하였는가?<ol><li>전사 - 팀 - 개인 (처음 도입시 팀 단위까지 추천)</li></ol></li><li>OKR 파일럿 진행 여부를 결정하였는가?<ol><li>부서별 OKR 세팅 추천</li></ol></li><li>OKR 제목 개수를 결정하였는가?<ol><li>3개 이내 추천</li></ol></li><li>OKR 운영 주기를 결정하였는가?<ol><li>통상 3개월. 더 짧아도 문제 없음</li></ol></li><li>KR 측정 방법을 결정하였는가?<ol><li>구글의 방법 0.0~1.0</li></ol></li><li>OKR 미팅 운영 방법을 세팅하였는가?<ol><li>주1회 실행 계획 점검. 월1회 진척사항점검.</li></ol></li><li>OKR 공유 시스템을 세팅하였는가?<ol><li>구글시트, 노션, 트렐로등 투명하게 모든 OKR 공개</li></ol></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-3-3의-원리">3-3-3의 원리<a class="hash-link" href="#3-3-3의-원리" title="제목으로 바로 가기">​</a></h2><p>구글은 3-3-3의 원리를 강조한다.</p><p>OKR은 최대 3개월 단위의 달성 가능한 목표. 3개의 O, 갹 O 별로 3개의 KR을 세운다.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/book">book</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2020/11/19/Growing-together">[리뷰] 함께 자라기</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-11-19T00:00:00.000Z" itemprop="datePublished">2020년 11월 19일</time> · <!-- -->약 2분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="book image" src="/assets/images/27-6ae5d7fbdeae0c06ce54315708bb1c29.jpg" width="994" height="344" class="img_ev3q"></p><h1>기간</h1><p>2주일</p><h1>목적</h1><p>문득 도서 검색을 하다 눈에 띄는 책이라 구입</p><h1>리뷰</h1><p>책에 대한 내용은 전체적으로 너무 좋은 평가라 조금 조심스럽다.</p><p>책은 총 3부로 구성되어 있다.</p><p>1부. 자라기</p><p>2부. 함께</p><p>3부. 애자일</p><p>1부와 2부의 내용은 통계적인 내용 및 연구 결과에 대해 다룬것으로 보인다.</p><p>3부는 매우 짧은 내용이고, 애자일에 대해 다룬다. 내 생각엔 3부에 대한 설명을 위한 1부, 2부 였던것으로 보인다.</p><p>결국 자기 계발을 계속해서 진행하고, 코더가 아닌 소프트웨어 아키텍쳐를 목표로 하고, 의도적 수련을 하자. 그리고 함께 일을 할때 중요한 부분에 대한 설명.이고 결국 이것이 애자일로 가는 길이다.</p><p>애자일은 함께 성장하고, 짧은 주기 동안 지속적인 피드백을 받는 기법이다. </p><blockquote><p>고객에게 날마다 가치를 전하자</p></blockquote><p>이 책의 저자가 말한 애자일에 대한 설명이다.</p><h1>평점 및 한줄평</h1><p>3부의 경우 흥미 있게 읽을만한 주제 였지만, 나머지 1~2부는 글쎄..</p><p>3/5</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/book">book</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2020/11/09/Thinking-about-MVRP">MV(R)P 설계에 대한 생각</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-11-09T00:00:00.000Z" itemprop="datePublished">2020년 11월 9일</time> · <!-- -->약 12분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="개요">개요<a class="hash-link" href="#개요" title="제목으로 바로 가기">​</a></h2><blockquote><p>유니티로 게임을 개발시 좀 더 구조화된 방법으로 개발하고 싶다.</p></blockquote><p>유지보수가 쉽고, 유연하며, 남들이 쉽게 알아볼 수 있는 코드로 개발하는 것이 목표이다.</p><p>학부 과정에서는 MVC 패턴에 대해 배우고, 웹 프레임워크들이 MVC 패턴 구조로 많이 개발되어 있는 것도 알고 있다. MVC 패턴의 장점은 사용자 인터페이스로부터 비즈니스 로직을 분리하여 애플리케이션의 시각적 요소나 그 이면에서 실행되는 비즈니스 로직을 서로 영향 없이 쉽게 고칠 수 있는 애플리케이션을 만들 수 있다는 것이다.</p><p>MVC에서 파생되는 다양한 패턴들 MVP, MVVM은 결국 위와 같이 역할의 분리에 초점을 맞추고 있다고 보면 되고, 세부적인 내용이 조금 다르다고 이해해도 크게 무리가 없다고 생각한다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="유니티에서의-패턴">유니티에서의 패턴<a class="hash-link" href="#유니티에서의-패턴" title="제목으로 바로 가기">​</a></h2><p>MVC, MVP, MVVM 중 유니티에 알맞는 패턴?</p><p>안드로이드에서는 보통 MVP나 MVVM 패턴을 사용함. </p><p>MVVM은 개인적으로는 너무 복잡해지는 경향이 있는 것 같아 아예 제외시킴. (뷰와 모델의 바인딩 처리도 유니티에서는 따로 처리하기 힘든 부분이 있고, 복잡해짐)</p><p>결국 MVC나 MVP 중에 선택을 해야 되는 문제이고, 유니티에서는 MVP가 더 적합하다는 판단이 들어 MVP를 선택하기로 함. (유니티에서는 일반적으로 UI를 표현하는 컴포넌트들이 화면을 직접 그리는 역할과 액션 처리를 함께 담당한다. 이러한 특징으로 MVC패턴을 사용하여 화면을 그리는 View와 액션을 처리하는 Controller을 완전히 분리하기 어렵게 된다)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mvp-패턴이란">MVP 패턴이란?<a class="hash-link" href="#mvp-패턴이란" title="제목으로 바로 가기">​</a></h2><p>MVP 패턴에 대한 자료를 찾아보면, 정확한 정의는 없고, 대략적인 공통점들은 있다.</p><p>기본적인 기조는 같지만, 세부 적인 구현 내용은 개발자의 역량에 달린 것으로 보인다.</p><p>대략적으로 MVP 패턴은 아래 특징을 가지고 있다.</p><blockquote><p>Model - View - Presneter</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="model">Model<a class="hash-link" href="#model" title="제목으로 바로 가기">​</a></h3><ul><li>Data와 관련된 모든 처리를 담당한다. 비즈니스 로직 처리.<ul><li>비즈니스 로직은 컴퓨터 프로그램에서 실세계의 규칙에 따라 데이터를 생성·표시·저장·변경하는 부분을 일컫는다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="view">View<a class="hash-link" href="#view" title="제목으로 바로 가기">​</a></h3><ul><li>사용자에게 보여지는 UI 부분 (유니티에서는 모든 렌더링 되는 Object)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="presenter">Presenter<a class="hash-link" href="#presenter" title="제목으로 바로 가기">​</a></h3><ul><li>View에서 요청한 정보(User actions)로 Model을 가공하여(Update model) 변경된 Model정보를 받아(Model changed) View에게 전달(Update UI)해주는 부분</li><li>접착제 역할</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="관계도">관계도<a class="hash-link" href="#관계도" title="제목으로 바로 가기">​</a></h2><p><img loading="lazy" alt="MVP" src="/assets/images/2020-11-09-1-f281d5ea30c7f61a6a68004f3c07f114.png" width="700" height="613" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="특징">특징<a class="hash-link" href="#특징" title="제목으로 바로 가기">​</a></h2><ul><li>View와 Model은 서로를 알지 못한다. (어떤 방법으로든 접근할 수 없다)</li><li>Presenter은 View와 Model을 알고 있다.</li></ul><p><strong>여기서 알고 있다는 부분에 대한 해석으로 좀 헤매였던 부분이 있었는데, 알고 있다는 부분은 해당 인스턴스를 직접적으로 조작한다로 해석해도 무방할것으로 보인다.</strong></p><p>→ 직접 조작하지만 않으면 알고 있지 않은 것 (이벤트 방식, SendMessage 등)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp">MV(R)P<a class="hash-link" href="#mvrp" title="제목으로 바로 가기">​</a></h2><p><a href="https://github.com/neuecc/UniRx" target="_blank" rel="noopener noreferrer">UniRx</a> 플러그인을 사용하면 유니티에서 MVP 패턴을 좀 더 쉽게 구현할 수 있다. (MVP 패턴에서 구현해야 되는 이벤트 기반 코드들을 더 쉽게 사용) 2020년 10월 9일 기준 v7.10(19년 7월 1일) 까지 나와 있는 상태이고, 원래는 Reactive Programming을 유니티에서 쉽게 사용 하기 위해 만들어진 플러그인이다.</p><blockquote><p>UniRx를 사용하면 MVP (MVRP) 패턴을 구현할 수 있습니다.</p></blockquote><p><img loading="lazy" alt="MVP" src="/assets/images/2020-11-09-2-12d99d9091b09524a6756d65db3b0d05.png" width="312" height="214" class="img_ev3q"></p><p>MVVM 대신 MVP를 사용해야하는 이유?</p><p>유니티는 UI 바인딩을 제공하지 않으며, 바인딩 레이어를 만드는 것은 복잡하며, 오버헤드가 크다. </p><p>MVP 패턴을 사용하는 Presenter는 View의 구성요소를 알고 있으며 업데이트 할 수 있다. 실제 바인딩을 하지 않지만, View를 구독(Observable)하여 바인딩 하는 것과 유사하게 동작하게 할 수 있다. (복잡하지 않고, 오버 헤드도 적게 사용 가능)</p><p>이 패턴을 Reactive Presenter라고 한다.</p><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Presenter는 씬의 canvas 루트에 존재.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ReactivePresenter</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Presenter는 View를 알고 있다(인스펙터를 통해 바인딩 한다)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Button</span><span class="token plain"> MyButton</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Toggle</span><span class="token plain"> MyToggle</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Model의 변화는 ReactiveProperty를 통해 알 수 있다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Enemy</span><span class="token plain"> enemy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Enemy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Rx는 View와 Model의 사용자 이벤트를 제공한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MyButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnClickAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> enemy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CurrentHp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">99</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MyToggle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnValueChangedAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SubscribeToInteractable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MyButton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Model들은 Rx를 통해 Presenter에게 자신의 변화를 알리고, Presenter은 Viw를 업데이트 한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enemy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CurrentHp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SubscribeToText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MyText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enemy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsDead</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isDead </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> isDead </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                MyToggle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">interactable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> MyButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">interactable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Model. 모든 프로퍼티는 값의 변경을 알려 준다. (ReactiveProperty)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Enemy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">ReactiveProperty</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name keyword" style="color:#00009f">long</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> CurrentHp </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">ReactiveProperty</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> IsDead </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Enemy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">int</span><span class="token plain"> initialHp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 프로퍼티 정의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CurrentHp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ReactiveProperty</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name keyword" style="color:#00009f">long</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialHp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IsDead </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CurrentHp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToReactiveProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>View는 하나의 Scene이며, Unity의 hierarchy이다. (하나의 개체 혹은 객체?)</p><p>View는 초기화시 Unity 엔진에 의해 Presenter와 연결된다.</p><p>XxxAsObservable 메서드를 사용하면 오버 헤드없이 이벤트 신호를 간단하게 생성 할 수 있습니다. SubscribeToText 및 SubscribeToInteractable은 간단한 바인딩 처럼 사용할 수 있게 하는 helper 클래스 입니다. 이것은 단순한 도구 일 수 있지만 매우 강력합니다. Unity 환경에서 자연스럽게 느껴지며 고성능과 깨끗한 아키텍처를 제공합니다.</p><p><img loading="lazy" alt="MV(R)P" src="/assets/images/2020-11-09-3-5af4c7b8168876fe84bb3204cb4deacc.png" width="700" height="305" class="img_ev3q"></p><ul><li><p>V-&gt; RP-&gt; M-&gt; RP-&gt; V가 완전히 Reactive(반응적인)한 방법으로 연결되었다.</p></li><li><p>GUI 프로그래밍은 ObservableTrigger의 이점도 제공합니다. ObservableTrigger는 Unity 이벤트를 Observable로 변환하므로이를 사용하여 MV(R)P 패턴을 구성 할 수 있습니다. 예를 들어 ObservableEventTrigger는 uGUI 이벤트를 Observable로 변환합니다.</p></li></ul><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> eventTrigger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">AddComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">ObservableEventTrigger</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eventTrigger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnBeginDragAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SelectMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> eventTrigger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnDragAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> UniRx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tuple</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">TakeUntil</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">eventTrigger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnEndDragAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RepeatUntilDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="설계-방향">설계 방향<a class="hash-link" href="#설계-방향" title="제목으로 바로 가기">​</a></h2><ul><li>MVP 패턴을 보면서 헷갈리거나 정립되지 않는 부분은 과감히 내 방식으로 정립하고, 구현 후 문제점 발생시 개선하는 방향으로 진행.</li><li>완전히 디자인 패턴을 따르지는 않을 예정 (클린 코드가 되는 대신 생산성이 저하되는 부분은 과감히 생산성을 따르는 방향)</li><li>하나의 Presenter에 여러개의 Model이 존재할 수 있다.<ul><li>각 모델의 경우 역할별로 클래스화 작업.</li></ul></li><li>하나의 Presenter에 여러개의 View가 존재할 수 있다.</li><li>Presenter는 각 팝업, 각 오브젝트 별로 존재한다. (컴포넌트 개념으로 생각)<ul><li>팝업의 아이템이 존재한다면 그 아이템도 각각의 Presenter가 존재. 구조가 복잡하지 않는다면 없어도 무방.</li></ul></li><li>간단한 예제에서는 항상 View-Presenter-Model은 1개씩 존재 했기 때문에, 각 Presetenr 1개에 2개이상의 view와 model이 존재해도 문제 없는지에 대한 고민을 함.</li><li>그리고 Model의 구현시 거의 모든 역할을 Model에서 한다고 생각하면 될것으로 보임 (Presenter는 Model의 메서드를 호출하는 정도의 역할)<ul><li>보통의 예제에서는 간단한 메서드 구현 정도는 Presenter에서 해주는 부분도 있지만,  Model이 전부 해주는게 더 일반적인 구조인것으로 보임.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론<a class="hash-link" href="#결론" title="제목으로 바로 가기">​</a></h2><ul><li>MV(R)P를 사용한 설계 진행</li><li>MV(R)P 아키텍처에 대해 다양한 자료 조사를 진행하였음. Github에서 UniRx 개발자가 예시로든 방법이 가장 깔끔하고, 생산성 있게 구조화 할 수 있는 방법으로 판단 되었음.</li><li>MV(R)P 시행 착오 (현재로서는 잘못됬다고 생각하는 방법)<ul><li>인터페이스를 사용하여 Presenter의 의존성을 제거하는 방법.</li><li>View 컴포넌트를 따로 뺀다던가, View 자체를 여러개 둔다 던가 하는 방법.</li><li>Model을 하나만 두어서 제어하는 방법.</li><li>MV(R)P는 UI에만 적용하는게 더 좋겠다라고 생각한 부분</li></ul></li><li>View의 경우 복잡해지는 경우 커스텀 View를 만드는 방식으로 해결 가능.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="제목으로 바로 가기">​</a></h2><ul><li><a href="https://ko.wikipedia.org/wiki/%EB%AA%A8%EB%8D%B8-%EB%B7%B0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC" target="_blank" rel="noopener noreferrer">MVC 패턴 위키백과</a></li><li><a href="https://github.com/neuecc/UniRx#model-view-reactivepresenter-pattern" target="_blank" rel="noopener noreferrer">UniRx 공식 문서의 MV(R)P</a></li><li><a href="https://riptutorial.com/ko/unity3d/example/32513/%EB%AA%A8%EB%8D%B8-%EB%B7%B0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC--mvc--%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4" target="_blank" rel="noopener noreferrer">유니티에서의 MVC 디자인 패턴</a></li><li><a href="https://medium.com/@anshul.vyas380/model-view-presenter-b7ece803203c" target="_blank" rel="noopener noreferrer">Model View Presenter</a></li><li><a href="https://engineering.etermax.com/how-to-tdd-in-unity-using-the-mvp-pattern-a646ffbe996f" target="_blank" rel="noopener noreferrer">How to TDD in Unity using the MVP pattern</a></li><li><a href="https://developers.cyberagent.co.jp/blog/archives/4262/" target="_blank" rel="noopener noreferrer">Web出身のUnityエンジニアによる大規模ゲームの基盤設計</a></li><li><a href="https://matcha-choco010.net/2019/08/24/unity-mvrp-zenject-multiscene/" target="_blank" rel="noopener noreferrer">UnityでMV(R)P+Zenjectでテストを行いマルチシーンも試してみる</a></li><li><a href="http://1st.gamecodi.com/board/zboard.php?id=GAMECODI_Talkdev&amp;no=3991" target="_blank" rel="noopener noreferrer">UniRX, MVP 패턴을 적용하여 프로젝트를 진행하신분 있으신가요?</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unity-3-d">unity3d</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unirx">unirx</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2020/10/09/Head-First-Go">[리뷰] Head First Go</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-10-09T00:00:00.000Z" itemprop="datePublished">2020년 10월 9일</time> · <!-- -->약 2분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="book image" src="/assets/images/26-e84da675e6f5ed72dfc7d352d4df67f3.jpg" width="990" height="405" class="img_ev3q"></p><h1>기간</h1><p>한달</p><h1>목적</h1><p>go 언어에 대한 이해를 이해 구입</p><h1>리뷰</h1><blockquote><p>Go 언어를 익히는 가장 확실하고 효율적인 방법</p></blockquote><p>Go 관련 책이 잘 나오지 않는 상황에서 Go 관련 서적이 출간되어 바로 구입 하였다.</p><p>1~16장으로 구성되어 있으며, 기본적인 Go 언어의 특징 및 문법에 대해 설명하고 간단한 예제 프로그램을 만들고, 마지막엔 간단한 웹앱을 만든다.</p><p>거의 모든 프로그래밍 서적이 그렇지만 조금은 더 깊게 파고드는 부분은 없는 것 같아 좀 아쉽긴 하다.</p><p>처음 Go에 대해서 알아보고 어떤 언어 인지 파악하고 싶은 분들 이라면 한번 쯤은 읽어볼 만 할 수도 있겠다.</p><p>Go를 이미 접해본 분이라면 딱히 추천하고 싶지는 않다.</p><h1>평점 및 한줄평</h1><p>go를 처음 접하시는 분이라면 읽어볼 만한 책</p><p>3.5/5</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/book">book</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2020/08/28/Engineer-Information-Processing-Review">정보처리기사 2020 실기 후기</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-08-28T00:00:00.000Z" itemprop="datePublished">2020년 8월 28일</time> · <!-- -->약 5분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>1~2년 게임 전공 학과 졸업</li><li>3~4년 (편입) 컴퓨터과학과 전공 졸업 예정</li><li>7년차 현업 개발자</li></ul><h1>목적</h1><ul><li>방송통신대학교 졸업 (졸업논문대체)</li></ul><h1>공부한 책</h1><ul><li>수제비 (필기에서는 여러개의 책 및 강의를 들었지만, 실기는 이 책 한권으로 공부 진행)</li></ul><h1>책을 산 이유</h1><ul><li>필기 시험에서 수제비 책의 적중률이 높았다고 하여 구입.</li><li>책이 얇고, 정리가 잘 된 느낌이다.</li></ul><p>솔직히 말해서 책 자체는 3사 (시나공, 이기적, 수제비)에서 나온 책 모두 ncs로 변경 된 이 후 갈피를 못잡는 느낌이다. 어떤 책을 고르던 별 다른 문제 없을 것 같다.</p><h1>공부 방법</h1><ul><li>하루에 1~2시간 정도 1달 공부</li><li>수제비 책 1회 독 완료</li><li>수제비 데일리 문제 풀이 및 오답 노트 정리</li><li>수제비 족보 문제 풀이 및 오답 노트 정리</li><li>수제비 퀴즐렛 두음 법칙 학습 및 정보처리기사(단답형) 퀴즐렛 학습</li></ul><h1>수제비 책 평가</h1><ul><li>책 자체는 3사 책 중 가장 얇다. 내용 정리는 잘 되있고 깔끔하다.</li><li>오탈자가 좀 많은 편이었다.</li><li>까페 활성화가 잘 되어 있다. (데일리 문제, 족보, 예상 문제 등)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="문제-적중률">문제 적중률<a class="hash-link" href="#문제-적중률" title="제목으로 바로 가기">​</a></h4><p>수제비 실기 책만 봤을 때는 적중률은 40~50% 정도로 보면 될 것 같다. 하지만 수제비 필기 + 수제비 데일리 문제 + 수제비 족보 문제 까지 모두 합치면 적중률은 70~80 정도는 되는 것으로 보이고, 아마 전부 공부했을 때는 충분히 합격할 수 있을 것 같다. (아마 다른 책도 이것 저것 전부 합치면 이정도 적중률은 나올 것으로 보인다)</p><h1>최종 점수</h1><p>20문제 중 15문제 정답 = 75점 합격.</p><h1>시험 리뷰</h1><p>정보처리기사의 경우 20문제 약술형으로 출제되고, 60점 이상을 맞으면 합격한다 (과락은 없다).</p><p>1회 시험의 합격률은 5%이고, 2회 시험의 합격률은 20% 정도로 ncs로 변경된 이 후 확실히 합격률이
떨어진 것으로 보이고, 비 전공자가 취득하기가 확실히 힘들어 진 것으로 보인다.</p><p>문제를 봤을때 우선 3문제 정도는 우선 기본으로 틀리도록 문제를 구성한 것으로 보인다. (ncs로 변경 된 이후 범위 자체가 굉장히 넓어 졌다. 해당 범위에서 응시자가 보지 않을 법한 범위의 문제를 냈다고 생각하면 될 것 같다.)</p><p>2회 시험의 경우 채점 기준을 상당히 후하게 준 걸로 보인다.</p><h1>요약</h1><ul><li>합격률 5%, 20%로 이전 시험에 비해서 확실히 어려워졌다.</li><li>시험 범위가 상당히 넓어졌다. (실기 시험이지만 필기에서도 몇 문제 출제 된다)</li><li>전공자는 합격 못 할 정도의 난이도는 아니고, 비 전공자의 경우 열심히 하지 않으면 합격하기 좀 힘 들 것 같다.</li></ul><h1>참고 링크</h1><ul><li><a href="http://www.yes24.com/Product/Goods/89664237?scode=032&amp;OzSrank=7" target="_blank" rel="noopener noreferrer">정보처리기사 2020 수제비 실기</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/review">review</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2020/06/07/Engineer-Information-Processing-Review">정보처리기사 2020 필기 후기</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-06-07T00:00:00.000Z" itemprop="datePublished">2020년 6월 7일</time> · <!-- -->약 5분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>1~2년 게임 전공 대학 졸업 3~4년(편입) 컴퓨터과학과 전공</li><li>7년차 개발자</li></ul><h1>목적</h1><ul><li>방송통신대학교 졸업 (졸업논문대체)</li></ul><h1>공부한 책 및 강의</h1><ul><li>시나공, 이기적, 두목넷, 패스트캠퍼스</li></ul><h1>책 및 강의를 산 이유</h1><ul><li>시나공: 그냥 예전 정보처리산업기사 땃을때 시나공으로 공부했었음 (10년전)</li><li>두목넷: 정보처리기사를 꼭 따야되는 상황이었다.</li><li>이기적: 두목넷 교재로 구입.</li><li>패스트캠퍼스: 가격이 싸서 구입</li></ul><h1>공부 방법</h1><ul><li>하루에 1시간 정도 공부 2달 (코로나로 시험 연기로 강제 2달 공부 진행)</li><li>두목넷: 강의 전부 완료 (출퇴근 시간)</li><li>시나공: 1.5 회독 (1~3과목 2회독, 4~5과목 1회독)</li><li>이기적: 200 페이지까지 보다가 포기</li><li>패스트캠퍼스: 강의 보다 포기</li></ul><h1>각 강의 및 책 평가</h1><ul><li>시나공: 분철 서비스 받아서 2권으로 분리해서 봄. (책이 두꺼워서 확실히 분철된건 넘기기도 편하고 보기도 편했음). 각 섹션별로 나누어져 있어서 틈틈히 공부하기 편했다.</li><li>이기적: 이 책은 다음 부터 살일은 없을 것 같다. (책 내용 오타 및 정리가 제대로 되지 않은 느낌)</li><li>두목넷: 그냥 책 읽어주는 느낌임. 방송대 교수님들이 얼마나 대단한 분들인지 다시 한번 느낌.   오디오북 서비스 결제한다고 생각하고 출퇴근 시간에 들으면 괜찮을 수도 있을 것 같다. 사실 모든 기사 강의들이 이정도 수준일 것 같긴 하다.</li><li>패스트캠퍼스: 오디오가 너무 이상해서 도저히 들을 수가 없었다. 중간 포기</li></ul><h1>최종 점수</h1><ul><li>13/20, 13/20, 18/20, 17/20, 16/20 = 77점</li></ul><h1>시험리뷰</h1><ul><li>원래 계획은 시험 전날과 당일 모의고사 문제를 풀고 가려고 했는데, 개인 사정으로 풀지 못함.</li><li>A형으로 시험 진행했고, 1과목 소프트웨어설계는 아예 처음 들어보는 것들이 많아서 상당히 당황스러웠고, 2과목도 상당히 많이 틀릴거라고 예상. 체감상 3과목 데이터베이스 부분이 가장 쉬었고, 4과목, 5과목도 암기 했으면 더 좋은 점수를 맞았을 것 같았다.</li></ul><h1>요약</h1><ul><li>그냥 필기는 시나공으로 공부하면 충분할 것 같다.</li><li>출퇴근 시간에 강의를 들어야 되는 상황이면, 동영상 강의도 나쁘지는 않을 것 같다.</li><li>실기의 경우 현재 시나공 및 수제비 2개 중 하나를 선택할 예정.</li><li>실기 강의의 경우 현재는 구입을 해야 될지 잘 모르겠다. (보험용으로 구입하는 느낌)</li><li>시험 문제 적중률 기준으로는 수제비가 상당히 높았고 (1과목 기준) 그 이외에는 비슷비슷, 강의의 경우 기사퍼스트가 높았다고 한다.</li></ul><h1>참고 링크</h1><ul><li><a href="http://www.yes24.com/Product/Goods/82838724?scode=032&amp;OzSrank=1" target="_blank" rel="noopener noreferrer">정보처리기사 2020 시나공 필기</a></li><li><a href="http://www.yes24.com/Product/Goods/86160726?scode=032&amp;OzSrank=3" target="_blank" rel="noopener noreferrer">정보처리기사 2020 이기적 필기</a></li><li><a href="https://www.dumok.net/shop/item.php?it_id=c921017" target="_blank" rel="noopener noreferrer">정보처리기사 2020 두목넷 필기</a></li><li><a href="http://www.yes24.com/Product/Goods/87576058?scode=032&amp;OzSrank=2" target="_blank" rel="noopener noreferrer">정보처리기사 2020 시나공 실기</a></li><li><a href="http://www.yes24.com/Product/Goods/89664237?scode=032&amp;OzSrank=7" target="_blank" rel="noopener noreferrer">정보처리기사 2020 수제비 실기</a></li><li><a href="https://www.fastcampus.co.kr/pages/7" target="_blank" rel="noopener noreferrer">정보처리기사 2020 패스트캠퍼스</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/review">review</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2020/02/26/Getting-Started-5">UniRx 입문 5 부 - 코루틴과 함께 -</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-02-26T00:00:00.000Z" itemprop="datePublished">2020년 2월 26일</time> · <!-- -->약 21분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="환경">환경<a class="hash-link" href="#환경" title="제목으로 바로 가기">​</a></h2><ul><li>macOS Catalina v10.15</li><li>Unity 2019.2.10f1</li><li>Github Desktop</li><li>Rider 2019.2</li><li>UniRx v7.1.0</li></ul><p>원문 : <a href="https://qiita.com/toRisouP/items/c4b9c5701dd6c991b481" target="_blank" rel="noopener noreferrer">https://qiita.com/toRisouP/items/c4b9c5701dd6c991b481</a></p><p>이 포스팅은 원문을 단순히 구글 번역을 하여 정리한 내용입니다. 일본어를 잘하시는 분은 원문을 보시는게 더 좋으실 것 같습니다. </p><p>[UniRx 입문 시리즈 목차는 이쪽]<!-- -->({% post_url 2019-11-17-UniRx-Getting-Started-List %})</p><h1>0. 이전 복습</h1><p>[지난번]<!-- -->({% post_url 2020-02-23-Getting-Started-4 %})에는 Update()를 어떻게 Observable로 변환하여 이용할 수 있는지 설명 하였습니다.</p><p>이번에는 한 걸음 더 나아가 코루틴과 함께 UniRx를 사용하는 방법을 소개하겠습니다.</p><h1>1. 코루틴과 UniRx</h1><p>Unity는 기본적으로 &quot;코루틴&quot;이라는 기능이 포함되어 있습니다. 이것은 본래는 이터레이터 처리를 구현하는데 사용하는 <code>IEnumerator</code>와 <code>yield 키워드</code>를 활용하여 Unity의 <strong>주 스레드에서</strong> 비동기 처리 같은 것을 실현하는 기능 입니다.</p><p>(간혹 착각하고 있는 사람이 있지만, 코루틴에 실행되는 작업은 Unity의 메인 스레드에서 실행됩니다. Update()와 비슷한 처리로 실행 타이밍도 대부분 같습니다. <a href="https://docs.unity3d.com/Manual/ExecutionOrder.html" target="_blank" rel="noopener noreferrer">참고</a></p><p>그리고 지금까지 소개해온 UniRx는 코루틴과 병행하여 적용하면 한층 더 표현의 폭을 넓힐 수 있습니다. 왜냐하면 UniRx는 <strong>선언적</strong>으로 기술한 스트림은 if 분기할수 없거나, 스트림의 결과를 이용하여 그대로 <strong>절차적</strong> 처리에 연결하는 등의 처리가 어려웠습니다. 하지만 코루틴과 UniRx를 병행함으로써 이러한 문제를 해결 할 수 있게 됩니다. 또한 코루틴의 절차적 처리의 이점을 살리면서, UniRx의 유연한 예외 처리를 사용하는 것도 가능 합니다.</p><p>UniRx와 코루틴의 조합은 정말 편리해서 꼭 사용법을 기억하고 활용했으면 좋겠습니다.</p><p><strong>용어 해설</strong></p><ul><li><strong>선언적:</strong> 부작용이 없는 함수를 메소드 체인으로 연결해 일련의 동작을 설명하는 방식<ul><li>장점: 필요한 처리를 차례로 연결해 쓰는 것만으로 구현되어 가독성이 높다.</li><li>단점: 필요한 작업이 너무 복작하면 기존 함수만으로는 구현할 수 없는 경우가 있다.</li></ul></li><li><strong>절차적</strong>: 상태 변수나 for와 if문을 사용하여 동작을 전부 설명하는 방식<ul><li>장점: 내 마음대로 사용할 수 있어, 어떤 처리도 가능하다.</li><li>단점: 복잡한 기술이 증가하고 가독성이 낮아진다.</li></ul></li></ul><p>[역주]</p><ul><li>절차적 프로그래밍: &quot;루틴&quot;, &quot;서브루틴&quot;, &quot;메소드&quot;, &quot;함수&quot; 등 &quot;프로시저&quot;를 이용한 프로그래밍 패러다임.</li><li>이터레이터: 컬렉션에 대해 사용자 지정 반복을 수행, yield return 문을 사용하고 각 요소를 한 번에 하나씩 반환한다. 이터레이터는 현재 위치를 기억하고 다음 반복에서는 다음 요소를 반환한다.</li></ul><h1>2. 코루틴에서 IObservable로 변환</h1><p>우선 코루틴에서 IObservable로 변환하는 방법을 소개 합니다.</p><p>코루틴을 스트림으로 변환하면 코루틴의 결과로 그대로 UniRx 오퍼레이터 체인에 연결하여 주는 것이 가능합니다.</p><p>또한 복잡한 행동을 하는 스트림을 생성 할 때는 코루틴에서 구현하고 스트림으로 변환하는 방법을 취하는 것이 UniRx 오퍼레이터 체인만으로 스트림을 구축하는 것보다 간단하게 처리되는 경우도 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ⅰ-코루찐-종료-시간을-스트림으로-기다린다">Ⅰ. 코루찐 종료 시간을 스트림으로 기다린다.<a class="hash-link" href="#ⅰ-코루찐-종료-시간을-스트림으로-기다린다" title="제목으로 바로 가기">​</a></h2><p>사용하는 것: <strong>Observable.FromCoroutine</strong></p><p>결과: <code>IObservable&lt;Unit&gt;</code></p><p>첫 번째 인수: <code>Func&lt;IEnumerator&gt; coroutine</code> 코루틴 본체</p><p>두 번째 인수: <code>bool publishEveryYield = false</code> yield 한 시간에 OnNext를 발행 하는가?</p><p>(false는 OnCompleted 직전에 1번만 발급 default = false)</p><p><code>Observable.FromCoroutine</code>을 이용하면 코루틴 종료 시간을 스트림으로 처리 할 수 있습니다.</p><p>코루틴 종료 타이밍의 통지를 필요로 할 때 사용할 수 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ConvertFromCoroutine</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NantokaCoroutine</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token named-parameter punctuation" style="color:#393A34">publishEveryYield</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;OnNext&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;OnCompleted&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NantokaCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Coroutine started&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 어떤 처리를 하고 기다리고 있는 예</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Coroutine finished.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>실행 결과</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Coroutine started.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Coroutine finished.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OnNext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OnComplted</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Observable.FromCoroutine</code>는 <strong>Subscribe 될 때마다 새롭게 코루틴을 생성하고 시작하게 된다는 것에 주의하십시오.</strong> 코루틴 하나만 시작 스트림을 공유하고 이용하고 싶다면 <!-- -->[스트림의 Hot 변환]<!-- -->({% post_url 2019-10-13-UniRx-When-is-a-Hot-Conversion %})이 필요 합니다.</p><p>덧붙여 <code>Observable.FromCoroutine</code> 에서 시작한 코루틴은 Subscribe를 Dispose하면 자동으로 중지 됩니다.</p><p>만약 코루틴에서 자신의 스트림이 Dispose 된 것을 감지하려면 코루틴의 인수 <code>CancellationToken</code>을 전달하여 Dispose를 감지 할 수 있습니다. 이때 CancellationToken은 <code>Observable.FromCoroutine</code> 에서 얻을 수 있습니다. </p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NantokaCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// token이 CancellationToken</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ⅱ-코루틴의-yield-return-결과를-추출">Ⅱ. 코루틴의 yield return 결과를 추출<a class="hash-link" href="#ⅱ-코루틴의-yield-return-결과를-추출" title="제목으로 바로 가기">​</a></h2><p>사용하는 것: <strong><code>Observable.FromCoroutineValue&lt;T&gt;</code></strong></p><p>결과: <code>IObservable&lt;T&gt;</code></p><p>첫 번째 인수: <code>Func&lt;IEnumerator&gt; coroutine</code> 코루틴 본체</p><p>두 번째 인수: <code>bool nullAsNextUpdate = true</code> null일 때 OnNext를 발행하지 않는다. default = true</p><p><code>Observable.FromCoroutineValue&lt;T&gt;</code>를 이용하면 코루틴의 yield return으로 반환 된 값을 꺼내 스트림으로 사용할 수 있습니다.</p><p><code>yield return</code>는 호출 될 때마다 1 프레임 정지하는 성질이 있기 때문에 이를 이용하여 한 프레임 씩 값을 발행 할 수 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Generic</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ConvertFromCoroutine2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 이동 좌표 목록</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name">Vector2</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> moveList</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">FromCoroutineValue</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">Vector2</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MovePositionCoroutine</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 목록에서 값을 1 프레임씩 꺼내는 코루틴</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;returns&gt;&lt;/returns&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MovePositionCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> moveList</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ↑의 foreach 문은 통째로 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;return moveList.GetEnumerator ();&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 로 고쳐 써도 된다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>실행 결과</p><p><img loading="lazy" src="/assets/images/2020-02-26-1-b76680d648a3e3b5fb76e4e6506bf04c.png" width="336" height="581" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ⅲ-코루틴-내부에서-onnext를-직접-발행하기">Ⅲ. 코루틴 내부에서 OnNext를 직접 발행하기<a class="hash-link" href="#ⅲ-코루틴-내부에서-onnext를-직접-발행하기" title="제목으로 바로 가기">​</a></h2><p>사용하는 것: <strong><code>Observable.FromCoroutine&lt;T&gt;</code></strong></p><p>결과: <code>IObservable&lt;T&gt;</code></p><p>첫 번째 인수: <code>Func&lt;IObserver&lt;T&gt;, IEnumerator&gt; coroutine</code> <code>IObserver&lt;T&gt;</code>를 인수로 취하는 코루틴</p><p><code>Observable.FromCoroutine&lt;T&gt;</code>은 <code>IObserver&lt;T&gt;</code>를 제공하는 구현도 존재 합니다. 이 <code>IObserver&lt;T&gt;</code>를 코루틴에 전달하여 <strong>코루틴의 특정 타이밍에 OnNext를 발행 할 수 있습니다.</strong></p><p>이 기능을 이용하면 <strong>내부 구현은 절차적 비동기 처리로 쓰고 외부에서는 스트림으로 취급하는 것 처럼</strong> 코루틴과 UniRx 모두의 장점을 취할 수 있습니다.</p><p>매우 편리하고 범용적인 기능이므로 꼭 기억하세요.</p><p>또한 OnCompleted는 자동으로 발급되지 않기 때문에, 코루틴 종료 시점에서 스스로 OnCompleted를 발금해 줄 필요가 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ConvertFromCoroutine3</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 일시 정지 플래그, true인 경우 타이머 중지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">bool</span><span class="token plain"> IsPaused</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">FromCoroutine</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name keyword" style="color:#00009f">long</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">observer </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CountCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">observer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 일시 정지 플래그가 지나지 않은 상태의 시간(초)를 계산하여 알려준다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;param name=&quot;observer&quot;&gt;알림 IObserver&lt;/param&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;returns&gt;&lt;/returns&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CountCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IObserver</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">long</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> observer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">long</span><span class="token plain"> current </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">float</span><span class="token plain"> deltaTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Dispose하면 코루틴이 멈추니까 while(true) 해도 문제없이 움직인다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기분 나쁘다면 CancellationToken을 받아 이용하면 된다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">IsPaused</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 일시 플래그가 지나지 않은 사이 시간을 측정한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                deltaTime </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> Time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">deltaTime</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">deltaTime </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 차이가 1초를 초과한 경우 정수 부분을 꺼내 집계 통지한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> integerPart </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Mathf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">deltaTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    current </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> integerPart</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    deltaTime </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> integerPart</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 시간(초) 통지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    observer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>실행 결과</p><p><img loading="lazy" src="/assets/images/2020-02-26-2-13030d58b98592c2e9d4ebb719eedf03.gif" width="494" height="289" class="img_ev3q"></p><p> (일시 정지 플래그가 true 동안 카운트를 정지 해, false가 되면 중단된 이전의 카운트에서 측정을 재개)</p><p>&quot;상태에 의존한 처리&quot; 나 &quot;중간에 처리가 크게 분기되는 처리&quot; 같은 것은 UniRx 오퍼레이터 체인만으로 구현하기 어렵고, 경우에 따라서는 구현 불가능한 경우도 있습니다. 그런 경우 이렇게 코루틴에서 내부 구현을 실시하고 스트림으로 변환 해버리는 방법을 취하는 것을 권장합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ⅳ보다-저렴한-비용으로-가벼운-코루틴을-실행">Ⅳ.보다 저렴한 비용으로 가벼운 코루틴을 실행<a class="hash-link" href="#ⅳ보다-저렴한-비용으로-가벼운-코루틴을-실행" title="제목으로 바로 가기">​</a></h2><p>사용하는 것: <strong>Observable.FromMicroCoroutine</strong> / <strong><code>Observable.FromMicroCoroutine&lt;T&gt;</code></strong></p><p>반환 값: <code>IObservable&lt;Unit&gt;</code> / <code>IObservable&lt;T&gt;</code></p><p>첫번째 인수: <code>Func&lt;IEnumerator&gt; coroutine</code> / <code>Func&lt;IObserver&lt;T&gt;, IEnumerator&gt; coroutine</code></p><p>인수: <code>FrameCountType frameCountType = frameCountType.Update</code> Update, FixedUpdate, EndOfFrame 어느 타이밍을 이용할것인지</p><p><code>Observable.FromMicroCoroutine</code> 그리고 <code>Observable.FromMicroCoroutine&lt;T&gt;</code>는 각각 이전에 설명했습니다. <code>Observable.FromCoroutine</code> / <code>Observable.FromCoroutine&lt;T&gt;</code>와 거의 같은 동작을 합니다.</p><p>그러나 내부 구현은 크게 다르며, <strong>코루틴에서 yield return null 만 사용할 수 있는 제약이 있는 대신 Unity 표준 코루틴에 비해 매우 고속으로 동작하는 구조</strong>로 되어 있습니다. 이 구조의 코루틴을 &quot;<strong>마이크로코루틴</strong>&quot;이라 부르며 UniRx의 독자 구현으로 되어 있습니다.</p><p><code>yield return null</code>만 구현되어 있는 코루틴을 만들고 시작하려면 Unity 표준의 <code>StartCoroutine</code> 보다 이 <code>Observable.FromMicroCoroutine</code>를 사용하면 보다 더 저렴한 비용으로 코루틴을 사용할 수 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">FromMicroCoroutine</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name keyword" style="color:#00009f">long</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">observer </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CountCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">observer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>코루틴에서 IObservable로 변환하는 방법 정리</h1><ul><li>코루틴에서 IObservable로 변환 할 수 있다.</li><li><code>Observable.FromCoroutine</code> 등으로 실행한 코루틴은 <code>MainThreadDispatcher</code>에 관리가 위임되므로 수명 관리에 주의 할 필요가 있다 (AddTo 기억)</li><li><code>Observable.FromCoroutine</code> 등은 Subscribe 된 시점에서 새롭게 코루틴을 생성하고 시작되어 버리기 때문에, 1개의 코루틴을 공유하고 여러 번 Subscribe 할 때는 Hot 변환이 필요하다.</li></ul><h1>3. IObservable에서 코루틴으로 변환</h1><p>두 번째 방법으로 UniRx 스트림을 코루틴으로 변환하는 방법을 소개 하겠습니다.</p><p>이 스트림을 코루틴으로 변환하는 기술을 이용하여 코루틴에서 스트림의 실행 결과를 기다리고 그대로 계속 진행하는 등의 기술 방법이 가능합니다.</p><p>&quot;C# Task와 await에 해당한다&quot;라고 간략하게 생각 해두면 좋을 것 같습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="스트림을-코루틴으로-변환-unity-53">스트림을 코루틴으로 변환 (Unity 5.3)<a class="hash-link" href="#스트림을-코루틴으로-변환-unity-53" title="제목으로 바로 가기">​</a></h2><p>사용하는 것: ToYieldInstruction() (<code>IObservable&lt;T&gt;</code>에 대한 확장 메서드)</p><p>결과: <code>ObservableYieldInstruction&lt;T&gt;</code></p><p>인수: <code>CancellationToken cancel</code> 처리를 중단한 경우는 인수에 전달 한다 (생략가능)</p><p>인수: <code>bool throwOnError = false OnError</code>가 발생했을 때 예외 내용을 throw 할 것인가?</p><p><code>ToYieldInstruction</code> 를 이용하여 스트림을 코루틴으로 실행 한 다음 스트림을 기다리게 할 수 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ConvertToCoroutine</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">StartCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">WaitCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">WaitCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Subscribe 대신 ToYieldInstruction()을 이용하여</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 코루틴으로 스트림을 처리 할 수 있게 된다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 1초 기다린다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Wait for 1 second.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Timer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeSpan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToYieldInstruction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ToYieldInstruction()은 OnCompleted가 발행되어 코루틴 종료</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 따라서 OnCompleted가 반드시 발행되는 스트림에서만 사용할 수 있다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 무한으로 이어지는 스트림의 경우 First나 FirstOrDefault를 사용하면 좋겠다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Press any key&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 아무 키나 누를 때까지 기다린다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FirstOrDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">anyKeyDown</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToYieldInstruction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// FirstOrDefault 조건을 충족하면 OnNext와 OnCompleted를 모두 발행한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Pressed&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>ToYieldInstruction</code>은 <strong>OnCompleted 메시지를 받으면 yield return을 종료합니다.</strong> 따라서 OnCompleted를 발행하지 않느 끝없는 스트림을 <code>ToYieldInstruction</code> 해 버리면 영원히 끝없는 상태가 되어 버리기 때문에 주의가 필요합니다.</p><p>또한 스트림에서 발행된 OnNext 메시지를 이용하는 경우 <code>ToYieldInstruction</code> 가 반환하는 <code>ObservableYieldInstruction&lt;T&gt;</code>로 변수에 저장한  결과를 가져올 수 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ConvertToCoroutine2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StartCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">DetectCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">DetectCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Coroutine start!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 코루틴이 시작되고 나서</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 3초 이내에 먼저 자신을 건드린 객체를 얻는다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnCollisionEnterAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FirstOrDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Timeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeSpan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToYieldInstruction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token named-parameter punctuation" style="color:#393A34">throwOnError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Timeout은 지정 시간 이내에 스트림이 완료되지 않는 경우</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// OnError를 발행하는 오퍼레이터</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 결과를 기다린다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HasError </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HasResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 아무것도 치지 않았다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hit object is nothing.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 뭔가에 맞았다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> hitObject </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hitObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/assets/images/2020-02-26-3-b13c6097f79b946a9ea9e59685b71d53.gif" width="573" height="500" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/2020-02-26-4-1807f0259ac8267c9ea0b35298d771a9.gif" width="573" height="500" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="스트림을-코루틴으로-변환-unity-52-이전">스트림을 코루틴으로 변환 (Unity 5.2 이전)<a class="hash-link" href="#스트림을-코루틴으로-변환-unity-52-이전" title="제목으로 바로 가기">​</a></h2><p>Unity 5.2 이전에는 <code>ToYieldInstruction</code>을 사용할 수 없습니다. 대신 <strong>StartAscoroutine</strong>를 사용하여 동일한 작업을 수행 할 수 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">DetectCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">GameObject</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name keyword" style="color:#00009f">bool</span><span class="token plain"> isTimeout </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 코루틴이 시작되고 나서 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 3초 이내에 먼저 자신에 닿은 오브젝트를 취득하는</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnCollisionEnterAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FirstOrDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Timeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeSpan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">StartAsCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> isTimeout </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// StartAsCoroutine는 첫 번째 인수의 함수 결과가 전달되기 때문에 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 그래서 사전에 정의 된 변수에 결과를 대입하여 결과를 얻을 수 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 두 번째 인수는 OnError</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isTimeout </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hit object is nothing.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> hitObject </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hitObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="iobservable에서-코루틴으로-변환하는-방법-정리">IObservable에서 코루틴으로 변환하는 방법 정리<a class="hash-link" href="#iobservable에서-코루틴으로-변환하는-방법-정리" title="제목으로 바로 가기">​</a></h2><ul><li>ToYieldInstruction 또는 StartAsCoroutine를 이용하여 스트림을 코루틴으로 변환 할 수 있다.</li><li>응용하면 &quot;코루틴 도중 특정 이벤트의 발행을 기다린다&quot; 같은 처리가 가능하게 된다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="응용-예">응용 예<a class="hash-link" href="#응용-예" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="코루틴을-직렬로-실행하고-기다린다">코루틴을 직렬로 실행하고 기다린다<a class="hash-link" href="#코루틴을-직렬로-실행하고-기다린다" title="제목으로 바로 가기">​</a></h3><p>CoroutineA 실행 → CoroutineA의 종료를 받고 CoroutineB 시작</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoroutineA</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SelectMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoroutineB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// SelectMany에서 합성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;All Coroutine Finished&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CoroutineA</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CoroutineA start&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CoroutineA finished&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CoroutineB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CoroutineB start&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CoroutineB finished&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>실행 결과</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CoroutineA start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CoroutineA finished</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CoroutineB start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CoroutineB finished</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">All coroutine finished</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="여러-코루틴을-동시에-시작하고-결과를-기다린다">여러 코루틴을 동시에 시작하고 결과를 기다린다<a class="hash-link" href="#여러-코루틴을-동시에-시작하고-결과를-기다린다" title="제목으로 바로 가기">​</a></h3><p>CoroutineA와 CoroutineB를 동시에 시작하고 모두 종료하고 정리해 처리</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WhenAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">FromCoroutine</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name keyword" style="color:#00009f">string</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CoroutineA</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">FromCoroutine</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name keyword" style="color:#00009f">string</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CoroutineB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">xs </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> x </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> xs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;result: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CoroutineA</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IObserver</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> observer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CoroutineA start&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        observer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CoroutineA done!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        observer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnCompleted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CoroutineB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IObserver</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> observer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CoroutineB start&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        observer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CoroutineB done!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        observer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnCompleted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>실행 결과</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CoroutineB start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CoroutineA start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result : CoroutineA done!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result : CoroutineB done!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="무거운-처리를-다른-스레드에-하면서-결과를-코루틴에서-얻는다">무거운 처리를 다른 스레드에 하면서 결과를 코루틴에서 얻는다.<a class="hash-link" href="#무거운-처리를-다른-스레드에-하면서-결과를-코루틴에서-얻는다" title="제목으로 바로 가기">​</a></h3><p>코루틴에서 일부 처리를 다른 스레드에서 실행하고 결과가 돌아 오면 처리를 코루틴에서 재개하도록 구현.</p><p><code>Observable.Start()</code> 을 이용한다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StartCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">GetEnemyDataFromServerCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 서버에서 적의 정보를 당겨오는 코루틴</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;returns&gt;&lt;/returns&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetEnemyDataFromServerCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 서버에서 xml 다운로드</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> www </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WWW</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://api.hogehoge.com/resouces/enemey.xml&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> www</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token keyword" style="color:#00009f">string</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsNullOrEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">www</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">www</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> xmlText </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> www</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ParseXml 함수를 다른 스레드에서 실행</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Observable.Start는 인수의 함수를 ThreadPool에서 실행하는 기능</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> o </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParseXml</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">xmlText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToYieldInstruction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 파스 종료 대기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HasError</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 파스 실패</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">LogError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 파스 결과</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> o</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 이 후 처리 계속</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">Dictionary</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name keyword" style="color:#00009f">string</span><span class="token return-type class-name punctuation" style="color:#393A34">,</span><span class="token return-type class-name"> EnemyParameter</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParseXml</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> xml</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 여기에 xml 파싱을 Dictinonary에 넣는다는 가정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Dictionary</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name keyword" style="color:#00009f">string</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">,</span><span class="token constructor-invocation class-name"> EnemyParameter</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 적 매개 변수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">EnemyParameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">string</span><span class="token plain"> Name </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">string</span><span class="token plain"> Health </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">string</span><span class="token plain"> Power </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(↑ 구현 보다 ↓ 작성 한 것이 간단하게 작성되지만, 어디 까지나 코루틴을 사용하면 어떻게 될까 설명 이므로 용서 바랍니다.)</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ObservableWWW</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://api.hogehoge.com/resouces/enemey.xml&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SelectMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ParseXml</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ObserveOnMainThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 처리를 메인 스레드 취소 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 여기에 퍼스 결과를 사용한 처리 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ex </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">LogError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>정리</h1><ul><li><strong>스트림과 코루틴은 상호 변환 할 수 있다.</strong></li><li>코루틴을 이용하여 오퍼레이터 체인으로는 만들 수 없는 스트림을 구축하는 것이 가능하게 된다.</li><li>UniRx의 독자 코루틴을 사용하는 것으로, Unity 표준 코루틴보다 사용이나 성능이 향상 될 수 있다.</li><li>스트림을 코루틴으로 변환하여 async/await 같은 기능이 가능하다 (어디 까지나 비슷한 기능)</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unity-3-d">unity3d</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unirx">unirx</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2020/02/23/Getting-Started-4">UniRx 입문 그 4 -Update를 스트림으로 변환하는 방법 및 장점 -</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-02-23T00:00:00.000Z" itemprop="datePublished">2020년 2월 23일</time> · <!-- -->약 17분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="환경">환경<a class="hash-link" href="#환경" title="제목으로 바로 가기">​</a></h2><ul><li>macOS Catalina v10.15</li><li>Unity 2019.2.10f1</li><li>Github Desktop</li><li>Rider 2019.2</li><li>UniRx v7.1.0</li></ul><p>원문 : <a href="https://qiita.com/toRisouP/items/30c576c7b0a99f41fb87" target="_blank" rel="noopener noreferrer">https://qiita.com/toRisouP/items/30c576c7b0a99f41fb87</a></p><p>이 포스팅은 원문을 단순히 구글 번역을 하여 정리한 내용입니다. 일본어를 잘하시는 분은 원문을 보시는게 더 좋으실 것 같습니다. </p><p>[UniRx 입문 시리즈 목차는 이쪽]<!-- -->({% post_url 2019-11-17-UniRx-Getting-Started-List %})</p><hr><h1>0. 이전 복습</h1><p>이전에는 스트림의 구축 방법을 몇 가지 소개 했습니다. 이번에는 더 실용성이 높은 &quot;Update를 변환하는 방법&quot;에 중점을 두고 설명 하겠습니다.</p><p>이 포스트에 적은 내용은 과거에 적은 [<!-- -->[UniRx]<!-- --> Update()를 Observable로 변환하는 방법]({% post_url 2019-10-10-UniRx-How-to-convert-Update-to-Observable %})의 내용을 고쳐 쓴 내용 입니다.</p><h1>1. Update()를 스트림으로 변환하는 방법</h1><p>Unity의 Update() 호출을 스트림으로 변환하는 방법은 두 가지가 있습니다.</p><ul><li>UniRx.Triggers의 UpdateAsObservable을 이용하는 방법</li><li>Observable.EveryUpdate를 이용하는 방법</li></ul><p>위 두 방법은 동작 자체는 비슷하지만 내부 구현이 크게 다릅니다. 우선 각각의 사용법과 구조를 설명하겠습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="unirxtriggers의-updateasobservable를-이용하는-방법">UniRx.Triggers의 UpdateAsObservable를 이용하는 방법<a class="hash-link" href="#unirxtriggers의-updateasobservable를-이용하는-방법" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용법">사용법<a class="hash-link" href="#사용법" title="제목으로 바로 가기">​</a></h3><p><strong>호출 방법</strong></p><ol><li><code>using UniRx.Triggers;</code> 추가</li><li><code>this.UpdateAsObservable()</code> 선언</li></ol><p>발행되는 형태</p><p>Unit</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 이 using문이 필요</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">UpdateSample</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// UpdateAsObservable는 Component에 대한</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 확장 메서드로 정의되어 있기 때문에 호출시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;this&quot;가 필요</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Update!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위처럼 Update 이벤트를 UniRx 스트림으로 변환하여 이용할 수 있습니다.</p><p>또한 <code>UpdateAsObservable</code>이 GameObject가 파괴되었을때 자동으로 OnCompleted가 발행되기 때문에 스트림의 수명 관리도 쉽습니다.</p><p><img loading="lazy" src="/assets/images/2020-02-23-15-ee28117fa5f1d637f6cc509789607a79.png" width="403" height="283" class="img_ev3q"></p><p>(Destroy시 OnCompleted가 발행된다)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구조">구조<a class="hash-link" href="#구조" title="제목으로 바로 가기">​</a></h3><p><code>UpdateAsObservable</code>은 <code>ObservableUpdateTrigger 컴포넌트</code>에 실체를 갖는 스트림 입니다.</p><p><code>UpdateAsObservable</code>을 호출 하는 타이밍에 해당 GameObject에 <code>ObservableUpdateTrigger 컴포넌트</code>를 UniRx가 자동으로 연결하고 이 ObservableUpdateTrigger가 발행하는 이벤트를 사용하는 구조로 되어 있습니다.</p><p>UpdateAsObservable는 ObservableUpdateTrigger를 초기화하는 확장 메서드</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token return-type class-name">IObservable</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name">Unit</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token plain"> component</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">component </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> component</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">Empty</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">Unit</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetOrAddComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">ObservableUpdateTrigger</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">component</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>UpdateAsObservable의 본체</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// require keep for Windows Universal App</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">DisallowMultipleComponent</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ObservableUpdateTrigger</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">ObservableTriggerBase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Subject</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name">Unit</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> update</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;Update is called every frame, if the MonoBehaviour is enabled.&lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">update </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Unit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Default</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;Update is called every frame, if the MonoBehaviour is enabled.&lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name">IObservable</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name">Unit</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> update </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">update </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Subject</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name">Unit</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">override</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">RaiseOnCompletedOnDestroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">update </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnCompleted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(코드는 <a href="https://github.com/neuecc/UniRx/blob/7.1.0/Assets/Plugins/UniRx/Scripts/UnityEngineBridge/Triggers/ObservableUpdateTrigger.cs" target="_blank" rel="noopener noreferrer">여기</a>에서 인용)</p><p><img loading="lazy" src="/assets/images/2020-02-23-16-11aeececfe23fd8b67a0270b5e9a97fa.png" width="324" height="325" class="img_ev3q"></p><p>이처럼 UpdateAsObservable를 호출하는 것으로 <code>ObservableUpdateTrigger 컴포넌트</code>를 GameObject에 붙여 <code>ObservableUpdateTrigger</code>에서 실행되는 Update()를 내부에 가지는 Subject를 사용하여 단지 이벤트를 발행하고 있는 간단한 구조로 되어 있습니다.</p><p>여기서 주의해야 할 점은 다음 두가지 입니다.</p><ul><li>ObservableUpdateTrigger라는 수수께끼의 컴포넌트가 갑자기 증가하더라도 그것이 정상 동작이므로 삭제하지 말자</li><li>1개의 GameObject마다 1개의 ObservableUpdateTrigger를 공유하고 이용하기 때문에 UpdateAsObservable 자체를 무수히 Subscribe 해도 그다지 비용이 증가 될것은 없다.</li></ul><p>특히 <strong>컴포넌트가 갑자기 증가하더라도 그것이 정상 동작이므로 삭제하지 말자</strong> 라는 점만 기억해두면 좋을 것 같습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="observableeveryupdate를-이용하는-방법">Observable.EveryUpdate를 이용하는 방법<a class="hash-link" href="#observableeveryupdate를-이용하는-방법" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용법-1">사용법<a class="hash-link" href="#사용법-1" title="제목으로 바로 가기">​</a></h3><p><strong>호출 방법</strong></p><ol><li><code>Observable.EveryUpdate()</code> 직접 Subscribe하기</li></ol><p><strong>발행되는 형태</strong></p><p>long(Subscribe 후 경과한 프레임)</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">UpdateSample</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">EveryUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Update!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>기본적으로 사용법은 이전의 <code>UpdateAsObservable</code>와 같습니다. 하지만 한 가지 큰 차이는, <strong>Observable.EveryUpdate()는 스스로 OnCompleted를 발행하지 않습니다.</strong> 즉 <code>Observable.EveryUpdate()</code>를 사용하는 경우 반드시 직접 스트림의 수명 관리를 해야 합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구조-1">구조<a class="hash-link" href="#구조-1" title="제목으로 바로 가기">​</a></h3><p>Observable.EveryUpdate()는 UniRx의 기능 중 하나 인 &quot;마이크로코루틴&quot;을 이용하여 동작하며, 구조는 UpdateAsObservable에 다소 복잡 합니다. 굉장히 관결하게 정리 하면 <strong>&quot;Observable.EveryUpdate()는 호출 될 때마다 싱글톤 상에서 코루틴을 시작 한다&quot;</strong>라는 동작으로 보면 됩니다. 이 코루틴은 수동으로 멈추지 않는 한 계속 실행되기 때문에 스트림의 수명 관리를 제대로 하지 않으면 <!-- -->[입문 2]<!-- -->({% post_url 2019-11-06-UniRx-Getting-Started-2 %})에서 언급한 문제를 일으킬 수 있습니다.</p><p>그러나 반면 <code>Observable.EveryUpdate()</code>에는 다음과 같은 장점도 존재합니다.</p><ul><li><strong>싱글톤에서 작동하기 때문에 게임 진행 내내 존재하는 스트림을 생성할 수 있다.</strong></li><li><strong>대량의 Subscribe해도 성능이 저하되지 않는다. (<a href="http://neue.cc/2016/05/14_529.html" target="_blank" rel="noopener noreferrer">마이크로 코루틴</a>의 성질)</strong></li></ul><p>또한 UniRx가 관리하는 싱글톤은 &quot;MainThreadDispatcher&quot;라는 GameObject입니다. UniRx를 사용하고 있으면 어느새 생성될 수 있을 거라고 생각합니다. 이쪽도 UniRx의 동작에 절대적으로 필요하기 때문에 마음대로 삭제하거나 하지 않도록 주의 합시다.</p><p><img loading="lazy" src="/assets/images/2020-02-23-17-4421a70da48ef6b66247081bf2dc9d98.png" width="461" height="262" class="img_ev3q"></p><p>(MainThreadDispatcher는 UniRx가 관리, 이용하고 있는 싱글톤 객체이다. 마음대로 삭제하지 말자)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="updateasobservable와-observableeveryupdate의-구분">UpdateAsObservable()와 Observable.EveryUpdate()의 구분<a class="hash-link" href="#updateasobservable와-observableeveryupdate의-구분" title="제목으로 바로 가기">​</a></h2><p>이 두개는 동작은 비슷하지만 내부 구현은 크게 차이가 있었습니다. 각각의 작동 원리를 확실히 파악하고 각 상황에 따라 적절한 쪽을 이용하면 좋을 것 같습니다.</p><ul><li><strong>UpdateAsObservable():</strong> GameObject가 파기되면 자동으로 멈춘다</li><li><strong>Observable.EveryUpdate():</strong> 성능상으로 이점이 있지만 Dispose를 수동으로 호출할 필요가 있다.</li></ul><p><strong>UpdateAsObservable를 사용하면 좋을 것 같은 장소</strong></p><ul><li><strong>GameObject에 연관된 스트림을 이용한다.</strong><ul><li>OnDestroy시 OnCompleted가 발행되므로 수명 관리가 편하다.</li></ul></li></ul><p><strong>Observable.EveryUpdate()를 사용하면 좋을 것 같은 장소</strong></p><ul><li><strong>GameObject를 이용하지 않는 Pure한 Class에서 Update 이벤트를 이용하고 싶을 때</strong><ul><li>싱글톤을 통해 Update 이벤트를 가져올 수 있으므로 MonoBehaviour를 상속하지 않아도 Update 이벤트를 사용할 수 있다.</li></ul></li><li><strong>게임 중에 항상 존재하고 작동하는 스트림을 준비하고 싶을 때</strong><ul><li>싱글톤을 사용하고 있기 때문에 OnCompleted가 자동으로 발동하지 않는다.</li><li>참고: <!-- -->[UniRx에서 FPS 카운터 만들기]<!-- -->({% post_url 2019-10-23-UniRx-FPS-Counter %})</li></ul></li><li><strong>대량의 Update() 호출이 필요할 때</strong><ul><li>소량의 Update() 호출보다 압도적으로 성능이 나온다.</li></ul></li></ul><hr><p>솔직히 어느 쪽을 사용해야 할 것인가는 선택의 문제이기도 하다 생각합니다. Observable.EveryUpdate() 쪽이 성능은 좋지만, Dispose를 해야 되는 단점이 있습니다. 에라가 나서 스트림이 멈춘다면 좋지만, 가장 무서운 것은 에러가 발생해도 뒤에서 계속 움직여버리는 경우입니다. 눈치 채보니 쓰레기 스트림이 뒤에서 대량으로 작동 하는 경우와 같습니다.</p><p>그래서 아무리 성능에 차이가 있다고 해도 그 성능 차이가 게임의 동작에 영향을 주는 상황이란 거의 없습니다. (엄청난 양의 GameObject를 동시에 생성하고 움직였을 때 라든지?) 때문에, 개인적으로 <strong>더 안전한 UpdateAsObservable()을 사용하기를 권장합니다.</strong></p><h1>2. Update를 스트림으로 변환하는 이유</h1><p>UniRx를 이용해야 하는 이유중 1개는 &quot;Update를 스트림으로 변환 할 수 있다&quot;는 점이라고 생각합니다. 스트림 화하면 다음과 같은 이점이 있습니다.</p><ul><li><strong>UniRx 오퍼레이터를 이용하여 로직을 작성 할 수 있게 된다.</strong></li><li><strong>로직의 처리 단위가 명확해진다.</strong></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="오퍼레이터를-이용한-로직의-작성">오퍼레이터를 이용한 로직의 작성<a class="hash-link" href="#오퍼레이터를-이용한-로직의-작성" title="제목으로 바로 가기">​</a></h2><p>UniRx는 시간에 관련된 오퍼레이터가 다수 준비되어 있기 때문에 UniRx 스트림에서 논리를 작성하고 나면 시간의 관계 논리를 간결하게 기술 할 수 있습니다.</p><p>예를 들어, <strong>버튼을 누르고 있는 동안 일정 간격으로 공격</strong> 하는 처리를 생각해 봅시다.</p><p>버튼을 누르고 있는 동안 일정 간격으로 공격한다는 것은 예를 들어 슈팅 게임 총알의 발사 등으로 사용할 수 있습니다. &quot;버튼을 누르고 있는 동안 n초마다 총알을 발사한다&quot;라는 상황입니다.</p><p>이를 UniRx를 이용하지 않고 구현하는 경우 마지막으로 실행한 시간을 기록하여 매 프레임 비교하는 등 복잡하고 귀찮은 구현이 필요합니다. 하지만 UniRx를 사용하면 다음과 같이 구현할 수 있습니다.</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">UpdateSample3</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 실행 간격</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">float</span><span class="token plain"> intervalSeconds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.25f</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ThrottleFirst는 마지막으로 실행하고</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 일정 시간 OnNext를 차단하는 오퍼레이터</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KeyCode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Z</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ThrottleFirst</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeSpan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FromSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">intervalSeconds</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Attack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Attack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Attack&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이렇게 UniRx를 사용하면 컬렉션에 복잡한 처리를 LINQ에서 짧게 쓰는 것과 마찬가지로, 게임 로직을 <strong>선언적으로 간결하게 작성하는 것이 가능</strong>하다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="논리가-명확해진다">논리가 명확해진다<a class="hash-link" href="#논리가-명확해진다" title="제목으로 바로 가기">​</a></h2><p>Unity에서 개발을 진행 하면, Update() 내에서 게임 로직이 담겨 엉망이 되어가는 경우가 대부분이라고 생각합니다.</p><p>그것도 UniRx를 사용하여 정리 할 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="이동-점프-착지시-효과음의-재생을-하는-로직의-예">이동, 점프, 착지시 효과음의 재생을 하는 로직의 예<a class="hash-link" href="#이동-점프-착지시-효과음의-재생을-하는-로직의-예" title="제목으로 바로 가기">​</a></h3><p>이동, 점프, 착지시 효과음의 재생을 한다는 로직을 UniRx를 사용한 경우와 그렇지 않은 경우를 작성해 보겠습니다.</p><p>UniRx없이 작성</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Sample</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">CharacterController</span><span class="token plain"> characterController</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 중 플래그</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">bool</span><span class="token plain"> isJumping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        characterController </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">CharacterController</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isJumping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> inputVector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetAxis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Horizontal&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetAxis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Vertical&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputVector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magnitude </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> inputVector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">normalized</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetKeyDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KeyCode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Space</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> characterController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isGrounded</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">Jump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                isJumping </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">characterController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isGrounded</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                isJumping </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">PlaySoundEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Jump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Jump 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">PlaySoundEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 효과음 재생</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Vector3</span><span class="token plain"> direction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 이동 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>UniRx를 사용하여 작성</p><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Triggers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Sample</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">CharacterController</span><span class="token plain"> characterController</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 중 플래그</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">BoolReactiveProperty</span><span class="token plain"> isJumping </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">BoolReactiveProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        characterController </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">CharacterController</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 중이 아니면 이동</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isJumping</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetAxis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Horizontal&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetAxis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Vertical&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magnitude </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">normalized</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 중이 아니라면 점프</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UpdateAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetKeyDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KeyCode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Space</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isJumping</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> characterController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isGrounded</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">Jump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                isJumping</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 착지 플래그가 변화 할때 점프 중 플래그를 리셋</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        characterController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ObserveEveryValueChanged</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isGrounded</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> isJumping</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> isJumping</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 점프 중 플래그가 false가 되면 효과음을 재생</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isJumping</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">PlaySoundEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Jump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Jump 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">PlaySoundEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 효과음 재생</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Vector3</span><span class="token plain"> direction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 이동 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 두가지를 비교하면 어떻습니까?</p><p>UniRx를 사용하지 않는 경우 Update 내에서 여러 작업을 함께 작성해야 하기 때문에 if문에 의해 중첩이 발생하거나 변수의 범위가 모호해지는 등의 문제점이 있었습니다.</p><p>하지만, UniRx를 사용하여 Update를 스트림화 하는 경우 <strong>로직 단위로 처리를 분할하고 나열해 기술할 수</strong> 있게 되었고, 변수의 범위도 스트림 내에 닫힌 구현이 되었습니다.</p><p>이와 같이 Update를 스트림화하는 것으로 처리를 적절한 단위로 구분하여 기술할 수 있게 되며, 변수의 범위도 명확히 할 수 있습니다.</p><p>또한 ObserveEveryValueChanged 대해서는 뒤의 보충 내용을 참조하십시오.</p><h1>3. 정리</h1><p><strong>Update()를 스트림으로 변환하는 방법은 2가지</strong></p><ul><li>일반적인 용도로 사용하는 경우 <code>UpdateAsObservable()</code>를 하면 된다.</li><li>특수 용도의 경우 <code>Observable.EveryUpdate()</code>를 사용 하면 된다.</li></ul><p><strong>Update()를 스트림으로 변환하면 로직을 설명하기 쉬워진다.</strong></p><ul><li>UniRx 오퍼레이터를 게임로직에 그대로 사용할 수 있다.</li><li>선언적으로, 간결하고 읽기 쉽게 작성할 수 있게 된다.</li></ul><h1>4. 추가</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="observeeveryvaluechanged에-대해">ObserveEveryValueChanged에 대해<a class="hash-link" href="#observeeveryvaluechanged에-대해" title="제목으로 바로 가기">​</a></h2><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> charcterController </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">CharacterController</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// CharacterController의 IsGrounded을 감시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// false → true가 되면 로그출력</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">charcterController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ObserveEveryValueChanged</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isGrounded</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;착지!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ↑ 코드는 ↓와 거의 동의어</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Observable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">EveryUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain">charcterController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isGrounded</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DistinctUntilChanged</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Debug</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;착지!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>지난번 <code>ObserveEveryValueChanged</code>는 <code>Observable.EveryUpdate</code> + <code>Select</code> + <code>DistinctUntilChanged</code>의 축약이라고 설명했습니다. 사실 이 설명은 미묘하게 잘못 되었습니다.</p><p><code>ObserveEveryValueChanged</code>는 감시 대상의 오브젝트를 <a href="https://docs.microsoft.com/ko-kr/dotnet/api/system.weakreference?view=netframework-4.8" target="_blank" rel="noopener noreferrer">약 참조(WeakReference)</a>에서 참조 합니다.</p><p>즉, <strong>ObserveEveryValueChanged의 모니터링은 GC의 참조 카운트에 포함되지 않습니다.</strong> 또한 ObserveEveryValueChanged는 감시 대상의 객체가 GC에 회수되면 <strong>OnCompleted를 자동으로 발행</strong> 합니다.</p><p>이 점에 유의하여 <code>ObserveEveryValueChanged</code>를 이용하면 좋을 것 같습니다.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unity-3-d">unity3d</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2020/02/23/Unity-Asset-And-Tech">Unity 개발에 편리했다 자산 서비스 소개 및 Unity에서의 프로그래밍 기법</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-02-23T00:00:00.000Z" itemprop="datePublished">2020년 2월 23일</time> · <!-- -->약 37분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="환경">환경<a class="hash-link" href="#환경" title="제목으로 바로 가기">​</a></h2><ul><li>macOS Catalina v10.15</li><li>Unity 2019.2.10f1</li><li>Github Desktop</li><li>Rider 2019.2</li><li>UniRx v7.1.0</li></ul><p>원문 : <a href="https://qiita.com/toRisouP/items/2a1d4185d7f54e0cca24" target="_blank" rel="noopener noreferrer">https://qiita.com/toRisouP/items/2a1d4185d7f54e0cca24</a></p><p>이 포스팅은 원문을 단순히 구글 번역을 하여 정리한 내용입니다. 일본어를 잘하시는 분은 원문을 보시는게 더 좋으실 것 같습니다. </p><h1>자기 소개</h1><ul><li>이름: とりすぷ( <a href="https://qiita.com/toRisouP" target="_blank" rel="noopener noreferrer">@toRisouP</a> )</li><li>취미로 Unity를 이용해 게임 개발을 하고 있습니다.</li></ul><h1>지금 만들고 있는 게임</h1><ul><li>제목 :  <a href="https://www.mikoma.net/" target="_blank" rel="noopener noreferrer">ハクレイフリーマーケット</a></li><li>동방 2차 창작 게임</li><li>3D 대전 액션 게임</li><li><strong>네트워크 대전 지원</strong> (최대 6인)</li><li>사용자 관리 기능</li></ul><p>아이템을 자기 진영에 넣으면 점수가 나는 게임 입니다.</p><p><img loading="lazy" src="/assets/images/2020-02-23-1-7d965b0e28fb6c5bc48b139a74350bfb.jpg" width="955" height="536" class="img_ev3q"></p><h1>이번 내용</h1><ul><li>ハクレイフリーマーケット 개발을 통해 얻은 지식과 노하우를 정리합니다.</li><li>1인 개발에서 얻은 지식이므로, 팀 개발에 그대로 적용 할 수 없을지도 모릅니다<ul><li>프로그래머 관점에서의 내용 입니다.</li></ul></li><li>생각나는대로 썻기 때문에 내용에 맥락은 없습니다.<ul><li>궁금하신 부분만 발췌해서 읽으세요.</li></ul></li></ul><h1>정리 목록</h1><p>크게 2가지가 있습니다.</p><ul><li>추천 에셋 서비스 편</li><li>프로그래밍 편</li></ul><h1>추천 에셋 서비스 편</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="추천-에셋-서비스">추천 에셋 서비스<a class="hash-link" href="#추천-에셋-서비스" title="제목으로 바로 가기">​</a></h2><ul><li>어떤 기능이 필요하게 되었을 때 이용한 에셋이나 서비스를 소개 합니다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-네트워크를-만들고-싶다">1. 네트워크를 만들고 싶다<a class="hash-link" href="#1-네트워크를-만들고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것--phton-cloud">사용한 것 : Phton Cloud<a class="hash-link" href="#사용한-것--phton-cloud" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="photon">Photon<a class="hash-link" href="#photon" title="제목으로 바로 가기">​</a></h3><ul><li>일본에서는 GMO 인터넷에서 제공하는 네트워크 엔진</li><li>서버 클라이언트 형태의 네트워크를 만들 수 있게 된다</li><li>그 중에서도 &quot;Photon Cloud&quot;는 서버를 클라우드로 제공 해준다.<ul><li>Unity 용 SDK도 공개되어 있다 (PUN)</li><li>20명 동시 연결까지는 무료</li></ul></li></ul><p><a href="https://www.photonengine.com/ko-kr/Photon" target="_blank" rel="noopener noreferrer">공식 사이트</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unity--photon-cloud에서-할-수-있는-일">Unity + Photon Cloud에서 할 수 있는 일<a class="hash-link" href="#unity--photon-cloud에서-할-수-있는-일" title="제목으로 바로 가기">​</a></h3><ul><li>방을 만들고 참가자를 모집한다.</li><li>Transform, Animator등 다른 임의의 정보를 네트워크를 통해 동기화 할 수 있다.</li><li>네트워크를 통해 메서드를 호출 해 실행할 수 있다.</li></ul><p>네트워크 통신에 필요한 것은 대략 적으로 지원하고 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="그러나-네트워크를-쉽게-만들-수-있다고는-말하지-않았다">그러나 네트워크를 쉽게 만들 수 있다고는 말하지 않았다!<a class="hash-link" href="#그러나-네트워크를-쉽게-만들-수-있다고는-말하지-않았다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="네트워크-개발의-어려움">네트워크 개발의 어려움<a class="hash-link" href="#네트워크-개발의-어려움" title="제목으로 바로 가기">​</a></h3><ul><li><strong>생각해야 될 상태가 늘어난다</strong><ul><li>같은 객체가 &quot;로컬&quot;과 &quot;네트워크 너머 상대방의 세계(리모트)&quot; 양쪽에 동시에 존재한다.</li><li>로컬 및 원격 세계의 상태를 고려하여 객체를 조작하지 않으면 안된다</li></ul></li><li><strong>간단한 것도 비동기 처리 해야 된다</strong><ul><li>단지 &quot;떨어진 아이템을 줍는다&quot;라는 처리만으로도 매우 귀찮아진다.</li><li>참고: <a href="https://qiita.com/toRisouP/items/e56cf1c81144d49653bf" target="_blank" rel="noopener noreferrer">아이템 복사 방지</a></li></ul></li><li><strong>디버깅이 매우 어렵다</strong><ul><li>통신시의 미묘한 시기에 발생하는 버그 라든지 재현이 어렵다.</li></ul></li><li>통신 상대가 없으면 디버깅 및  레벨 디자인을 할 수 없다.<ul><li>동작 확인을 위해 여러 플레이어 필요</li><li>실시간으로 사람을 모을 수 밖에 없다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="게임-개발-초보자에게는-네트워크-개발은-추천-할-수-없다">게임 개발 초보자에게는 네트워크 개발은 추천 할 수 없다<a class="hash-link" href="#게임-개발-초보자에게는-네트워크-개발은-추천-할-수-없다" title="제목으로 바로 가기">​</a></h3><ul><li>Photon이 지원해주는 것은 어디 까지나 통신의 낮은 레이어 부분 만 지원해주고, 응용프로그램은 결국 자신이 구현해야 한다.</li><li>오프라인 게임에 비해 네트워크 개발은 구현하지 않으면 안되는 것이 몇 배는 있다</li><li>어느정도 개발 경험을 쌓고 프로그래밍에 자신감이 붙은 사람이 아니면 손을 대는 것은 위험하다고 생각한다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-사용자-관리가-하고-싶다">2. 사용자 관리가 하고 싶다<a class="hash-link" href="#2-사용자-관리가-하고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것-니프티-클라우드-mobile-backend-ncmb">사용한 것: 니프티 클라우드 mobile backend (NCMB)<a class="hash-link" href="#사용한-것-니프티-클라우드-mobile-backend-ncmb" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ncmb">NCMB<a class="hash-link" href="#ncmb" title="제목으로 바로 가기">​</a></h3><ul><li>니프트에서 제공하는 mBaaS 서비스<ul><li>(mBaaS : Mobile Backend as a Service)</li></ul></li><li>회원 가입 기능, 데이터 저장, 푸시 알림 등의 서비스를 이용할 수 있다.</li><li>200만 API/월 요청까지라면 무료로 이용할 수 있다.</li></ul><p><a href="https://mbaas.nifcloud.com/" target="_blank" rel="noopener noreferrer">공식 사이트</a></p><p>[역주]</p><p>비슷한 서비스로 <a href="https://playfab.com/" target="_blank" rel="noopener noreferrer">PlayFab</a> 이나 <a href="https://firebase.google.com/?hl=ko" target="_blank" rel="noopener noreferrer">Firebase</a>도 제공하고 있다.</p><p>한국에서는 이 2개의 서비스로 시작하는게 더 나을 것 같다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ncmb에서-사용자-관리">NCMB에서 사용자 관리<a class="hash-link" href="#ncmb에서-사용자-관리" title="제목으로 바로 가기">​</a></h3><ul><li>NCMB를 사용하면 간단하게 게임에 회원 가입 및 로그인 기능을 구현할 수 있다.</li><li>이메일 주소 인증에도 대응 된다.</li><li>자기 부담으로 계정 관리 서버를 만들지 않아서 정말 고맙다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-제품-정품-인증-기능을-원한다">3. 제품 정품 인증 기능을 원한다.<a class="hash-link" href="#3-제품-정품-인증-기능을-원한다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것--없다">사용한 것 : 없다<a class="hash-link" href="#사용한-것--없다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="왜">왜?<a class="hash-link" href="#왜" title="제목으로 바로 가기">​</a></h3><ul><li>일련 번호를 가진 사람만 즐길 수 있는 기능을 원한다.<ul><li>실제 구입한 사람만 즐길 수 있게 하고 싶다</li></ul></li><li><strong>시리얼 정품 인증을 제공 해주는것은 좋은 느낌의 서비스는 존재하지 않는다.</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="결국-어떻게-했는지">결국 어떻게 했는지?<a class="hash-link" href="#결국-어떻게-했는지" title="제목으로 바로 가기">​</a></h3><ul><li>자기 부담으로 인증 서버를 만들 수 밖에 없었다.<ul><li>Ruby on Rails로 빠르게 Web 서비스를 만들 수 잇어서 좋았다.</li></ul></li><li>자기 부담 서버와 NCMB를 연계시켜 구입자, 미 구매자 관리를 했따.</li></ul><p>자세한 내용은 <a href="https://www.slideshare.net/torisoup/unityncmb-148151719" target="_blank" rel="noopener noreferrer">Unity와 NCMB에서 사용자 관리를 구현 해본 이야기</a>를 참조</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-npc-상대를-만들고-싶다">4. NPC 상대를 만들고 싶다<a class="hash-link" href="#4-npc-상대를-만들고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것">사용한 것<a class="hash-link" href="#사용한-것" title="제목으로 바로 가기">​</a></h3><p><a href="https://assetstore.unity.com/packages/tools/visual-scripting/behavior-designer-behavior-trees-for-everyone-15277" target="_blank" rel="noopener noreferrer">Behaviour Designer</a></p><p><img loading="lazy" src="/assets/images/2020-02-23-2-8e0b141958ef0ea0d3ae01fe2a8b47df.png" width="835" height="498" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="behaviour-designer">Behaviour Designer<a class="hash-link" href="#behaviour-designer" title="제목으로 바로 가기">​</a></h3><ul><li>BehaviourTree를 GUI에서 만들 수 있는 에셋</li><li>NPC의 행동을 최소 단위로 분할하고 그들을 결합하여 사람 같이 움직이게 할 수 있다.</li><li>상태 머신을 짜는 것에 비해 매우 알기 쉽게 NPC를 만들 수 있으므로 추천한다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="완성된-실제-tree">완성된 실제 Tree<a class="hash-link" href="#완성된-실제-tree" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-3-1b1126c7c6a39e698ca2c98b56ecb735.jpeg" width="1200" height="680" class="img_ev3q"></p><ul><li>만드는데 걸린 시간은 15 시간 정도</li><li>70% 정도는 자작 Task 이다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="실제로-만든-nppc의-동영상">실제로 만든 NPPC의 동영상<a class="hash-link" href="#실제로-만든-nppc의-동영상" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-4-e719009ab81bf5bf147e467b4e6d3e2e.jpeg" width="960" height="540" class="img_ev3q"></p><p><a href="https://www.youtube.com/watch?v=nLsR3nrmppQ" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=nLsR3nrmppQ</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-게임-패드의-관리를-하고-싶다">5. 게임 패드의 관리를 하고 싶다.<a class="hash-link" href="#5-게임-패드의-관리를-하고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것-1">사용한 것<a class="hash-link" href="#사용한-것-1" title="제목으로 바로 가기">​</a></h3><p><a href="https://assetstore.unity.com/packages/tools/utilities/rewired-21676" target="_blank" rel="noopener noreferrer">Rewired</a></p><p><img loading="lazy" src="/assets/images/2020-02-23-5-d2b647f6b2bc17229a2d1f101e6ca910.png" width="1015" height="683" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rewired">Rewired<a class="hash-link" href="#rewired" title="제목으로 바로 가기">​</a></h3><ul><li>게임 패드의 관리에 특화된 에셋</li><li>게임 패드의 자동 검출및 자동 할당을 동적으로 해준다.</li><li>게임패드의 형태에 따라 적절하게 변경해준다.</li><li><strong>방대한 종류의 게임 패드가 처음부터 등록되어 있다.</strong><ul><li>일단 수중에 있던 게임 패드는 대략 대응 된다.</li></ul></li></ul><p>[역주]</p><p>Unity에서 새로 발표한 <a href="https://blogs.unity3d.com/kr/2019/10/14/introducing-the-new-input-system/" target="_blank" rel="noopener noreferrer">new Input System</a>이 기능을 대체할 수 있을지 확인해봐야 될 것 같다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-물리-기반-charactercontroller을-원한다">6. 물리 기반 CharacterController을 원한다.<a class="hash-link" href="#6-물리-기반-charactercontroller을-원한다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것-2">사용한 것<a class="hash-link" href="#사용한-것-2" title="제목으로 바로 가기">​</a></h3><p><a href="https://assetstore.unity.com/packages/templates/systems/easy-character-movement-57985" target="_blank" rel="noopener noreferrer">Easy Character Movement</a></p><p><img loading="lazy" src="/assets/images/2020-02-23-6-9a2a94b26e5fca77e6a0d85a01a67c9e.png" width="1034" height="650" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="easy-character-movement">Easy character Movement<a class="hash-link" href="#easy-character-movement" title="제목으로 바로 가기">​</a></h3><ul><li>물리 연산과 상호 간섭하면서 작동하는 캐릭터를 쉽게 만들 수 있는 에셋</li><li>CharacterController과 같은 인터페이스에서 RigidBody를 취급 할 수 있다.<ul><li>Move() 메서드로 이동하면서 AppleForce()로 날려 버린다 같은 것을 할 수 있다.</li><li>움직이는 바닥의 영향을 받게 하고 싶다.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-개체를-눈에-띄게-하고-싶다">7. 개체를 눈에 띄게 하고 싶다<a class="hash-link" href="#7-개체를-눈에-띄게-하고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것-3">사용한 것<a class="hash-link" href="#사용한-것-3" title="제목으로 바로 가기">​</a></h3><p><a href="https://assetstore.unity.com/packages/tools/particles-effects/highlighting-system-41508" target="_blank" rel="noopener noreferrer">Highlighting System</a></p><p><img loading="lazy" src="/assets/images/2020-02-23-7-b952143f5a3aa0ba25588b5da5e217e5.png" width="823" height="728" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="highlighting-system">Highlighting System<a class="hash-link" href="#highlighting-system" title="제목으로 바로 가기">​</a></h3><ul><li>스크립트를 연결하면 GameObject에 윤곽선을 달 수 있다.<ul><li>특별한 쉐이더를 사용하지 않고 스크립트만으로 가능하다.</li></ul></li><li>점멸 기능과 벽을 투명하게 그리는 기능도 있다.</li><li>플레이어에 윤곽을 붙여두면 시인성이 향상되므로 추천 한다.</li></ul><h1>추천 자산 서비스 편 완료</h1><h1>프로그래밍 편</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="프로그래밍-편-1">프로그래밍 편<a class="hash-link" href="#프로그래밍-편-1" title="제목으로 바로 가기">​</a></h2><ul><li>Unity에서 프로그램을 해오면서 발생한 문제와 그 해결책을 소개 한다.</li></ul><ol><li>형 안전이 아닌 곳에서 죽는 문제</li><li>매니저 싱글톤의 배치 문제</li><li>GOD 클래스가 있는 문제</li><li>컴포넌트간의 연계 방법</li><li>View와 Model의 연계</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-타입-안전이-아닌-곳에서-죽는-문제">1. 타입 안전이 아닌 곳에서 죽는 문제<a class="hash-link" href="#1-타입-안전이-아닌-곳에서-죽는-문제" title="제목으로 바로 가기">​</a></h2><p>&quot;시작은 하는데 왠지 동작이 이상하다. 움직이지 않는다.&quot;</p><p>&quot;컴파일 에러는 안났지만, 움직일때 에러가 난다&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="타입-안전은">타입 안전은?<a class="hash-link" href="#타입-안전은" title="제목으로 바로 가기">​</a></h3><ul><li><strong>프로그램 작성을 잘못 했을 때 제대로 컴파일 오류가 발생한 상태</strong><ul><li>&quot;타입&quot;에 의해 프로그램의 정당성이 담보된 상태의 수</li><li>타입 안전성이 없는 경우, 어딘가 기술을 잘못해도 인간이 그 실수를 알아차릴 방법이 없다.</li><li>버그가 발생했을 때, 수상한 곳을 중단점으로 코드를 체크하게 된다.</li></ul></li></ul><p>Unity에서 타입 안전이 아닌 기능</p><ul><li>SendMessage</li><li>Tag</li><li>Scene 전환</li><li>Invoke</li><li>Animator 플래그 지정</li></ul><p>대부분 문자열 기반으로 처리를 하고 있는 곳</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-태그">예: 태그<a class="hash-link" href="#예-태그" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnCollisionEnter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collision</span><span class="token plain"> collision</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Enemy의 철자가 틀렸지만 컴파일 에러는 되지 않는다!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">collision</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tag </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Eneny&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 처리 부분</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-animator-애니메이션-플래그">예: Animator 애니메이션 플래그<a class="hash-link" href="#예-animator-애니메이션-플래그" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// IsRunning을 철자가 틀렸지만, 컴파일 에러는 되지 않는다!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">animator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetBool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;IsRuning&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="대책">대책<a class="hash-link" href="#대책" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="문자열-기반의-처리를-없앤다">문자열 기반의 처리를 없앤다<a class="hash-link" href="#문자열-기반의-처리를-없앤다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="타입-안전하게-쓰는-방법">타입 안전하게 쓰는 방법<a class="hash-link" href="#타입-안전하게-쓰는-방법" title="제목으로 바로 가기">​</a></h3><ul><li>문자열을 사용하여 동작을 제어하고 있는 것이 악의 근원이다.</li><li>문자열을 사용 장소를 제한하고 가능한 &quot;타입&quot;의 형태 모양으로 변경하면 된다.<ul><li>enum을 사용 하든지, 인터페이스를 사용 하든지, 프로퍼티로 감싸던지</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-1">예 1<a class="hash-link" href="#예-1" title="제목으로 바로 가기">​</a></h3><ul><li>Tag 비교에 enum을 사용</li></ul><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">EntityType</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Player</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enemy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Boss</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnCollisionEnter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collision</span><span class="token plain"> collision</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// enum의 ToString은 느리지만..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">collision</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tag </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> EntityType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Enemy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-2">예 2<a class="hash-link" href="#예-2" title="제목으로 바로 가기">​</a></h3><ul><li>원래 Tag를 사용하지 않고 타입으로 비교</li></ul><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnCollisionEnter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collision</span><span class="token plain"> collision</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// IEnemy 인터페이스를 구현 한 컴포넌트를 가지고 있는지 알아</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> enemyComponent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> collision</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">IEnemy</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">enemyComponent </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-3">예 3<a class="hash-link" href="#예-3" title="제목으로 바로 가기">​</a></h3><ul><li>애니메이션 플래그를 프로퍼티로 감싼다.</li></ul><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Animator</span><span class="token plain"> animator</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 이동 애니메이션 플래그</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token plain"> IsRunning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;IsRunning&quot;라는 문자열이 등장하는 것은 이곳이 유일하다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// (여기 만 오탈자가 발생하지 않도록 주의 해두면 된다)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> animator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetBool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;IsRunning&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    animator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">Animator</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// bool을 대입하는 것만으로 사용할 수 있다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IsRunning </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="타입-안전이-아닌-곳에서-죽는-문제-요약">&quot;타입 안전이 아닌 곳에서 죽는 문제&quot; 요약<a class="hash-link" href="#타입-안전이-아닌-곳에서-죽는-문제-요약" title="제목으로 바로 가기">​</a></h3><ul><li>int 형과 string 타입을 사용하여 조건 판전을 실시하고 있는 곳은 실수가 발생하기 쉽다.</li><li>인터페이스를 만들거나, enum을 사용하거나, 프로퍼티로 감싸던지 어쨌든 원시적인 형태가 노출되지 않도록 유의하면 된다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-매니저-싱글톤의-배치-문제">2. 매니저 싱글톤의 배치 문제<a class="hash-link" href="#2-매니저-싱글톤의-배치-문제" title="제목으로 바로 가기">​</a></h2><p>&quot;Editor 상에서 씬을 지정해서 실행하면 에러가 발생한다.&quot;</p><p>&quot;같은 게임 오브젝트가 2개가 존재한다&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="매니저-싱글톤">매니저 싱글톤<a class="hash-link" href="#매니저-싱글톤" title="제목으로 바로 가기">​</a></h3><ul><li>씬을 횡당하여 리소스 등을 계속 관리하는 싱글톤<ul><li>장면 전환시 전환 애니메이션 관리</li><li>사운드 관리</li><li>게임의 설정 항목 관리</li></ul></li><li>항상 1개 이며, 게임의 실행 중에 존재하지 않으면 게임이 올바르게 동작하지 않는다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="매니저-싱글톤은-어떻게-초기화-하나">매니저 싱글톤은 어떻게 초기화 하나?<a class="hash-link" href="#매니저-싱글톤은-어떻게-초기화-하나" title="제목으로 바로 가기">​</a></h3><ul><li>씬에 Prefab화한 싱글톤을 배치하는 것 만으로 괜찮지 않나?<ul><li><code>DontDestroyOnLoad</code>로 지정하고 한 번 배치하면 사라지지 않도록 한다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="안됩니다">안됩니다.<a class="hash-link" href="#안됩니다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="씬에-처음부터-싱글톤을-놓아-두면-안되는-이유">씬에 처음부터 싱글톤을 놓아 두면 안되는 이유<a class="hash-link" href="#씬에-처음부터-싱글톤을-놓아-두면-안되는-이유" title="제목으로 바로 가기">​</a></h3><ul><li><strong>싱글톤을 배치하고 있지 않는 씬에서 게임을 실행하면 싱글톤이 존재하지 않으면 죽는다.</strong><ul><li>Editor에서 디버깅 중에 발생한다.</li><li>전체 씬에 싱글톤을 배치하는 것 같은 것은 하고 싶지 않다.</li></ul></li><li><strong>싱글톤이 존재하는 씬을 방문할때마다 하나씩 생성되어 증식된다.</strong><ul><li>다중 생성되면 지우는 것도 근본적인 해결책이 되지 않는다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="대책-1">대책<a class="hash-link" href="#대책-1" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="필요한-타이밍에서-처음으로-싱글톤을-동적으로-생성하면-된다">&quot;필요한 타이밍에서 처음으로 싱글톤을 동적으로 생성하면 된다&quot;<a class="hash-link" href="#필요한-타이밍에서-처음으로-싱글톤을-동적으로-생성하면-된다" title="제목으로 바로 가기">​</a></h3><p>필요할때</p><ul><li>이미 싱글톤이 존재한다면 그것을 사용한다.</li><li>없다면 새로 생성 한다.</li></ul><p>이것만으로 해결 할 수 있다 (즉 단순한 지연 초기화)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현-예">구현 예<a class="hash-link" href="#구현-예" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 씬 전환을 실시하는 클래스</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SceneLoader</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 매니저 싱글톤의  Prefab 경로</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> managerPrefabPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Managers/TransitionManager&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 싱글턴 전환 애니메이션 제어 구성 요소</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">TransitionManager</span><span class="token plain"> _transitionManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 이미 싱글 톤이 존재한다면 그것을 돌려주고, 없는 경우 만든다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token return-type class-name">TransitionManager</span><span class="token plain"> TransitionManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">get</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_transitionManager </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> _transitionManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TransitionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Instance </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> resource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">managerPrefabPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Instantiate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _transitionManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TransitionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Instance</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> _transitionManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 씬 전환을 시작</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;param name=&quot;scene&quot;&gt; 다음 씬 &lt;/param&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LoadScene</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">GameScenes</span><span class="token plain"> scene</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TransitionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">StartTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scene</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>static 클래스에 매니저 싱글톤의 존재 확인을 끼워 없으면 생성시킨다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현-예-1">구현 예<a class="hash-link" href="#구현-예-1" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SceneLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">LoadScene</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GameScenes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Title</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>호출자는 싱글톤을 의식하지 않고 static 클래스에 구현된 메소드를 실행 한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="매니저-싱글톤의-배치-문제-요약">매니저 싱글톤의 배치 문제 요약<a class="hash-link" href="#매니저-싱글톤의-배치-문제-요약" title="제목으로 바로 가기">​</a></h3><ul><li><strong>지연 초기화를 이용하면 해결 할 수 있다.</strong></li><li><strong>그러나 처음 액세스 할 때 싱글톤의 생산 비용이 발생하는 단점이 있다.</strong><ul><li>스탠드얼론일때는 기동 직후 장면에서 취합하여 초기화를 실행한다.</li><li>에디터 실행시에만 이 지연 초기화를 사용한다.</li><li>라고 하면 좋을지도 모르겠다.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-god-클래스가-있는-문제">3. GOD 클래스가 있는 문제<a class="hash-link" href="#3-god-클래스가-있는-문제" title="제목으로 바로 가기">​</a></h2><p>&quot;이 클래스는 1000 라인이 넘어 간다.&quot;</p><p>&quot;필드 변수와 메소드가 많이 있어 어떻게 의존하고 있는지 모르겠다!&quot;</p><p>&quot;Update()의 내용이 위험하다!&quot;</p><p>[역주]</p><p>1000 라인이 넘어간다고 무조건 GOD 클래스는 아니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="god-클래스">GOD 클래스?<a class="hash-link" href="#god-클래스" title="제목으로 바로 가기">​</a></h3><ul><li>여러가지 기능이 담겨있어 거대한 클래스</li><li>피해야 할 안티 패턴</li><li>대충 만들다 보면 이렇게 된다.<ul><li>Unity의 공식 튜토리얼의 프로젝트를 그대로 확장 해 나가다보면 GOD 클래스가 되기 쉽다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="god-클래스인-playercontroller">GOD 클래스인 PlayerController<a class="hash-link" href="#god-클래스인-playercontroller" title="제목으로 바로 가기">​</a></h3><ul><li>Input 관리, 이동, 공격, 데미지, 애니메이션, 음향 효과, 입자 효과, UI 관리 등..</li><li>이러한 처리가 <strong>모두 하나의 클래스</strong>에 정의되어 있다.<ul><li>상태를 나타내는 플래그가 난무하고 Update() 안에서도 이것저것 구현 되어 있다.</li></ul></li></ul><p>이렇게 만드는 사람들이 많을 것이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="대책-2">대책<a class="hash-link" href="#대책-2" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-분할">컴포넌트 분할<a class="hash-link" href="#컴포넌트-분할" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-8-22d6876c785a41cecbf47a99c92080f5.jpg" width="454" height="800" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-분할-1">컴포넌트 분할<a class="hash-link" href="#컴포넌트-분할-1" title="제목으로 바로 가기">​</a></h3><ul><li><strong>단일 책임 원칙</strong>을 의식하고 구성 요소를 분할한다.<ul><li>컴포넌트 1개는 1개의 역할만 담당한다.</li><li>이동 처리는 PlayerMover 에서, 애니메이션 관리는 PlayerAnimation 같이 처리 한다.</li></ul></li><li>1개의 컴포넌트가 다루는 영역이 좁아지기 때문에 필요한 최소한의 필드와 메서드만 구현되서 코드의 품질이 좋아진다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트를-분할-할-때-조언">컴포넌트를 분할 할 때 조언<a class="hash-link" href="#컴포넌트를-분할-할-때-조언" title="제목으로 바로 가기">​</a></h3><ul><li><strong>그 컴포넌트가 제공하는 &quot;기능&quot;에 관계있는 처리만을 구현</strong><ul><li>&quot;이동&quot;에 특화된 컴포넌트는 이동 처리에 필요한 것만 제공한다.</li><li>자신의 책임 이외의 처리는 다른 컴포넌트에 위양한다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-분할의-장점">컴포넌트 분할의 장점<a class="hash-link" href="#컴포넌트-분할의-장점" title="제목으로 바로 가기">​</a></h3><ul><li><strong>1개의 컴포넌트가 맡는 책임이 명확해진다.</strong><ul><li>불필요한 일을 생각하지 않고 지금 컴포넌트가 할 일만 생각하고 구현하면 된다.</li></ul></li><li><strong>어떤 처리가 어떤 컴포넌트에 쓰여져 있는지 알기 쉽게 된다.</strong><ul><li>클래스의 이름으로 처리 위치를 찾을 수 있게 된다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-분할의-단점">컴포넌트 분할의 단점<a class="hash-link" href="#컴포넌트-분할의-단점" title="제목으로 바로 가기">​</a></h3><ul><li>방대한 수의 컴포넌트를 연결해야 하며, 그 관리가 힘들어진다.<ul><li>악마 같은 RequireComponent를 쓰는 것도 고충이다.</li><li>MonoBehaviour을 상속하지 않는 Pure한 클래스를 생성하고 그 쪽에 처리를 위양하는 방법도 있다.</li></ul></li><li><strong>Update 호출 비용이 증가 한다.</strong><ul><li>(UniRx의 <code>ObservableUpdateTrigger</code>를 사용하면 Update 비용은 일단 줄일 수 있다.)</li></ul></li><li>뒤에서 다룰 &quot;종속성&quot;과 &quot;클래스 간의 연계&quot; 문제가 나온다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="하나님-클래스는-절대-악인가">하나님 클래스는 절대 악인가?<a class="hash-link" href="#하나님-클래스는-절대-악인가" title="제목으로 바로 가기">​</a></h3><ul><li><strong>규모가 작고 감당할 수 있는 범위라면</strong> 모든 처리를 하나의 클래스에 담아도 된다.</li><li>처음에는 일단 프로그래밍 하고, 코드에 악취가 날때 분할 하는 방식도 괜찮다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-의존-참조-관계가-복잡해지는-문제">3. 의존, 참조 관계가 복잡해지는 문제<a class="hash-link" href="#3-의존-참조-관계가-복잡해지는-문제" title="제목으로 바로 가기">​</a></h2><p>&quot;어떤 컴포넌트가 어디에 의존하는 거야?&quot;</p><p>&quot;컴포넌트를 재사용 하고 싶지만, 어쩐지 여러곳에 의존하고 있어 사용할 수 없다!&quot;</p><p>&quot;어? 상호 참조하고 있어 초기화에 실패 하고 있다.&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="종속성이-복잡해지는-문제">종속성이 복잡해지는 문제<a class="hash-link" href="#종속성이-복잡해지는-문제" title="제목으로 바로 가기">​</a></h3><ul><li>분할된 컴포넌트를 계속 연결해 나가면 복잡해진다.</li><li>어디를 만지면 어디에 영향을 미칠지 예측 불가능 해진다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="대책-3">대책<a class="hash-link" href="#대책-3" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현하기-전에-클래스-다이어그램을-작성하고-설계한다">구현하기 전에 클래스 다이어그램을 작성하고 설계한다.<a class="hash-link" href="#구현하기-전에-클래스-다이어그램을-작성하고-설계한다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설계를-제대로-하자">설계를 제대로 하자<a class="hash-link" href="#설계를-제대로-하자" title="제목으로 바로 가기">​</a></h3><ul><li>복잡해지는 원인은 대부분 닥치는 대로 구현하기 때문이다.<ul><li>사양이 원래 복잡한 경우는 어쩔 수 없다.</li></ul></li><li>설계 클래스 다이어그램을 만들어두면 구현 작업을 분담 할 수 있게 된다.<ul><li>누가 구현해도 설계대로 만들어질 것이다.</li></ul></li><li>잡다한 클래스 다이어그램도 적어 놓으면 나중에 전체 형태를 파악이 가능하게 된다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="클래스-다이어그램을-작성하는-추천-도구">클래스 다이어그램을 작성하는 추천 도구<a class="hash-link" href="#클래스-다이어그램을-작성하는-추천-도구" title="제목으로 바로 가기">​</a></h3><ul><li><a href="https://qiita.com/nakahashi/items/3d88655f055ca6a2617c" target="_blank" rel="noopener noreferrer">PlantUML</a>을 사용하면 쉽게 그림이 그려지므로 추천 한다.<ul><li>텍스트를 쓰는 것만으로 자동으로 클래스 다이어그램이 생성된다.</li></ul></li></ul><p>[역주]</p><p>Visual studio Code에서도 똑같은 확장 프로그램을 설치하여 실행 할 수 있다. 클래스 다아어그램을 문자로 관리를 하면 Git으로 버전관리도 되고, 협업도 된다.</p><ul><li><a href="http://plantuml.com/ko/" target="_blank" rel="noopener noreferrer">PlantUML 공식 홈페이지</a></li></ul><p><img loading="lazy" src="/assets/images/2020-02-23-9-e85c9d1f5755716d90ba0fd20395eb7f.gif" width="1324" height="957" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="실제로-작성한-클래스-다이어그램-예">실제로 작성한 클래스 다이어그램 예<a class="hash-link" href="#실제로-작성한-클래스-다이어그램-예" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-10-6abad4d690f5ecbb5e70cb87841ceaad.jpg" width="1400" height="823" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="클래스-설계시-조언">클래스 설계시 조언<a class="hash-link" href="#클래스-설계시-조언" title="제목으로 바로 가기">​</a></h3><ul><li><strong>상호 참조, 순환 참조를 가능한 피하자</strong><ul><li>상호 참조, 순환 참조는 장점보다 단점이 더 눈에 띄기 때문에 안이하게 이용하지 말자</li><li>닫힌 개념에서 국소적으로 사용할 정도로 억제해두면 좋다.</li></ul></li><li>&quot;<a href="https://qiita.com/tutinoco/items/6952b01e5fc38914ec4e" target="_blank" rel="noopener noreferrer">추상화</a>&quot;와 &quot;<a href="https://qiita.com/UWControl/items/98671f53120ae47ff93a#%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E9%80%86%E8%BB%A2%E3%81%AE%E5%8E%9F%E5%89%87" target="_blank" rel="noopener noreferrer">의존관계역전</a>&quot;을 이용하여 의존 관계를 정리하자.</li></ul><p><img loading="lazy" src="/assets/images/2020-02-23-11-bb039e2a566ca7e6efb32f8ca1bef851.png" width="920" height="489" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="의존관계역전">의존관계역전<a class="hash-link" href="#의존관계역전" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-12-7d80788eccfc71039a0fc7754cbd25a2.png" width="1124" height="608" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설계-노하우의-덩어리">설계 노하우의 덩어리<a class="hash-link" href="#설계-노하우의-덩어리" title="제목으로 바로 가기">​</a></h3><ul><li>SOLID 원칙은 확실히 알고 있으면 좋다.</li><li>&quot;<a href="https://ko.wikipedia.org/wiki/%EC%BD%94%EB%93%9C_%EC%8A%A4%EB%A9%9C" target="_blank" rel="noopener noreferrer">코드스멜</a>&quot;을 느낄 수 있게 되면 좋다.<ul><li>익숙해지면 어디를 추상화 해야 되는지 감각적으로 알게 된다.</li></ul></li><li>우선 여러 가지를 만들어 보고 어려움을 겪으면서, 거기에서 설계의 중요성을 실감하면 좋다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="이런-반론도-있었습니다">이런 반론도 있었습니다.<a class="hash-link" href="#이런-반론도-있었습니다" title="제목으로 바로 가기">​</a></h3><p>&quot;사양이 자주 바뀌기 때문에 설계를 못 해먹겠다!&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사양이-자주-변하니까-설계하지-않는다는-올바른가">&quot;사양이 자주 변하니까 설계하지 않는다&quot;는 올바른가?<a class="hash-link" href="#사양이-자주-변하니까-설계하지-않는다는-올바른가" title="제목으로 바로 가기">​</a></h3><ul><li>솔직히 <a href="https://namu.wiki/w/Case%20by%20case" target="_blank" rel="noopener noreferrer">케바케</a>라고 할 수 밖에 없다.</li><li>변경에 유연하게 만드는 것도, YAGNI로 만드는 것도 있다.<ul><li>(YAGNI:  &quot;You Ain&#x27;t Gonna Need It&quot;. &quot;필요한 작업만 해라&quot;, 사양 변경으로 유연하게 작업한 코드를 작성해 놓으면 코드가 불필요하게 장황해진다. 그러니 당장 필요한 작업에 집중하고 쓸데없는 작업은 하지 말라라는 개발 원칙) <del>Simple is Best</del></li></ul></li><li><strong>프로젝트에 따라 최적의 개발 스타일이 변화하기</strong> 때문에 설계를 안하는 것이 효율이 좋다면  이렇게 할 것이다.<ul><li>설계하는 것이 나중에 편해지는 경우가 더 많지만, &quot;아무래도 설계하고 싶지 않다&quot;라는 사람에게는 강요할 수 없다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="덧붙여서">덧붙여서<a class="hash-link" href="#덧붙여서" title="제목으로 바로 가기">​</a></h3><ul><li>게임 잼도 제대로 설계하고 개발하니 잘 되었다.</li><li><a href="https://qiita.com/toRisouP/items/824aff814849ae41efe7" target="_blank" rel="noopener noreferrer">글로벌 게임 잼에서 클래스 설계를 해서 원할하게 개발이 진행된 이야기</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="의존-참고-관계가-복잡해지는-문제-요약">&#x27;의존, 참고 관계가 복잡해지는 문제&#x27; 요약<a class="hash-link" href="#의존-참고-관계가-복잡해지는-문제-요약" title="제목으로 바로 가기">​</a></h3><ul><li>설계를 잘하는게 답</li><li>클래스 다이어그램을 만들어두면 일단 구현헤서 해메지는 않을 것이다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-컴포넌트간의-연계-방법">4. 컴포넌트간의 연계 방법<a class="hash-link" href="#4-컴포넌트간의-연계-방법" title="제목으로 바로 가기">​</a></h2><p><strong>조각 조각낸 컴포넌트를 어떻게 조화시켜 동작시킬수 있을까?</strong></p><ul><li>&quot;플레이어가 기절 하면, 이동하지 못하게 하고 기절 애니메이션을 재생하고 효과음을 재생하고 싶다&quot;</li><li>상태 관리를 일원화해서 그곳의 변화를 감지해서 마음대로 처리가 움직이는 형태로 하고 싶다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트간의-연계">컴포넌트간의 연계<a class="hash-link" href="#컴포넌트간의-연계" title="제목으로 바로 가기">​</a></h3><ul><li>뭔가 있을 때마다 <strong>이벤트를 발행</strong>하는 것이 가장 편하다.<ul><li>(<strong>Observer 패턴</strong>을 적용하여 연계시킨다)</li></ul></li><li>각 컴포넌트는 &quot;OO가 일어나면 XX를 한다&quot;는 것만을 의식하는 형태로 작성한다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="observer-패턴">Observer 패턴?<a class="hash-link" href="#observer-패턴" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="observer-패턴-1">Observer 패턴<a class="hash-link" href="#observer-패턴-1" title="제목으로 바로 가기">​</a></h3><ul><li>무엇인가 잘못되었을 때 감시 대상 측에서 이벤트를 날려주고 구독 측에서 처리하는 디자인 패턴</li><li>의존 관계를 역전 할 수 있는 장점이 있다<ul><li>(매 프레임 상태의 플래그를 감시 한다 같은 구현을 없앨 수 있다)</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="모르면-일단-unirx를-사용하면-ok">모르면 일단 &quot;<a href="https://assetstore.unity.com/packages/tools/integration/unirx-reactive-extensions-for-unity-17276" target="_blank" rel="noopener noreferrer">UniRx</a>&quot;를 사용하면 OK<a class="hash-link" href="#모르면-일단-unirx를-사용하면-ok" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unirx">UniRx<a class="hash-link" href="#unirx" title="제목으로 바로 가기">​</a></h3><ul><li>Reactive Extensions for Unity</li><li>리액티브 프로그래밍을 Unity에서 사용할 수 있다</li><li>할 수 있는 것이 너무 많아서 한마디로 설명 할 수 없다!<ul><li>과거에 정리한 포스트에 일부 설명하고 있기 때문에 그쪽을 참고하십시오.</li><li><a href="https://qiita.com/toRisouP/items/48b9fa25df64d3c6a392" target="_blank" rel="noopener noreferrer">정리 링크</a></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unirx의-reactivepropertyt">UniRx의 <code>ReactiveProperty&lt;T&gt;</code><a class="hash-link" href="#unirx의-reactivepropertyt" title="제목으로 바로 가기">​</a></h3><ul><li>이벤트 발행 기능을 가진 변수</li><li>값이 바뀌면 통지가 날라온다.</li><li>이것을 부모가 되는 클래스에 갖게 하고 자식이 이벤트를 기다리면 OK</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현-예-2">구현 예<a class="hash-link" href="#구현-예-2" title="제목으로 바로 가기">​</a></h3><ul><li>&quot;플레이어가 기절 하면 이동할 수 없게 하고 기절 애니메이션을 재생 시키고 싶다&quot;</li><li>UniRx를 이용한 구현 예를 소개한다.</li></ul><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerHealth</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 기절 플래그</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">BoolReactiveProperty</span><span class="token plain"> IsStunned </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">BoolReactiveProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 데미지 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ApplyDamage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절하지 않았다면 기절 시킨다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StartCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StunCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 기절하는 동안 수행되는 코루틴</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StunCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 플래그 ON</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 적당히 대기 한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 플래그 OFF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 이동 관리 컴포넌트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerMove</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 이동 허가 플래그</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">bool</span><span class="token plain"> _canMove</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 참조의 취득은 원하는 방식으로 구현</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> playerHealth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">PlayerHealth</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 플래그가 변경되면 이동 허가 플래그에 반영한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playerHealth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _canMove </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 다음 부분은 _canMove 플래그를 사용하여 이동 처리를 작성하는 로직</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 이하 생략</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerAnimation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Animator</span><span class="token plain"> _animator</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token plain"> IsStunned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _animator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetBool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;IsStunned&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _animator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">Animator</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> playerHealth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">PlayerHealth</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 플래그를 써 고쳐하면 Animator의 기절 플래그에 반영</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playerHealth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> IsStunned </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerSound</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> playerHealth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">PlayerHealth</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 상태에 맞추어 효과음을 재생, 중지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playerHealth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">Play</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">Stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Play</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 생략</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 생략</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-연계-방법-정리">&quot;컴포넌트 연계 방법&quot; 정리<a class="hash-link" href="#컴포넌트-연계-방법-정리" title="제목으로 바로 가기">​</a></h3><ul><li>이벤트 기반 구현을 하는 것이 방법<ul><li>Observer 패턴을 사용할 수 있다.</li></ul></li><li>UniRx와 너무 잘 어울린다<ul><li>바로 리액티브 프로그래밍!</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-view와-model의-연계">5. View와 Model의 연계<a class="hash-link" href="#5-view와-model의-연계" title="제목으로 바로 가기">​</a></h2><p>&quot;어쩐지 Model (데이터 실체)과 View(UI)가 상호 의존적이다.&quot;</p><p><img loading="lazy" src="/assets/images/2020-02-23-13-e009fd2f2a1ad411a2bf5f76a4d45ded.png" width="1314" height="724" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="view와-model이-상호-참조하면-여러가지-위험이-있다">View와 Model이 상호 참조하면 여러가지 위험이 있다.<a class="hash-link" href="#view와-model이-상호-참조하면-여러가지-위험이-있다" title="제목으로 바로 가기">​</a></h3><ul><li><strong>데이터의 실체를 가지는 컴포넌트(Model)가 UI의 제어까지 해야 된다.</strong><ul><li>Model이 GOD 클래스화 된다.</li></ul></li><li><strong>UI의 교체가 어렵다.</strong><ul><li>Model이 View에 커플링이 되어 있기 때문에 쉽게 분리, 교체 할 수 없다.</li></ul></li><li><strong>UI를 재사용 할 수 없게 된다.</strong><ul><li>View에 필요한 로직이 Model에 작성되어 있기 때문에, 다른 Model에 같은 View를 적용하려고하면 Model의 구현마다 다시 작성해야 한다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="view와-model을-잘-다루는-방법">View와 Model을 잘 다루는 방법<a class="hash-link" href="#view와-model을-잘-다루는-방법" title="제목으로 바로 가기">​</a></h3><ul><li>옛날부터 계속 논의되어 온 문제</li><li>지금까지 MVC, MVP, MVVM 같은 아키텍쳐 패턴이 고안되어 왔다.</li><li><strong>Unity에서 기분좋게 사용할 수 있는 패턴은 없는 걸까?</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="있습니다">있습니다.<a class="hash-link" href="#있습니다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp-패턴">MV(R)P 패턴<a class="hash-link" href="#mvrp-패턴" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp-패턴-1">MV(R)P 패턴<a class="hash-link" href="#mvrp-패턴-1" title="제목으로 바로 가기">​</a></h3><ul><li>Model-View-(Reactrive)-Presenter 패턴</li><li>UniRx의 제작자 neuecc씨가 고안한 UniRx를 이용한 Unity의 UI 아키텍쳐 패턴</li><li>&quot;Presenter&quot;을 준비하고 Model과 View의 사이를 중개한다.</li><li><strong>UniRx의 ReactiveProperty를 사용하는 것이 쉽다</strong></li></ul><p>참고 : <a href="http://neue.cc/2015/04/13_510.html" target="_blank" rel="noopener noreferrer">UniRx 4.8 - 경량 이벤트 훅과 uGUI의 이벤트에 의한 데이터 바인딩</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp-패턴-적용-후">MV(R)P 패턴 적용 후<a class="hash-link" href="#mvrp-패턴-적용-후" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-14-3378e9f4fc462e5568fadf8ccbd33b53.png" width="926" height="287" class="img_ev3q"></p><p>[역주]</p><p>MV(R)P 설계에서는 Presenter가 Model과 View을 소지하고있다. 따라서 Presenter는 Model과 View를 알고 있는데, 상호 참조를 피하기 위해 Model과 View는 Presenter를 모르는 구조로 되어 있다.</p><p>안드로이드의 MVP 예제들에서는 보통 View와 Presenter가 1:1로 서로 알고 있는 구조로 되어 있다. 두개의 공통점은 Model과 View는 서로 모른다는 점이다.</p><p>MV(R)P의 경우 MVP에서 변형된 아키텍쳐 패턴으로 유니티에 조금 더 특화된 패턴이라고 생각하면 될 것 같다. 실제로 Unity에서 UniRx를 사용하여 MV(R)P 아키텍쳐를 사용하능 방법에도 여러가지 방법으로 사용하기도 한다.</p><p>아래는 MVP 패턴에 대한 추가 링크</p><ul><li><a href="https://developers.cyberagent.co.jp/blog/archives/4262/" target="_blank" rel="noopener noreferrer">Web 출신의 Unity 엔지니어의 대규모 게임의 기초 설계</a></li><li><a href="http://light11.hatenadiary.com/entry/2019/01/23/231828" target="_blank" rel="noopener noreferrer">[Unity] MVP 및 MV(R)P의 구현 예와 여러가지 구현 방법의 고찰</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp이-구현-예">MV(R)P이 구현 예<a class="hash-link" href="#mvrp이-구현-예" title="제목으로 바로 가기">​</a></h3><ul><li>uGUI의 InputField의 입력을 Model에 저장한다.</li><li>Model을 유지하는 데이터에 변경이 있는 경우 InputField도 업데이트 한다.</li><li>InputField = View 자체로 취급 한다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="model">Model<a class="hash-link" href="#model" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Model</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 외부에 공개하는 데이터</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">ReactiveProperty</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> Name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ReactiveProperty</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name keyword" style="color:#00009f">string</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="presenter">Presenter<a class="hash-link" href="#presenter" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">UI</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// Model과 View를 연결하는 Presenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Presenter</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// view</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">InputField</span><span class="token plain"> _nameInputField</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Model</span><span class="token plain"> _model</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// view가 업데이트되면 Model의 데이터를 업데이트 한다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _nameInputField</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnValueChangedAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// model이 업데이트 되면 view를 다시 업데이트 한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _nameInputField</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp-패턴은-추천-한다">MV(R)P 패턴은 추천 한다.<a class="hash-link" href="#mvrp-패턴은-추천-한다" title="제목으로 바로 가기">​</a></h3><ul><li>uGUI를 사용한다면 이 패턴을 사용하면 굉장히 편리하다.</li><li>View를 위해 약간의 로직이 필요하다면 그것을 Presenter에 써도 좋다.<ul><li>데이터 형식의 반환 같은 것</li></ul></li><li>Presenter의 역할은 &quot;Model과 View를 연결한다&quot; 이므로, 거기에 벗어나는 처리는 하지 않는다.<ul><li>Presenter의 구현은 몇 줄 ~ 수십 줄 정도로 끝날 정도가 적당하다.</li></ul></li></ul><p>[역주]</p><p>어떻게 프로그래밍을 하느냐에 따라 달라질 것 같다. </p><p>실제 모델에서 비즈니스 로직 처리를 전부 완료하고, 값의 반환을 Presenter에 전달하는 방식으로 구현하거나, View 자체의 논리적인 변화가 너무 많아진다면 View를 위한 컴포넌트를 따로 만들어서 처리하는 방식등을 사용하여 구현해야 할 수 있다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="프로그래밍-편-완료">프로그래밍 편 완료<a class="hash-link" href="#프로그래밍-편-완료" title="제목으로 바로 가기">​</a></h2><h1>마지막으로</h1><ul><li>떠오른 생각을 닥치는 대로 썻는데, 분량이 대단히 많아 졌다.</li><li>조금이라도 도움이 되는 부분이 있으면 좋겠다.</li><li>이제 두번 다시 네트워크 게임은 만들고 싶지 않다.</li></ul><p>감사합니다.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unity-3-d">unity3d</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unirx">unirx</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="블로그 게시물 목록 탐색"><a class="pagination-nav__link pagination-nav__link--prev" href="/"><div class="pagination-nav__label">이전 페이지</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/page/3"><div class="pagination-nav__label">다음 페이지</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/karais89" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Blog</a></li><li class="footer__item"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.314da9fa.js"></script>
<script src="/assets/js/main.915089c3.js"></script>
</body>
</html>