# 2022-11-28-TIL

## ğŸ“ ì˜¤ëŠ˜ ê³µë¶€í•œ ë‚´ìš©
- python ì»´í”„ë¦¬í—¨ì…˜
- íŒŒì´ì¬ ë¬¸ë²• ì¤‘ ê°€ì¥ ì´í•´ ì•ˆê°€ëŠ” ë¬¸ë²•. ì´ê²Œ ì •ë§ ê°€ë…ì„±ì´ ì¢‹ì€ ë¬¸ë²•ì¸ê°€ ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë˜ ë¬¸ë²•
- ë”•ì…”ë„ˆë¦¬ ì»´í”„ë¦¬í—¨ì…˜

### ë„ì»¤
- ë‹¨ìˆœí•œ ì•± ì• í”Œë¦¬ì¼€ì´ì…˜
- íŒŒì´ì¬ í”Œë¼ìŠ¤í¬  

> ë°°í¬ë¥¼ ì–´ë–»ê²Œ í•˜ë©´ ì¢‹ì„ê¹Œ?
 
- íŒŒì´ì¬ ì˜ì¡´ì„±
- ì•± ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜ì¡´ì„±
- í”Œë¼ìŠ¤í¬ ëª…ë ¹ì–´ ë“±

### ìˆ˜ë™ ë°°í¬

```sh
docker run -it ubuntu bash
```

- ìš°ë¶„íˆ¬ ì´ë¯¸ì§€ bash ëª…ë ¹ì–´ í„°ë¯¸ë„ ì…ë ¥ê°’ì„ ì·¨í•˜ê¸°

```sh
$ apt-get update
$ apt-get install -y python
$ apt-get install python-pip
$ pip install flask
$ cat > /opt/app.py
$ FLASK_APP=app.py flask run --host=0.0.0.0
```
- ì•± ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

### ë„ì»¤í™” í•˜ê¸°

- ë©”ëª¨ì¥ì„ ì¼œì„œ ì‹¤í–‰í–ˆë˜ ì ˆì°¨ë“¤ì„ ì „ë¶€ ì ê¸°

```sh
apt-get update
apt-get install -y python3
apt-get install python3-pip
pip install flask
Create/Copy application code to /opt/app.py

FLASK_APP=/opt/app.py flask run --host=0.0.0.0

```

```sh
mkdir my-simple-webapp
cd my-simple-webapp
cat > Dockerfile
```

```
FROM ubuntu

RUN apt-get update
RUN apt-get install -y python3 python3-pip
RUN pip install flask

COPY app.py /opt/app.py

ENTRYPOINT FLASK_APP=/opt/app.py flask run --host=0.0.0.0
```
- dockerfile

```
cat > app.py

import os
from flask import Flask
app = Flask(__name__)

@app.route("/")
def main():
    return "Welcome!"

@app.route('/how-are-you')
def hello():
    return 'I am good, how about you?'

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=8080)

```
- app.py ë³µì‚¬

```
docker build .
```
- docker build í•˜ê¸°

```
docker build . -t my-simple-webapp
```
- -t íƒœê·¸ë¥¼ ì´ìš©í•´ ì´ë¯¸ì§€ì— ì´ë¦„ ë¶™ì´ê¸°
- ë„ì»¤ëŠ” ëª¨ë“  ê³„ì¸µì„ ìºì‹œì— ì €ì¥í•œë‹¤. í•œë²ˆ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒ ì‹¤í–‰ì€ ë³€ê²½ ì‚¬í•­ì´ ì—†ë‹¤ë©´ ë¹ ë¥´ë‹¤.

```
docker images
```

```
docker run my-simple-webapp
```
- í¬íŠ¸ ë§¤í•‘ í•˜ë©´ ëœë‹¤.

```
docker push my-simple-webapp
```
- ë„ì»¤ í—ˆë¸Œì— ì˜¬ë¦¬ê¸°
- ê³„ì • ëª…ì„ ì•ˆë¶™ì´ë©´ ì•ˆì˜¬ë¼ê°€ê¸° ë•Œë¬¸ì— ì´ë¯¸ì§€ì— ê³„ì •ëª… ê¹Œì§€ ë¶™ì—¬ì•¼ë¨

```
docker build . -t jihunheo/my-simple-webapp
docker push jihunheo/my-simple-webapp
```
- ë„ì»¤ ì´ë¯¸ì§€ í‘¸ì‹œì˜ ê²½ìš° ëª…ë ¹ì–´ë§Œ í‘¸ì‹œ ëœë‹¤ê³  ìƒê°í–ˆëŠ”ë°.. ì´ë¯¸ì§€ ìì²´ë¥¼ ì „ë¶€ (ë‹¨ê³„ë³„) ?? í‘¸ì‹œ í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ë³´ì„.
    - ìš©ëŸ‰ì´ ìƒê°ë³´ë‹¤ í¬ë‹¤.
    - ê°ê°ì˜ ìŠ¤íƒ­ë³„ ì´ë¯¸ì§€ë¥¼ ì „ë¶€ë‹¤ í‘¸ì‹œí•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.
- ê·¸ ì‹œì ì— ëŒ€í•œ ì´ë¯¸ì§€ê°€ ê·¸ëƒ¥ í†µì§œë¡œ ì˜¬ë¼ê°€ëŠ” êµ¬ì¡°ë¡œ ë³´ì¸ë‹¤??