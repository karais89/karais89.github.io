<!doctype html>
<html lang="ko" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Unity 개발에 편리했다 자산 서비스 소개 및 Unity에서의 프로그래밍 기법 | Lonpeach Tech</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tech.lonpeach.com/2020/02/23/Unity-Asset-And-Tech"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Unity 개발에 편리했다 자산 서비스 소개 및 Unity에서의 프로그래밍 기법 | Lonpeach Tech"><meta data-rh="true" name="description" content="환경"><meta data-rh="true" property="og:description" content="환경"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2020-02-23T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/karais89"><meta data-rh="true" property="article:tag" content="unity3d,unirx"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tech.lonpeach.com/2020/02/23/Unity-Asset-And-Tech"><link data-rh="true" rel="alternate" href="https://tech.lonpeach.com/2020/02/23/Unity-Asset-And-Tech" hreflang="ko"><link data-rh="true" rel="alternate" href="https://tech.lonpeach.com/2020/02/23/Unity-Asset-And-Tech" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UJCTEGEXU7-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Lonpeach Tech RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Lonpeach Tech Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-59335977-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="Lonpeach Tech" href="/opensearch.xml">
<link rel="icon" href="/img/docusaurus.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><link rel="stylesheet" href="/assets/css/styles.448cd76c.css">
<link rel="preload" href="/assets/js/runtime~main.9e9d2be4.js" as="script">
<link rel="preload" href="/assets/js/main.ebe75132.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="본문으로 건너뛰기"><a href="#" class="skipToContent_fXgn">본문으로 건너뛰기</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Lonpeach Tech</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Blog</a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/karais89/karais89.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="검색"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">검색</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="최근 블로그 문서 둘러보기"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/welcome">Welcome</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/06/21/FastAPI-Getting-Started-3">FastAPI 입문 3 - 튜토리얼 - 도입</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/06/20/FastAPI-Getting-Started-2">FastAPI 입문 2 - 연습 예제</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/06/18/FastAPI-Getting-Started-1">FastAPI 입문 1 - 특징 및 환경설정</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/02/13/python-telegram-restock-bot">텔레그램 재고 알림 봇 만들기</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Unity 개발에 편리했다 자산 서비스 소개 및 Unity에서의 프로그래밍 기법</h1><div class="container_mt6G margin-vert--md"><time datetime="2020-02-23T00:00:00.000Z" itemprop="datePublished">2020년 2월 23일</time> · <!-- -->약 37분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karais89.png" alt="karais89"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">karais89</span></a></div><small class="avatar__subtitle" itemprop="description">Game Developer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="환경">환경<a class="hash-link" href="#환경" title="제목으로 바로 가기">​</a></h2><ul><li>macOS Catalina v10.15</li><li>Unity 2019.2.10f1</li><li>Github Desktop</li><li>Rider 2019.2</li><li>UniRx v7.1.0</li></ul><p>원문 : <a href="https://qiita.com/toRisouP/items/2a1d4185d7f54e0cca24" target="_blank" rel="noopener noreferrer">https://qiita.com/toRisouP/items/2a1d4185d7f54e0cca24</a></p><p>이 포스팅은 원문을 단순히 구글 번역을 하여 정리한 내용입니다. 일본어를 잘하시는 분은 원문을 보시는게 더 좋으실 것 같습니다. </p><h1>자기 소개</h1><ul><li>이름: とりすぷ( <a href="https://qiita.com/toRisouP" target="_blank" rel="noopener noreferrer">@toRisouP</a> )</li><li>취미로 Unity를 이용해 게임 개발을 하고 있습니다.</li></ul><h1>지금 만들고 있는 게임</h1><ul><li>제목 :  <a href="https://www.mikoma.net/" target="_blank" rel="noopener noreferrer">ハクレイフリーマーケット</a></li><li>동방 2차 창작 게임</li><li>3D 대전 액션 게임</li><li><strong>네트워크 대전 지원</strong> (최대 6인)</li><li>사용자 관리 기능</li></ul><p>아이템을 자기 진영에 넣으면 점수가 나는 게임 입니다.</p><p><img loading="lazy" src="/assets/images/2020-02-23-1-7d965b0e28fb6c5bc48b139a74350bfb.jpg" width="955" height="536" class="img_ev3q"></p><h1>이번 내용</h1><ul><li>ハクレイフリーマーケット 개발을 통해 얻은 지식과 노하우를 정리합니다.</li><li>1인 개발에서 얻은 지식이므로, 팀 개발에 그대로 적용 할 수 없을지도 모릅니다<ul><li>프로그래머 관점에서의 내용 입니다.</li></ul></li><li>생각나는대로 썻기 때문에 내용에 맥락은 없습니다.<ul><li>궁금하신 부분만 발췌해서 읽으세요.</li></ul></li></ul><h1>정리 목록</h1><p>크게 2가지가 있습니다.</p><ul><li>추천 에셋 서비스 편</li><li>프로그래밍 편</li></ul><h1>추천 에셋 서비스 편</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="추천-에셋-서비스">추천 에셋 서비스<a class="hash-link" href="#추천-에셋-서비스" title="제목으로 바로 가기">​</a></h2><ul><li>어떤 기능이 필요하게 되었을 때 이용한 에셋이나 서비스를 소개 합니다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-네트워크를-만들고-싶다">1. 네트워크를 만들고 싶다<a class="hash-link" href="#1-네트워크를-만들고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것--phton-cloud">사용한 것 : Phton Cloud<a class="hash-link" href="#사용한-것--phton-cloud" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="photon">Photon<a class="hash-link" href="#photon" title="제목으로 바로 가기">​</a></h3><ul><li>일본에서는 GMO 인터넷에서 제공하는 네트워크 엔진</li><li>서버 클라이언트 형태의 네트워크를 만들 수 있게 된다</li><li>그 중에서도 &quot;Photon Cloud&quot;는 서버를 클라우드로 제공 해준다.<ul><li>Unity 용 SDK도 공개되어 있다 (PUN)</li><li>20명 동시 연결까지는 무료</li></ul></li></ul><p><a href="https://www.photonengine.com/ko-kr/Photon" target="_blank" rel="noopener noreferrer">공식 사이트</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unity--photon-cloud에서-할-수-있는-일">Unity + Photon Cloud에서 할 수 있는 일<a class="hash-link" href="#unity--photon-cloud에서-할-수-있는-일" title="제목으로 바로 가기">​</a></h3><ul><li>방을 만들고 참가자를 모집한다.</li><li>Transform, Animator등 다른 임의의 정보를 네트워크를 통해 동기화 할 수 있다.</li><li>네트워크를 통해 메서드를 호출 해 실행할 수 있다.</li></ul><p>네트워크 통신에 필요한 것은 대략 적으로 지원하고 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="그러나-네트워크를-쉽게-만들-수-있다고는-말하지-않았다">그러나 네트워크를 쉽게 만들 수 있다고는 말하지 않았다!<a class="hash-link" href="#그러나-네트워크를-쉽게-만들-수-있다고는-말하지-않았다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="네트워크-개발의-어려움">네트워크 개발의 어려움<a class="hash-link" href="#네트워크-개발의-어려움" title="제목으로 바로 가기">​</a></h3><ul><li><strong>생각해야 될 상태가 늘어난다</strong><ul><li>같은 객체가 &quot;로컬&quot;과 &quot;네트워크 너머 상대방의 세계(리모트)&quot; 양쪽에 동시에 존재한다.</li><li>로컬 및 원격 세계의 상태를 고려하여 객체를 조작하지 않으면 안된다</li></ul></li><li><strong>간단한 것도 비동기 처리 해야 된다</strong><ul><li>단지 &quot;떨어진 아이템을 줍는다&quot;라는 처리만으로도 매우 귀찮아진다.</li><li>참고: <a href="https://qiita.com/toRisouP/items/e56cf1c81144d49653bf" target="_blank" rel="noopener noreferrer">아이템 복사 방지</a></li></ul></li><li><strong>디버깅이 매우 어렵다</strong><ul><li>통신시의 미묘한 시기에 발생하는 버그 라든지 재현이 어렵다.</li></ul></li><li>통신 상대가 없으면 디버깅 및  레벨 디자인을 할 수 없다.<ul><li>동작 확인을 위해 여러 플레이어 필요</li><li>실시간으로 사람을 모을 수 밖에 없다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="게임-개발-초보자에게는-네트워크-개발은-추천-할-수-없다">게임 개발 초보자에게는 네트워크 개발은 추천 할 수 없다<a class="hash-link" href="#게임-개발-초보자에게는-네트워크-개발은-추천-할-수-없다" title="제목으로 바로 가기">​</a></h3><ul><li>Photon이 지원해주는 것은 어디 까지나 통신의 낮은 레이어 부분 만 지원해주고, 응용프로그램은 결국 자신이 구현해야 한다.</li><li>오프라인 게임에 비해 네트워크 개발은 구현하지 않으면 안되는 것이 몇 배는 있다</li><li>어느정도 개발 경험을 쌓고 프로그래밍에 자신감이 붙은 사람이 아니면 손을 대는 것은 위험하다고 생각한다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-사용자-관리가-하고-싶다">2. 사용자 관리가 하고 싶다<a class="hash-link" href="#2-사용자-관리가-하고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것-니프티-클라우드-mobile-backend-ncmb">사용한 것: 니프티 클라우드 mobile backend (NCMB)<a class="hash-link" href="#사용한-것-니프티-클라우드-mobile-backend-ncmb" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ncmb">NCMB<a class="hash-link" href="#ncmb" title="제목으로 바로 가기">​</a></h3><ul><li>니프트에서 제공하는 mBaaS 서비스<ul><li>(mBaaS : Mobile Backend as a Service)</li></ul></li><li>회원 가입 기능, 데이터 저장, 푸시 알림 등의 서비스를 이용할 수 있다.</li><li>200만 API/월 요청까지라면 무료로 이용할 수 있다.</li></ul><p><a href="https://mbaas.nifcloud.com/" target="_blank" rel="noopener noreferrer">공식 사이트</a></p><p>[역주]</p><p>비슷한 서비스로 <a href="https://playfab.com/" target="_blank" rel="noopener noreferrer">PlayFab</a> 이나 <a href="https://firebase.google.com/?hl=ko" target="_blank" rel="noopener noreferrer">Firebase</a>도 제공하고 있다.</p><p>한국에서는 이 2개의 서비스로 시작하는게 더 나을 것 같다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ncmb에서-사용자-관리">NCMB에서 사용자 관리<a class="hash-link" href="#ncmb에서-사용자-관리" title="제목으로 바로 가기">​</a></h3><ul><li>NCMB를 사용하면 간단하게 게임에 회원 가입 및 로그인 기능을 구현할 수 있다.</li><li>이메일 주소 인증에도 대응 된다.</li><li>자기 부담으로 계정 관리 서버를 만들지 않아서 정말 고맙다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-제품-정품-인증-기능을-원한다">3. 제품 정품 인증 기능을 원한다.<a class="hash-link" href="#3-제품-정품-인증-기능을-원한다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것--없다">사용한 것 : 없다<a class="hash-link" href="#사용한-것--없다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="왜">왜?<a class="hash-link" href="#왜" title="제목으로 바로 가기">​</a></h3><ul><li>일련 번호를 가진 사람만 즐길 수 있는 기능을 원한다.<ul><li>실제 구입한 사람만 즐길 수 있게 하고 싶다</li></ul></li><li><strong>시리얼 정품 인증을 제공 해주는것은 좋은 느낌의 서비스는 존재하지 않는다.</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="결국-어떻게-했는지">결국 어떻게 했는지?<a class="hash-link" href="#결국-어떻게-했는지" title="제목으로 바로 가기">​</a></h3><ul><li>자기 부담으로 인증 서버를 만들 수 밖에 없었다.<ul><li>Ruby on Rails로 빠르게 Web 서비스를 만들 수 잇어서 좋았다.</li></ul></li><li>자기 부담 서버와 NCMB를 연계시켜 구입자, 미 구매자 관리를 했따.</li></ul><p>자세한 내용은 <a href="https://www.slideshare.net/torisoup/unityncmb-148151719" target="_blank" rel="noopener noreferrer">Unity와 NCMB에서 사용자 관리를 구현 해본 이야기</a>를 참조</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-npc-상대를-만들고-싶다">4. NPC 상대를 만들고 싶다<a class="hash-link" href="#4-npc-상대를-만들고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것">사용한 것<a class="hash-link" href="#사용한-것" title="제목으로 바로 가기">​</a></h3><p><a href="https://assetstore.unity.com/packages/tools/visual-scripting/behavior-designer-behavior-trees-for-everyone-15277" target="_blank" rel="noopener noreferrer">Behaviour Designer</a></p><p><img loading="lazy" src="/assets/images/2020-02-23-2-8e0b141958ef0ea0d3ae01fe2a8b47df.png" width="835" height="498" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="behaviour-designer">Behaviour Designer<a class="hash-link" href="#behaviour-designer" title="제목으로 바로 가기">​</a></h3><ul><li>BehaviourTree를 GUI에서 만들 수 있는 에셋</li><li>NPC의 행동을 최소 단위로 분할하고 그들을 결합하여 사람 같이 움직이게 할 수 있다.</li><li>상태 머신을 짜는 것에 비해 매우 알기 쉽게 NPC를 만들 수 있으므로 추천한다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="완성된-실제-tree">완성된 실제 Tree<a class="hash-link" href="#완성된-실제-tree" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-3-1b1126c7c6a39e698ca2c98b56ecb735.jpeg" width="1200" height="680" class="img_ev3q"></p><ul><li>만드는데 걸린 시간은 15 시간 정도</li><li>70% 정도는 자작 Task 이다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="실제로-만든-nppc의-동영상">실제로 만든 NPPC의 동영상<a class="hash-link" href="#실제로-만든-nppc의-동영상" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-4-e719009ab81bf5bf147e467b4e6d3e2e.jpeg" width="960" height="540" class="img_ev3q"></p><p><a href="https://www.youtube.com/watch?v=nLsR3nrmppQ" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=nLsR3nrmppQ</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-게임-패드의-관리를-하고-싶다">5. 게임 패드의 관리를 하고 싶다.<a class="hash-link" href="#5-게임-패드의-관리를-하고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것-1">사용한 것<a class="hash-link" href="#사용한-것-1" title="제목으로 바로 가기">​</a></h3><p><a href="https://assetstore.unity.com/packages/tools/utilities/rewired-21676" target="_blank" rel="noopener noreferrer">Rewired</a></p><p><img loading="lazy" src="/assets/images/2020-02-23-5-d2b647f6b2bc17229a2d1f101e6ca910.png" width="1015" height="683" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rewired">Rewired<a class="hash-link" href="#rewired" title="제목으로 바로 가기">​</a></h3><ul><li>게임 패드의 관리에 특화된 에셋</li><li>게임 패드의 자동 검출및 자동 할당을 동적으로 해준다.</li><li>게임패드의 형태에 따라 적절하게 변경해준다.</li><li><strong>방대한 종류의 게임 패드가 처음부터 등록되어 있다.</strong><ul><li>일단 수중에 있던 게임 패드는 대략 대응 된다.</li></ul></li></ul><p>[역주]</p><p>Unity에서 새로 발표한 <a href="https://blogs.unity3d.com/kr/2019/10/14/introducing-the-new-input-system/" target="_blank" rel="noopener noreferrer">new Input System</a>이 기능을 대체할 수 있을지 확인해봐야 될 것 같다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-물리-기반-charactercontroller을-원한다">6. 물리 기반 CharacterController을 원한다.<a class="hash-link" href="#6-물리-기반-charactercontroller을-원한다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것-2">사용한 것<a class="hash-link" href="#사용한-것-2" title="제목으로 바로 가기">​</a></h3><p><a href="https://assetstore.unity.com/packages/templates/systems/easy-character-movement-57985" target="_blank" rel="noopener noreferrer">Easy Character Movement</a></p><p><img loading="lazy" src="/assets/images/2020-02-23-6-9a2a94b26e5fca77e6a0d85a01a67c9e.png" width="1034" height="650" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="easy-character-movement">Easy character Movement<a class="hash-link" href="#easy-character-movement" title="제목으로 바로 가기">​</a></h3><ul><li>물리 연산과 상호 간섭하면서 작동하는 캐릭터를 쉽게 만들 수 있는 에셋</li><li>CharacterController과 같은 인터페이스에서 RigidBody를 취급 할 수 있다.<ul><li>Move() 메서드로 이동하면서 AppleForce()로 날려 버린다 같은 것을 할 수 있다.</li><li>움직이는 바닥의 영향을 받게 하고 싶다.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-개체를-눈에-띄게-하고-싶다">7. 개체를 눈에 띄게 하고 싶다<a class="hash-link" href="#7-개체를-눈에-띄게-하고-싶다" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용한-것-3">사용한 것<a class="hash-link" href="#사용한-것-3" title="제목으로 바로 가기">​</a></h3><p><a href="https://assetstore.unity.com/packages/tools/particles-effects/highlighting-system-41508" target="_blank" rel="noopener noreferrer">Highlighting System</a></p><p><img loading="lazy" src="/assets/images/2020-02-23-7-b952143f5a3aa0ba25588b5da5e217e5.png" width="823" height="728" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="highlighting-system">Highlighting System<a class="hash-link" href="#highlighting-system" title="제목으로 바로 가기">​</a></h3><ul><li>스크립트를 연결하면 GameObject에 윤곽선을 달 수 있다.<ul><li>특별한 쉐이더를 사용하지 않고 스크립트만으로 가능하다.</li></ul></li><li>점멸 기능과 벽을 투명하게 그리는 기능도 있다.</li><li>플레이어에 윤곽을 붙여두면 시인성이 향상되므로 추천 한다.</li></ul><h1>추천 자산 서비스 편 완료</h1><h1>프로그래밍 편</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="프로그래밍-편-1">프로그래밍 편<a class="hash-link" href="#프로그래밍-편-1" title="제목으로 바로 가기">​</a></h2><ul><li>Unity에서 프로그램을 해오면서 발생한 문제와 그 해결책을 소개 한다.</li></ul><ol><li>형 안전이 아닌 곳에서 죽는 문제</li><li>매니저 싱글톤의 배치 문제</li><li>GOD 클래스가 있는 문제</li><li>컴포넌트간의 연계 방법</li><li>View와 Model의 연계</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-타입-안전이-아닌-곳에서-죽는-문제">1. 타입 안전이 아닌 곳에서 죽는 문제<a class="hash-link" href="#1-타입-안전이-아닌-곳에서-죽는-문제" title="제목으로 바로 가기">​</a></h2><p>&quot;시작은 하는데 왠지 동작이 이상하다. 움직이지 않는다.&quot;</p><p>&quot;컴파일 에러는 안났지만, 움직일때 에러가 난다&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="타입-안전은">타입 안전은?<a class="hash-link" href="#타입-안전은" title="제목으로 바로 가기">​</a></h3><ul><li><strong>프로그램 작성을 잘못 했을 때 제대로 컴파일 오류가 발생한 상태</strong><ul><li>&quot;타입&quot;에 의해 프로그램의 정당성이 담보된 상태의 수</li><li>타입 안전성이 없는 경우, 어딘가 기술을 잘못해도 인간이 그 실수를 알아차릴 방법이 없다.</li><li>버그가 발생했을 때, 수상한 곳을 중단점으로 코드를 체크하게 된다.</li></ul></li></ul><p>Unity에서 타입 안전이 아닌 기능</p><ul><li>SendMessage</li><li>Tag</li><li>Scene 전환</li><li>Invoke</li><li>Animator 플래그 지정</li></ul><p>대부분 문자열 기반으로 처리를 하고 있는 곳</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-태그">예: 태그<a class="hash-link" href="#예-태그" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnCollisionEnter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collision</span><span class="token plain"> collision</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Enemy의 철자가 틀렸지만 컴파일 에러는 되지 않는다!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">collision</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tag </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Eneny&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 처리 부분</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-animator-애니메이션-플래그">예: Animator 애니메이션 플래그<a class="hash-link" href="#예-animator-애니메이션-플래그" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// IsRunning을 철자가 틀렸지만, 컴파일 에러는 되지 않는다!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">animator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetBool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;IsRuning&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="대책">대책<a class="hash-link" href="#대책" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="문자열-기반의-처리를-없앤다">문자열 기반의 처리를 없앤다<a class="hash-link" href="#문자열-기반의-처리를-없앤다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="타입-안전하게-쓰는-방법">타입 안전하게 쓰는 방법<a class="hash-link" href="#타입-안전하게-쓰는-방법" title="제목으로 바로 가기">​</a></h3><ul><li>문자열을 사용하여 동작을 제어하고 있는 것이 악의 근원이다.</li><li>문자열을 사용 장소를 제한하고 가능한 &quot;타입&quot;의 형태 모양으로 변경하면 된다.<ul><li>enum을 사용 하든지, 인터페이스를 사용 하든지, 프로퍼티로 감싸던지</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-1">예 1<a class="hash-link" href="#예-1" title="제목으로 바로 가기">​</a></h3><ul><li>Tag 비교에 enum을 사용</li></ul><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">EntityType</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Player</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enemy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Boss</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnCollisionEnter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collision</span><span class="token plain"> collision</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// enum의 ToString은 느리지만..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">collision</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tag </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> EntityType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Enemy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-2">예 2<a class="hash-link" href="#예-2" title="제목으로 바로 가기">​</a></h3><ul><li>원래 Tag를 사용하지 않고 타입으로 비교</li></ul><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnCollisionEnter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collision</span><span class="token plain"> collision</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// IEnemy 인터페이스를 구현 한 컴포넌트를 가지고 있는지 알아</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> enemyComponent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> collision</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">IEnemy</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">enemyComponent </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예-3">예 3<a class="hash-link" href="#예-3" title="제목으로 바로 가기">​</a></h3><ul><li>애니메이션 플래그를 프로퍼티로 감싼다.</li></ul><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Animator</span><span class="token plain"> animator</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 이동 애니메이션 플래그</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token plain"> IsRunning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;IsRunning&quot;라는 문자열이 등장하는 것은 이곳이 유일하다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// (여기 만 오탈자가 발생하지 않도록 주의 해두면 된다)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> animator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetBool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;IsRunning&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    animator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">Animator</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// bool을 대입하는 것만으로 사용할 수 있다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IsRunning </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="타입-안전이-아닌-곳에서-죽는-문제-요약">&quot;타입 안전이 아닌 곳에서 죽는 문제&quot; 요약<a class="hash-link" href="#타입-안전이-아닌-곳에서-죽는-문제-요약" title="제목으로 바로 가기">​</a></h3><ul><li>int 형과 string 타입을 사용하여 조건 판전을 실시하고 있는 곳은 실수가 발생하기 쉽다.</li><li>인터페이스를 만들거나, enum을 사용하거나, 프로퍼티로 감싸던지 어쨌든 원시적인 형태가 노출되지 않도록 유의하면 된다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-매니저-싱글톤의-배치-문제">2. 매니저 싱글톤의 배치 문제<a class="hash-link" href="#2-매니저-싱글톤의-배치-문제" title="제목으로 바로 가기">​</a></h2><p>&quot;Editor 상에서 씬을 지정해서 실행하면 에러가 발생한다.&quot;</p><p>&quot;같은 게임 오브젝트가 2개가 존재한다&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="매니저-싱글톤">매니저 싱글톤<a class="hash-link" href="#매니저-싱글톤" title="제목으로 바로 가기">​</a></h3><ul><li>씬을 횡당하여 리소스 등을 계속 관리하는 싱글톤<ul><li>장면 전환시 전환 애니메이션 관리</li><li>사운드 관리</li><li>게임의 설정 항목 관리</li></ul></li><li>항상 1개 이며, 게임의 실행 중에 존재하지 않으면 게임이 올바르게 동작하지 않는다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="매니저-싱글톤은-어떻게-초기화-하나">매니저 싱글톤은 어떻게 초기화 하나?<a class="hash-link" href="#매니저-싱글톤은-어떻게-초기화-하나" title="제목으로 바로 가기">​</a></h3><ul><li>씬에 Prefab화한 싱글톤을 배치하는 것 만으로 괜찮지 않나?<ul><li><code>DontDestroyOnLoad</code>로 지정하고 한 번 배치하면 사라지지 않도록 한다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="안됩니다">안됩니다.<a class="hash-link" href="#안됩니다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="씬에-처음부터-싱글톤을-놓아-두면-안되는-이유">씬에 처음부터 싱글톤을 놓아 두면 안되는 이유<a class="hash-link" href="#씬에-처음부터-싱글톤을-놓아-두면-안되는-이유" title="제목으로 바로 가기">​</a></h3><ul><li><strong>싱글톤을 배치하고 있지 않는 씬에서 게임을 실행하면 싱글톤이 존재하지 않으면 죽는다.</strong><ul><li>Editor에서 디버깅 중에 발생한다.</li><li>전체 씬에 싱글톤을 배치하는 것 같은 것은 하고 싶지 않다.</li></ul></li><li><strong>싱글톤이 존재하는 씬을 방문할때마다 하나씩 생성되어 증식된다.</strong><ul><li>다중 생성되면 지우는 것도 근본적인 해결책이 되지 않는다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="대책-1">대책<a class="hash-link" href="#대책-1" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="필요한-타이밍에서-처음으로-싱글톤을-동적으로-생성하면-된다">&quot;필요한 타이밍에서 처음으로 싱글톤을 동적으로 생성하면 된다&quot;<a class="hash-link" href="#필요한-타이밍에서-처음으로-싱글톤을-동적으로-생성하면-된다" title="제목으로 바로 가기">​</a></h3><p>필요할때</p><ul><li>이미 싱글톤이 존재한다면 그것을 사용한다.</li><li>없다면 새로 생성 한다.</li></ul><p>이것만으로 해결 할 수 있다 (즉 단순한 지연 초기화)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현-예">구현 예<a class="hash-link" href="#구현-예" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 씬 전환을 실시하는 클래스</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SceneLoader</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 매니저 싱글톤의  Prefab 경로</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> managerPrefabPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Managers/TransitionManager&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 싱글턴 전환 애니메이션 제어 구성 요소</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">TransitionManager</span><span class="token plain"> _transitionManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 이미 싱글 톤이 존재한다면 그것을 돌려주고, 없는 경우 만든다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token return-type class-name">TransitionManager</span><span class="token plain"> TransitionManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">get</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_transitionManager </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> _transitionManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TransitionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Instance </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> resource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">managerPrefabPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Instantiate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resource</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _transitionManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TransitionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Instance</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> _transitionManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 씬 전환을 시작</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;param name=&quot;scene&quot;&gt; 다음 씬 &lt;/param&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LoadScene</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">GameScenes</span><span class="token plain"> scene</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TransitionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">StartTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scene</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>static 클래스에 매니저 싱글톤의 존재 확인을 끼워 없으면 생성시킨다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현-예-1">구현 예<a class="hash-link" href="#구현-예-1" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SceneLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">LoadScene</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GameScenes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Title</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>호출자는 싱글톤을 의식하지 않고 static 클래스에 구현된 메소드를 실행 한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="매니저-싱글톤의-배치-문제-요약">매니저 싱글톤의 배치 문제 요약<a class="hash-link" href="#매니저-싱글톤의-배치-문제-요약" title="제목으로 바로 가기">​</a></h3><ul><li><strong>지연 초기화를 이용하면 해결 할 수 있다.</strong></li><li><strong>그러나 처음 액세스 할 때 싱글톤의 생산 비용이 발생하는 단점이 있다.</strong><ul><li>스탠드얼론일때는 기동 직후 장면에서 취합하여 초기화를 실행한다.</li><li>에디터 실행시에만 이 지연 초기화를 사용한다.</li><li>라고 하면 좋을지도 모르겠다.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-god-클래스가-있는-문제">3. GOD 클래스가 있는 문제<a class="hash-link" href="#3-god-클래스가-있는-문제" title="제목으로 바로 가기">​</a></h2><p>&quot;이 클래스는 1000 라인이 넘어 간다.&quot;</p><p>&quot;필드 변수와 메소드가 많이 있어 어떻게 의존하고 있는지 모르겠다!&quot;</p><p>&quot;Update()의 내용이 위험하다!&quot;</p><p>[역주]</p><p>1000 라인이 넘어간다고 무조건 GOD 클래스는 아니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="god-클래스">GOD 클래스?<a class="hash-link" href="#god-클래스" title="제목으로 바로 가기">​</a></h3><ul><li>여러가지 기능이 담겨있어 거대한 클래스</li><li>피해야 할 안티 패턴</li><li>대충 만들다 보면 이렇게 된다.<ul><li>Unity의 공식 튜토리얼의 프로젝트를 그대로 확장 해 나가다보면 GOD 클래스가 되기 쉽다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="god-클래스인-playercontroller">GOD 클래스인 PlayerController<a class="hash-link" href="#god-클래스인-playercontroller" title="제목으로 바로 가기">​</a></h3><ul><li>Input 관리, 이동, 공격, 데미지, 애니메이션, 음향 효과, 입자 효과, UI 관리 등..</li><li>이러한 처리가 <strong>모두 하나의 클래스</strong>에 정의되어 있다.<ul><li>상태를 나타내는 플래그가 난무하고 Update() 안에서도 이것저것 구현 되어 있다.</li></ul></li></ul><p>이렇게 만드는 사람들이 많을 것이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="대책-2">대책<a class="hash-link" href="#대책-2" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-분할">컴포넌트 분할<a class="hash-link" href="#컴포넌트-분할" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-8-22d6876c785a41cecbf47a99c92080f5.jpg" width="454" height="800" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-분할-1">컴포넌트 분할<a class="hash-link" href="#컴포넌트-분할-1" title="제목으로 바로 가기">​</a></h3><ul><li><strong>단일 책임 원칙</strong>을 의식하고 구성 요소를 분할한다.<ul><li>컴포넌트 1개는 1개의 역할만 담당한다.</li><li>이동 처리는 PlayerMover 에서, 애니메이션 관리는 PlayerAnimation 같이 처리 한다.</li></ul></li><li>1개의 컴포넌트가 다루는 영역이 좁아지기 때문에 필요한 최소한의 필드와 메서드만 구현되서 코드의 품질이 좋아진다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트를-분할-할-때-조언">컴포넌트를 분할 할 때 조언<a class="hash-link" href="#컴포넌트를-분할-할-때-조언" title="제목으로 바로 가기">​</a></h3><ul><li><strong>그 컴포넌트가 제공하는 &quot;기능&quot;에 관계있는 처리만을 구현</strong><ul><li>&quot;이동&quot;에 특화된 컴포넌트는 이동 처리에 필요한 것만 제공한다.</li><li>자신의 책임 이외의 처리는 다른 컴포넌트에 위양한다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-분할의-장점">컴포넌트 분할의 장점<a class="hash-link" href="#컴포넌트-분할의-장점" title="제목으로 바로 가기">​</a></h3><ul><li><strong>1개의 컴포넌트가 맡는 책임이 명확해진다.</strong><ul><li>불필요한 일을 생각하지 않고 지금 컴포넌트가 할 일만 생각하고 구현하면 된다.</li></ul></li><li><strong>어떤 처리가 어떤 컴포넌트에 쓰여져 있는지 알기 쉽게 된다.</strong><ul><li>클래스의 이름으로 처리 위치를 찾을 수 있게 된다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-분할의-단점">컴포넌트 분할의 단점<a class="hash-link" href="#컴포넌트-분할의-단점" title="제목으로 바로 가기">​</a></h3><ul><li>방대한 수의 컴포넌트를 연결해야 하며, 그 관리가 힘들어진다.<ul><li>악마 같은 RequireComponent를 쓰는 것도 고충이다.</li><li>MonoBehaviour을 상속하지 않는 Pure한 클래스를 생성하고 그 쪽에 처리를 위양하는 방법도 있다.</li></ul></li><li><strong>Update 호출 비용이 증가 한다.</strong><ul><li>(UniRx의 <code>ObservableUpdateTrigger</code>를 사용하면 Update 비용은 일단 줄일 수 있다.)</li></ul></li><li>뒤에서 다룰 &quot;종속성&quot;과 &quot;클래스 간의 연계&quot; 문제가 나온다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="하나님-클래스는-절대-악인가">하나님 클래스는 절대 악인가?<a class="hash-link" href="#하나님-클래스는-절대-악인가" title="제목으로 바로 가기">​</a></h3><ul><li><strong>규모가 작고 감당할 수 있는 범위라면</strong> 모든 처리를 하나의 클래스에 담아도 된다.</li><li>처음에는 일단 프로그래밍 하고, 코드에 악취가 날때 분할 하는 방식도 괜찮다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-의존-참조-관계가-복잡해지는-문제">3. 의존, 참조 관계가 복잡해지는 문제<a class="hash-link" href="#3-의존-참조-관계가-복잡해지는-문제" title="제목으로 바로 가기">​</a></h2><p>&quot;어떤 컴포넌트가 어디에 의존하는 거야?&quot;</p><p>&quot;컴포넌트를 재사용 하고 싶지만, 어쩐지 여러곳에 의존하고 있어 사용할 수 없다!&quot;</p><p>&quot;어? 상호 참조하고 있어 초기화에 실패 하고 있다.&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="종속성이-복잡해지는-문제">종속성이 복잡해지는 문제<a class="hash-link" href="#종속성이-복잡해지는-문제" title="제목으로 바로 가기">​</a></h3><ul><li>분할된 컴포넌트를 계속 연결해 나가면 복잡해진다.</li><li>어디를 만지면 어디에 영향을 미칠지 예측 불가능 해진다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="대책-3">대책<a class="hash-link" href="#대책-3" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현하기-전에-클래스-다이어그램을-작성하고-설계한다">구현하기 전에 클래스 다이어그램을 작성하고 설계한다.<a class="hash-link" href="#구현하기-전에-클래스-다이어그램을-작성하고-설계한다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설계를-제대로-하자">설계를 제대로 하자<a class="hash-link" href="#설계를-제대로-하자" title="제목으로 바로 가기">​</a></h3><ul><li>복잡해지는 원인은 대부분 닥치는 대로 구현하기 때문이다.<ul><li>사양이 원래 복잡한 경우는 어쩔 수 없다.</li></ul></li><li>설계 클래스 다이어그램을 만들어두면 구현 작업을 분담 할 수 있게 된다.<ul><li>누가 구현해도 설계대로 만들어질 것이다.</li></ul></li><li>잡다한 클래스 다이어그램도 적어 놓으면 나중에 전체 형태를 파악이 가능하게 된다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="클래스-다이어그램을-작성하는-추천-도구">클래스 다이어그램을 작성하는 추천 도구<a class="hash-link" href="#클래스-다이어그램을-작성하는-추천-도구" title="제목으로 바로 가기">​</a></h3><ul><li><a href="https://qiita.com/nakahashi/items/3d88655f055ca6a2617c" target="_blank" rel="noopener noreferrer">PlantUML</a>을 사용하면 쉽게 그림이 그려지므로 추천 한다.<ul><li>텍스트를 쓰는 것만으로 자동으로 클래스 다이어그램이 생성된다.</li></ul></li></ul><p>[역주]</p><p>Visual studio Code에서도 똑같은 확장 프로그램을 설치하여 실행 할 수 있다. 클래스 다아어그램을 문자로 관리를 하면 Git으로 버전관리도 되고, 협업도 된다.</p><ul><li><a href="http://plantuml.com/ko/" target="_blank" rel="noopener noreferrer">PlantUML 공식 홈페이지</a></li></ul><p><img loading="lazy" src="/assets/images/2020-02-23-9-e85c9d1f5755716d90ba0fd20395eb7f.gif" width="1324" height="957" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="실제로-작성한-클래스-다이어그램-예">실제로 작성한 클래스 다이어그램 예<a class="hash-link" href="#실제로-작성한-클래스-다이어그램-예" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-10-6abad4d690f5ecbb5e70cb87841ceaad.jpg" width="1400" height="823" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="클래스-설계시-조언">클래스 설계시 조언<a class="hash-link" href="#클래스-설계시-조언" title="제목으로 바로 가기">​</a></h3><ul><li><strong>상호 참조, 순환 참조를 가능한 피하자</strong><ul><li>상호 참조, 순환 참조는 장점보다 단점이 더 눈에 띄기 때문에 안이하게 이용하지 말자</li><li>닫힌 개념에서 국소적으로 사용할 정도로 억제해두면 좋다.</li></ul></li><li>&quot;<a href="https://qiita.com/tutinoco/items/6952b01e5fc38914ec4e" target="_blank" rel="noopener noreferrer">추상화</a>&quot;와 &quot;<a href="https://qiita.com/UWControl/items/98671f53120ae47ff93a#%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E9%80%86%E8%BB%A2%E3%81%AE%E5%8E%9F%E5%89%87" target="_blank" rel="noopener noreferrer">의존관계역전</a>&quot;을 이용하여 의존 관계를 정리하자.</li></ul><p><img loading="lazy" src="/assets/images/2020-02-23-11-bb039e2a566ca7e6efb32f8ca1bef851.png" width="920" height="489" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="의존관계역전">의존관계역전<a class="hash-link" href="#의존관계역전" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-12-7d80788eccfc71039a0fc7754cbd25a2.png" width="1124" height="608" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설계-노하우의-덩어리">설계 노하우의 덩어리<a class="hash-link" href="#설계-노하우의-덩어리" title="제목으로 바로 가기">​</a></h3><ul><li>SOLID 원칙은 확실히 알고 있으면 좋다.</li><li>&quot;<a href="https://ko.wikipedia.org/wiki/%EC%BD%94%EB%93%9C_%EC%8A%A4%EB%A9%9C" target="_blank" rel="noopener noreferrer">코드스멜</a>&quot;을 느낄 수 있게 되면 좋다.<ul><li>익숙해지면 어디를 추상화 해야 되는지 감각적으로 알게 된다.</li></ul></li><li>우선 여러 가지를 만들어 보고 어려움을 겪으면서, 거기에서 설계의 중요성을 실감하면 좋다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="이런-반론도-있었습니다">이런 반론도 있었습니다.<a class="hash-link" href="#이런-반론도-있었습니다" title="제목으로 바로 가기">​</a></h3><p>&quot;사양이 자주 바뀌기 때문에 설계를 못 해먹겠다!&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사양이-자주-변하니까-설계하지-않는다는-올바른가">&quot;사양이 자주 변하니까 설계하지 않는다&quot;는 올바른가?<a class="hash-link" href="#사양이-자주-변하니까-설계하지-않는다는-올바른가" title="제목으로 바로 가기">​</a></h3><ul><li>솔직히 <a href="https://namu.wiki/w/Case%20by%20case" target="_blank" rel="noopener noreferrer">케바케</a>라고 할 수 밖에 없다.</li><li>변경에 유연하게 만드는 것도, YAGNI로 만드는 것도 있다.<ul><li>(YAGNI:  &quot;You Ain&#x27;t Gonna Need It&quot;. &quot;필요한 작업만 해라&quot;, 사양 변경으로 유연하게 작업한 코드를 작성해 놓으면 코드가 불필요하게 장황해진다. 그러니 당장 필요한 작업에 집중하고 쓸데없는 작업은 하지 말라라는 개발 원칙) <del>Simple is Best</del></li></ul></li><li><strong>프로젝트에 따라 최적의 개발 스타일이 변화하기</strong> 때문에 설계를 안하는 것이 효율이 좋다면  이렇게 할 것이다.<ul><li>설계하는 것이 나중에 편해지는 경우가 더 많지만, &quot;아무래도 설계하고 싶지 않다&quot;라는 사람에게는 강요할 수 없다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="덧붙여서">덧붙여서<a class="hash-link" href="#덧붙여서" title="제목으로 바로 가기">​</a></h3><ul><li>게임 잼도 제대로 설계하고 개발하니 잘 되었다.</li><li><a href="https://qiita.com/toRisouP/items/824aff814849ae41efe7" target="_blank" rel="noopener noreferrer">글로벌 게임 잼에서 클래스 설계를 해서 원할하게 개발이 진행된 이야기</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="의존-참고-관계가-복잡해지는-문제-요약">&#x27;의존, 참고 관계가 복잡해지는 문제&#x27; 요약<a class="hash-link" href="#의존-참고-관계가-복잡해지는-문제-요약" title="제목으로 바로 가기">​</a></h3><ul><li>설계를 잘하는게 답</li><li>클래스 다이어그램을 만들어두면 일단 구현헤서 해메지는 않을 것이다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-컴포넌트간의-연계-방법">4. 컴포넌트간의 연계 방법<a class="hash-link" href="#4-컴포넌트간의-연계-방법" title="제목으로 바로 가기">​</a></h2><p><strong>조각 조각낸 컴포넌트를 어떻게 조화시켜 동작시킬수 있을까?</strong></p><ul><li>&quot;플레이어가 기절 하면, 이동하지 못하게 하고 기절 애니메이션을 재생하고 효과음을 재생하고 싶다&quot;</li><li>상태 관리를 일원화해서 그곳의 변화를 감지해서 마음대로 처리가 움직이는 형태로 하고 싶다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트간의-연계">컴포넌트간의 연계<a class="hash-link" href="#컴포넌트간의-연계" title="제목으로 바로 가기">​</a></h3><ul><li>뭔가 있을 때마다 <strong>이벤트를 발행</strong>하는 것이 가장 편하다.<ul><li>(<strong>Observer 패턴</strong>을 적용하여 연계시킨다)</li></ul></li><li>각 컴포넌트는 &quot;OO가 일어나면 XX를 한다&quot;는 것만을 의식하는 형태로 작성한다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="observer-패턴">Observer 패턴?<a class="hash-link" href="#observer-패턴" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="observer-패턴-1">Observer 패턴<a class="hash-link" href="#observer-패턴-1" title="제목으로 바로 가기">​</a></h3><ul><li>무엇인가 잘못되었을 때 감시 대상 측에서 이벤트를 날려주고 구독 측에서 처리하는 디자인 패턴</li><li>의존 관계를 역전 할 수 있는 장점이 있다<ul><li>(매 프레임 상태의 플래그를 감시 한다 같은 구현을 없앨 수 있다)</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="모르면-일단-unirx를-사용하면-ok">모르면 일단 &quot;<a href="https://assetstore.unity.com/packages/tools/integration/unirx-reactive-extensions-for-unity-17276" target="_blank" rel="noopener noreferrer">UniRx</a>&quot;를 사용하면 OK<a class="hash-link" href="#모르면-일단-unirx를-사용하면-ok" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unirx">UniRx<a class="hash-link" href="#unirx" title="제목으로 바로 가기">​</a></h3><ul><li>Reactive Extensions for Unity</li><li>리액티브 프로그래밍을 Unity에서 사용할 수 있다</li><li>할 수 있는 것이 너무 많아서 한마디로 설명 할 수 없다!<ul><li>과거에 정리한 포스트에 일부 설명하고 있기 때문에 그쪽을 참고하십시오.</li><li><a href="https://qiita.com/toRisouP/items/48b9fa25df64d3c6a392" target="_blank" rel="noopener noreferrer">정리 링크</a></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unirx의-reactivepropertyt">UniRx의 <code>ReactiveProperty&lt;T&gt;</code><a class="hash-link" href="#unirx의-reactivepropertyt" title="제목으로 바로 가기">​</a></h3><ul><li>이벤트 발행 기능을 가진 변수</li><li>값이 바뀌면 통지가 날라온다.</li><li>이것을 부모가 되는 클래스에 갖게 하고 자식이 이벤트를 기다리면 OK</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현-예-2">구현 예<a class="hash-link" href="#구현-예-2" title="제목으로 바로 가기">​</a></h3><ul><li>&quot;플레이어가 기절 하면 이동할 수 없게 하고 기절 애니메이션을 재생 시키고 싶다&quot;</li><li>UniRx를 이용한 구현 예를 소개한다.</li></ul><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Collections</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerHealth</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 기절 플래그</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">BoolReactiveProperty</span><span class="token plain"> IsStunned </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">BoolReactiveProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 데미지 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ApplyDamage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절하지 않았다면 기절 시킨다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StartCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StunCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 기절하는 동안 수행되는 코루틴</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name">IEnumerator</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StunCoroutine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 플래그 ON</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 적당히 대기 한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">WaitForSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 플래그 OFF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 이동 관리 컴포넌트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerMove</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 이동 허가 플래그</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">bool</span><span class="token plain"> _canMove</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 참조의 취득은 원하는 방식으로 구현</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> playerHealth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">PlayerHealth</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 플래그가 변경되면 이동 허가 플래그에 반영한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playerHealth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _canMove </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 다음 부분은 _canMove 플래그를 사용하여 이동 처리를 작성하는 로직</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 이하 생략</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerAnimation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Animator</span><span class="token plain"> _animator</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">bool</span><span class="token plain"> IsStunned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _animator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetBool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;IsStunned&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _animator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">Animator</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> playerHealth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">PlayerHealth</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 플래그를 써 고쳐하면 Animator의 기절 플래그에 반영</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playerHealth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> IsStunned </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PlayerSound</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> playerHealth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-method function" style="color:#d73a49">GetComponent</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&lt;</span><span class="token generic-method generic class-name">PlayerHealth</span><span class="token generic-method generic class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 기절 상태에 맞추어 효과음을 재생, 중지</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playerHealth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IsStunned</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">Play</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">Stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Play</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 생략</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 생략</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-연계-방법-정리">&quot;컴포넌트 연계 방법&quot; 정리<a class="hash-link" href="#컴포넌트-연계-방법-정리" title="제목으로 바로 가기">​</a></h3><ul><li>이벤트 기반 구현을 하는 것이 방법<ul><li>Observer 패턴을 사용할 수 있다.</li></ul></li><li>UniRx와 너무 잘 어울린다<ul><li>바로 리액티브 프로그래밍!</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-view와-model의-연계">5. View와 Model의 연계<a class="hash-link" href="#5-view와-model의-연계" title="제목으로 바로 가기">​</a></h2><p>&quot;어쩐지 Model (데이터 실체)과 View(UI)가 상호 의존적이다.&quot;</p><p><img loading="lazy" src="/assets/images/2020-02-23-13-e009fd2f2a1ad411a2bf5f76a4d45ded.png" width="1314" height="724" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="view와-model이-상호-참조하면-여러가지-위험이-있다">View와 Model이 상호 참조하면 여러가지 위험이 있다.<a class="hash-link" href="#view와-model이-상호-참조하면-여러가지-위험이-있다" title="제목으로 바로 가기">​</a></h3><ul><li><strong>데이터의 실체를 가지는 컴포넌트(Model)가 UI의 제어까지 해야 된다.</strong><ul><li>Model이 GOD 클래스화 된다.</li></ul></li><li><strong>UI의 교체가 어렵다.</strong><ul><li>Model이 View에 커플링이 되어 있기 때문에 쉽게 분리, 교체 할 수 없다.</li></ul></li><li><strong>UI를 재사용 할 수 없게 된다.</strong><ul><li>View에 필요한 로직이 Model에 작성되어 있기 때문에, 다른 Model에 같은 View를 적용하려고하면 Model의 구현마다 다시 작성해야 한다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="view와-model을-잘-다루는-방법">View와 Model을 잘 다루는 방법<a class="hash-link" href="#view와-model을-잘-다루는-방법" title="제목으로 바로 가기">​</a></h3><ul><li>옛날부터 계속 논의되어 온 문제</li><li>지금까지 MVC, MVP, MVVM 같은 아키텍쳐 패턴이 고안되어 왔다.</li><li><strong>Unity에서 기분좋게 사용할 수 있는 패턴은 없는 걸까?</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="있습니다">있습니다.<a class="hash-link" href="#있습니다" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp-패턴">MV(R)P 패턴<a class="hash-link" href="#mvrp-패턴" title="제목으로 바로 가기">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp-패턴-1">MV(R)P 패턴<a class="hash-link" href="#mvrp-패턴-1" title="제목으로 바로 가기">​</a></h3><ul><li>Model-View-(Reactrive)-Presenter 패턴</li><li>UniRx의 제작자 neuecc씨가 고안한 UniRx를 이용한 Unity의 UI 아키텍쳐 패턴</li><li>&quot;Presenter&quot;을 준비하고 Model과 View의 사이를 중개한다.</li><li><strong>UniRx의 ReactiveProperty를 사용하는 것이 쉽다</strong></li></ul><p>참고 : <a href="http://neue.cc/2015/04/13_510.html" target="_blank" rel="noopener noreferrer">UniRx 4.8 - 경량 이벤트 훅과 uGUI의 이벤트에 의한 데이터 바인딩</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp-패턴-적용-후">MV(R)P 패턴 적용 후<a class="hash-link" href="#mvrp-패턴-적용-후" title="제목으로 바로 가기">​</a></h3><p><img loading="lazy" src="/assets/images/2020-02-23-14-3378e9f4fc462e5568fadf8ccbd33b53.png" width="926" height="287" class="img_ev3q"></p><p>[역주]</p><p>MV(R)P 설계에서는 Presenter가 Model과 View을 소지하고있다. 따라서 Presenter는 Model과 View를 알고 있는데, 상호 참조를 피하기 위해 Model과 View는 Presenter를 모르는 구조로 되어 있다.</p><p>안드로이드의 MVP 예제들에서는 보통 View와 Presenter가 1:1로 서로 알고 있는 구조로 되어 있다. 두개의 공통점은 Model과 View는 서로 모른다는 점이다.</p><p>MV(R)P의 경우 MVP에서 변형된 아키텍쳐 패턴으로 유니티에 조금 더 특화된 패턴이라고 생각하면 될 것 같다. 실제로 Unity에서 UniRx를 사용하여 MV(R)P 아키텍쳐를 사용하능 방법에도 여러가지 방법으로 사용하기도 한다.</p><p>아래는 MVP 패턴에 대한 추가 링크</p><ul><li><a href="https://developers.cyberagent.co.jp/blog/archives/4262/" target="_blank" rel="noopener noreferrer">Web 출신의 Unity 엔지니어의 대규모 게임의 기초 설계</a></li><li><a href="http://light11.hatenadiary.com/entry/2019/01/23/231828" target="_blank" rel="noopener noreferrer">[Unity] MVP 및 MV(R)P의 구현 예와 여러가지 구현 방법의 고찰</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp이-구현-예">MV(R)P이 구현 예<a class="hash-link" href="#mvrp이-구현-예" title="제목으로 바로 가기">​</a></h3><ul><li>uGUI의 InputField의 입력을 Model에 저장한다.</li><li>Model을 유지하는 데이터에 변경이 있는 경우 InputField도 업데이트 한다.</li><li>InputField = View 자체로 취급 한다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="model">Model<a class="hash-link" href="#model" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Model</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 외부에 공개하는 데이터</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">ReactiveProperty</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> Name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ReactiveProperty</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&lt;</span><span class="token constructor-invocation class-name keyword" style="color:#00009f">string</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="presenter">Presenter<a class="hash-link" href="#presenter" title="제목으로 바로 가기">​</a></h3><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UniRx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">UnityEngine</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">UI</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// Model과 View를 연결하는 Presenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// &lt;/summary&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Presenter</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token type-list class-name">MonoBehaviour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// view</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">InputField</span><span class="token plain"> _nameInputField</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SerializeField</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Model</span><span class="token plain"> _model</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// view가 업데이트되면 Model의 데이터를 업데이트 한다</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _nameInputField</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OnValueChangedAsObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// model이 업데이트 되면 view를 다시 업데이트 한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> _nameInputField</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mvrp-패턴은-추천-한다">MV(R)P 패턴은 추천 한다.<a class="hash-link" href="#mvrp-패턴은-추천-한다" title="제목으로 바로 가기">​</a></h3><ul><li>uGUI를 사용한다면 이 패턴을 사용하면 굉장히 편리하다.</li><li>View를 위해 약간의 로직이 필요하다면 그것을 Presenter에 써도 좋다.<ul><li>데이터 형식의 반환 같은 것</li></ul></li><li>Presenter의 역할은 &quot;Model과 View를 연결한다&quot; 이므로, 거기에 벗어나는 처리는 하지 않는다.<ul><li>Presenter의 구현은 몇 줄 ~ 수십 줄 정도로 끝날 정도가 적당하다.</li></ul></li></ul><p>[역주]</p><p>어떻게 프로그래밍을 하느냐에 따라 달라질 것 같다. </p><p>실제 모델에서 비즈니스 로직 처리를 전부 완료하고, 값의 반환을 Presenter에 전달하는 방식으로 구현하거나, View 자체의 논리적인 변화가 너무 많아진다면 View를 위한 컴포넌트를 따로 만들어서 처리하는 방식등을 사용하여 구현해야 할 수 있다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="프로그래밍-편-완료">프로그래밍 편 완료<a class="hash-link" href="#프로그래밍-편-완료" title="제목으로 바로 가기">​</a></h2><h1>마지막으로</h1><ul><li>떠오른 생각을 닥치는 대로 썻는데, 분량이 대단히 많아 졌다.</li><li>조금이라도 도움이 되는 부분이 있으면 좋겠다.</li><li>이제 두번 다시 네트워크 게임은 만들고 싶지 않다.</li></ul><p>감사합니다.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unity-3-d">unity3d</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/unirx">unirx</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/karais89/karais89.github.io/tree/main/my-website/blog/2020-02-23-Unity-Asset-And-Tech/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>페이지 편집</a></div></footer></article><div></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="블로그 게시물 탐색"><a class="pagination-nav__link pagination-nav__link--prev" href="/2020/02/23/Getting-Started-4"><div class="pagination-nav__sublabel">이전 게시물</div><div class="pagination-nav__label">UniRx 입문 그 4 -Update를 스트림으로 변환하는 방법 및 장점 -</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/2019/11/17/UniRx-Getting-Started-List"><div class="pagination-nav__sublabel">다음 게시물</div><div class="pagination-nav__label">UniRx 입문 시리즈 목차</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#환경" class="table-of-contents__link toc-highlight">환경</a></li><li><a href="#추천-에셋-서비스" class="table-of-contents__link toc-highlight">추천 에셋 서비스</a></li><li><a href="#1-네트워크를-만들고-싶다" class="table-of-contents__link toc-highlight">1. 네트워크를 만들고 싶다</a><ul><li><a href="#사용한-것--phton-cloud" class="table-of-contents__link toc-highlight">사용한 것 : Phton Cloud</a></li><li><a href="#photon" class="table-of-contents__link toc-highlight">Photon</a></li><li><a href="#unity--photon-cloud에서-할-수-있는-일" class="table-of-contents__link toc-highlight">Unity + Photon Cloud에서 할 수 있는 일</a></li><li><a href="#그러나-네트워크를-쉽게-만들-수-있다고는-말하지-않았다" class="table-of-contents__link toc-highlight">그러나 네트워크를 쉽게 만들 수 있다고는 말하지 않았다!</a></li><li><a href="#네트워크-개발의-어려움" class="table-of-contents__link toc-highlight">네트워크 개발의 어려움</a></li><li><a href="#게임-개발-초보자에게는-네트워크-개발은-추천-할-수-없다" class="table-of-contents__link toc-highlight">게임 개발 초보자에게는 네트워크 개발은 추천 할 수 없다</a></li></ul></li><li><a href="#2-사용자-관리가-하고-싶다" class="table-of-contents__link toc-highlight">2. 사용자 관리가 하고 싶다</a><ul><li><a href="#사용한-것-니프티-클라우드-mobile-backend-ncmb" class="table-of-contents__link toc-highlight">사용한 것: 니프티 클라우드 mobile backend (NCMB)</a></li><li><a href="#ncmb" class="table-of-contents__link toc-highlight">NCMB</a></li><li><a href="#ncmb에서-사용자-관리" class="table-of-contents__link toc-highlight">NCMB에서 사용자 관리</a></li></ul></li><li><a href="#3-제품-정품-인증-기능을-원한다" class="table-of-contents__link toc-highlight">3. 제품 정품 인증 기능을 원한다.</a><ul><li><a href="#사용한-것--없다" class="table-of-contents__link toc-highlight">사용한 것 : 없다</a></li><li><a href="#왜" class="table-of-contents__link toc-highlight">왜?</a></li><li><a href="#결국-어떻게-했는지" class="table-of-contents__link toc-highlight">결국 어떻게 했는지?</a></li></ul></li><li><a href="#4-npc-상대를-만들고-싶다" class="table-of-contents__link toc-highlight">4. NPC 상대를 만들고 싶다</a><ul><li><a href="#사용한-것" class="table-of-contents__link toc-highlight">사용한 것</a></li><li><a href="#behaviour-designer" class="table-of-contents__link toc-highlight">Behaviour Designer</a></li><li><a href="#완성된-실제-tree" class="table-of-contents__link toc-highlight">완성된 실제 Tree</a></li><li><a href="#실제로-만든-nppc의-동영상" class="table-of-contents__link toc-highlight">실제로 만든 NPPC의 동영상</a></li></ul></li><li><a href="#5-게임-패드의-관리를-하고-싶다" class="table-of-contents__link toc-highlight">5. 게임 패드의 관리를 하고 싶다.</a><ul><li><a href="#사용한-것-1" class="table-of-contents__link toc-highlight">사용한 것</a></li><li><a href="#rewired" class="table-of-contents__link toc-highlight">Rewired</a></li></ul></li><li><a href="#6-물리-기반-charactercontroller을-원한다" class="table-of-contents__link toc-highlight">6. 물리 기반 CharacterController을 원한다.</a><ul><li><a href="#사용한-것-2" class="table-of-contents__link toc-highlight">사용한 것</a></li><li><a href="#easy-character-movement" class="table-of-contents__link toc-highlight">Easy character Movement</a></li></ul></li><li><a href="#7-개체를-눈에-띄게-하고-싶다" class="table-of-contents__link toc-highlight">7. 개체를 눈에 띄게 하고 싶다</a><ul><li><a href="#사용한-것-3" class="table-of-contents__link toc-highlight">사용한 것</a></li><li><a href="#highlighting-system" class="table-of-contents__link toc-highlight">Highlighting System</a></li></ul></li><li><a href="#프로그래밍-편-1" class="table-of-contents__link toc-highlight">프로그래밍 편</a></li><li><a href="#1-타입-안전이-아닌-곳에서-죽는-문제" class="table-of-contents__link toc-highlight">1. 타입 안전이 아닌 곳에서 죽는 문제</a><ul><li><a href="#타입-안전은" class="table-of-contents__link toc-highlight">타입 안전은?</a></li><li><a href="#예-태그" class="table-of-contents__link toc-highlight">예: 태그</a></li><li><a href="#예-animator-애니메이션-플래그" class="table-of-contents__link toc-highlight">예: Animator 애니메이션 플래그</a></li><li><a href="#대책" class="table-of-contents__link toc-highlight">대책</a></li><li><a href="#문자열-기반의-처리를-없앤다" class="table-of-contents__link toc-highlight">문자열 기반의 처리를 없앤다</a></li><li><a href="#타입-안전하게-쓰는-방법" class="table-of-contents__link toc-highlight">타입 안전하게 쓰는 방법</a></li><li><a href="#예-1" class="table-of-contents__link toc-highlight">예 1</a></li><li><a href="#예-2" class="table-of-contents__link toc-highlight">예 2</a></li><li><a href="#예-3" class="table-of-contents__link toc-highlight">예 3</a></li><li><a href="#타입-안전이-아닌-곳에서-죽는-문제-요약" class="table-of-contents__link toc-highlight">&quot;타입 안전이 아닌 곳에서 죽는 문제&quot; 요약</a></li></ul></li><li><a href="#2-매니저-싱글톤의-배치-문제" class="table-of-contents__link toc-highlight">2. 매니저 싱글톤의 배치 문제</a><ul><li><a href="#매니저-싱글톤" class="table-of-contents__link toc-highlight">매니저 싱글톤</a></li><li><a href="#매니저-싱글톤은-어떻게-초기화-하나" class="table-of-contents__link toc-highlight">매니저 싱글톤은 어떻게 초기화 하나?</a></li><li><a href="#안됩니다" class="table-of-contents__link toc-highlight">안됩니다.</a></li><li><a href="#씬에-처음부터-싱글톤을-놓아-두면-안되는-이유" class="table-of-contents__link toc-highlight">씬에 처음부터 싱글톤을 놓아 두면 안되는 이유</a></li><li><a href="#대책-1" class="table-of-contents__link toc-highlight">대책</a></li><li><a href="#필요한-타이밍에서-처음으로-싱글톤을-동적으로-생성하면-된다" class="table-of-contents__link toc-highlight">&quot;필요한 타이밍에서 처음으로 싱글톤을 동적으로 생성하면 된다&quot;</a></li><li><a href="#구현-예" class="table-of-contents__link toc-highlight">구현 예</a></li><li><a href="#구현-예-1" class="table-of-contents__link toc-highlight">구현 예</a></li><li><a href="#매니저-싱글톤의-배치-문제-요약" class="table-of-contents__link toc-highlight">매니저 싱글톤의 배치 문제 요약</a></li></ul></li><li><a href="#3-god-클래스가-있는-문제" class="table-of-contents__link toc-highlight">3. GOD 클래스가 있는 문제</a><ul><li><a href="#god-클래스" class="table-of-contents__link toc-highlight">GOD 클래스?</a></li><li><a href="#god-클래스인-playercontroller" class="table-of-contents__link toc-highlight">GOD 클래스인 PlayerController</a></li><li><a href="#대책-2" class="table-of-contents__link toc-highlight">대책</a></li><li><a href="#컴포넌트-분할" class="table-of-contents__link toc-highlight">컴포넌트 분할</a></li><li><a href="#컴포넌트-분할-1" class="table-of-contents__link toc-highlight">컴포넌트 분할</a></li><li><a href="#컴포넌트를-분할-할-때-조언" class="table-of-contents__link toc-highlight">컴포넌트를 분할 할 때 조언</a></li><li><a href="#컴포넌트-분할의-장점" class="table-of-contents__link toc-highlight">컴포넌트 분할의 장점</a></li><li><a href="#컴포넌트-분할의-단점" class="table-of-contents__link toc-highlight">컴포넌트 분할의 단점</a></li><li><a href="#하나님-클래스는-절대-악인가" class="table-of-contents__link toc-highlight">하나님 클래스는 절대 악인가?</a></li></ul></li><li><a href="#3-의존-참조-관계가-복잡해지는-문제" class="table-of-contents__link toc-highlight">3. 의존, 참조 관계가 복잡해지는 문제</a><ul><li><a href="#종속성이-복잡해지는-문제" class="table-of-contents__link toc-highlight">종속성이 복잡해지는 문제</a></li><li><a href="#대책-3" class="table-of-contents__link toc-highlight">대책</a></li><li><a href="#구현하기-전에-클래스-다이어그램을-작성하고-설계한다" class="table-of-contents__link toc-highlight">구현하기 전에 클래스 다이어그램을 작성하고 설계한다.</a></li><li><a href="#설계를-제대로-하자" class="table-of-contents__link toc-highlight">설계를 제대로 하자</a></li><li><a href="#클래스-다이어그램을-작성하는-추천-도구" class="table-of-contents__link toc-highlight">클래스 다이어그램을 작성하는 추천 도구</a></li><li><a href="#실제로-작성한-클래스-다이어그램-예" class="table-of-contents__link toc-highlight">실제로 작성한 클래스 다이어그램 예</a></li><li><a href="#클래스-설계시-조언" class="table-of-contents__link toc-highlight">클래스 설계시 조언</a></li><li><a href="#의존관계역전" class="table-of-contents__link toc-highlight">의존관계역전</a></li><li><a href="#설계-노하우의-덩어리" class="table-of-contents__link toc-highlight">설계 노하우의 덩어리</a></li><li><a href="#이런-반론도-있었습니다" class="table-of-contents__link toc-highlight">이런 반론도 있었습니다.</a></li><li><a href="#사양이-자주-변하니까-설계하지-않는다는-올바른가" class="table-of-contents__link toc-highlight">&quot;사양이 자주 변하니까 설계하지 않는다&quot;는 올바른가?</a></li><li><a href="#덧붙여서" class="table-of-contents__link toc-highlight">덧붙여서</a></li><li><a href="#의존-참고-관계가-복잡해지는-문제-요약" class="table-of-contents__link toc-highlight">&#39;의존, 참고 관계가 복잡해지는 문제&#39; 요약</a></li></ul></li><li><a href="#4-컴포넌트간의-연계-방법" class="table-of-contents__link toc-highlight">4. 컴포넌트간의 연계 방법</a><ul><li><a href="#컴포넌트간의-연계" class="table-of-contents__link toc-highlight">컴포넌트간의 연계</a></li><li><a href="#observer-패턴" class="table-of-contents__link toc-highlight">Observer 패턴?</a></li><li><a href="#observer-패턴-1" class="table-of-contents__link toc-highlight">Observer 패턴</a></li><li><a href="#모르면-일단-unirx를-사용하면-ok" class="table-of-contents__link toc-highlight">모르면 일단 &quot;UniRx&quot;를 사용하면 OK</a></li><li><a href="#unirx" class="table-of-contents__link toc-highlight">UniRx</a></li><li><a href="#unirx의-reactivepropertyt" class="table-of-contents__link toc-highlight">UniRx의 <code>ReactiveProperty&lt;T&gt;</code></a></li><li><a href="#구현-예-2" class="table-of-contents__link toc-highlight">구현 예</a></li><li><a href="#컴포넌트-연계-방법-정리" class="table-of-contents__link toc-highlight">&quot;컴포넌트 연계 방법&quot; 정리</a></li></ul></li><li><a href="#5-view와-model의-연계" class="table-of-contents__link toc-highlight">5. View와 Model의 연계</a><ul><li><a href="#view와-model이-상호-참조하면-여러가지-위험이-있다" class="table-of-contents__link toc-highlight">View와 Model이 상호 참조하면 여러가지 위험이 있다.</a></li><li><a href="#view와-model을-잘-다루는-방법" class="table-of-contents__link toc-highlight">View와 Model을 잘 다루는 방법</a></li><li><a href="#있습니다" class="table-of-contents__link toc-highlight">있습니다.</a></li><li><a href="#mvrp-패턴" class="table-of-contents__link toc-highlight">MV(R)P 패턴</a></li><li><a href="#mvrp-패턴-1" class="table-of-contents__link toc-highlight">MV(R)P 패턴</a></li><li><a href="#mvrp-패턴-적용-후" class="table-of-contents__link toc-highlight">MV(R)P 패턴 적용 후</a></li><li><a href="#mvrp이-구현-예" class="table-of-contents__link toc-highlight">MV(R)P이 구현 예</a></li><li><a href="#model" class="table-of-contents__link toc-highlight">Model</a></li><li><a href="#presenter" class="table-of-contents__link toc-highlight">Presenter</a></li><li><a href="#mvrp-패턴은-추천-한다" class="table-of-contents__link toc-highlight">MV(R)P 패턴은 추천 한다.</a></li></ul></li><li><a href="#프로그래밍-편-완료" class="table-of-contents__link toc-highlight">프로그래밍 편 완료</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/karais89" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Blog</a></li><li class="footer__item"><a href="https://github.com/karais89" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9e9d2be4.js"></script>
<script src="/assets/js/main.ebe75132.js"></script>
</body>
</html>